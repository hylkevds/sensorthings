<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>OGC SensorThings API Part 1: Sensing Version 1.1</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book">
<div id="header">
<h1>OGC SensorThings API Part 1: Sensing Version 1.1</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong class="big">Open Geospatial Consortium</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Submission Date:       &lt;yyyy-mm-dd&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Approval Date:         &lt;yyyy-mm-dd&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Publication Date:      &lt;yyyy-mm-dd&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">External identifier of this OGC&#174; document:	<a href="http://www.opengis.net/doc/is/sensorthings/1.1" class="bare">http://www.opengis.net/doc/is/sensorthings/1.1</a></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">URL for this OGC&#174; document:</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Additional Formats (informative):</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Please refer to the <a href="http://docs.opengeospatial.org/is/18-088/errata.html">errata</a> for this document,<br>
which may include some normative corrections.</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Internal reference number of this OGC&#174; document:  18-088</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Version:       1.1</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Category:      OGC&#174; Implementation Specification</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Editors:       Steve Liang, Tania Khalafbeigi, Hylke van der Schaaf</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong class="big">OGC SensorThings API Part 1: Sensing Version 1.1</strong></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Copyright notice</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Copyright &#169; 2019 Open Geospatial Consortium</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">To obtain additional rights of use, visit <a href="http://www.opengeospatial.org/legal/" class="bare">http://www.opengeospatial.org/legal/</a></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Warning</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This document is not an OGC Standard. This document is distributed for review and comment. This document is subject to change without notice and may not be referred to as an OGC Standard.</p>
</div>
<div class="paragraph">
<p>Recipients of this document are invited to submit, with their comments, notification of any relevant patent rights of which they are aware and to provide supporting documentation.</p>
</div>
<table class="tableblock frame-all grid-none" style="width: 50%;">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document type:      OGC® Standard</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document subtype:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document stage:     Draft</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document language:  English</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><em>License Agreement</em></p>
</div>
<div class="paragraph">
<p><span class="small"><em>Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual Property is furnished agrees to the terms of this Agreement.</em></span></p>
</div>
<div class="paragraph">
<p><span class="small"><em>If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR.</em></span></p>
</div>
<div class="paragraph">
<p><span class="small"><em>THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS THAT MAY BE IN FORCE ANYWHERE IN THE WORLD.</em></span></p>
</div>
<div class="paragraph">
<p><span class="small"><em>THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY.</em></span></p>
</div>
<div class="paragraph">
<p><span class="small"><em>This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as provided in the following sentence, no such termination of this license shall require the termination of any third party end-user sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual Property, or the operation of the Intellectual Property, infringe, or in LICENSOR’s sole opinion be likely to infringe, any patent, copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license without any compensation or liability to you , your licensees or any other party. You agree upon termination of any kind to destroy or cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party.</em></span></p>
</div>
<div class="paragraph">
<p><span class="small"><em>Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any LICENSOR standards or specifications. This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be construed to be a waiver of any rights or remedies available to it.</em></span></p>
</div>
<div style="page-break-after: always;"></div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_table_of_figures">Table of Figures</a></li>
<li><a href="#_table_of_tables">Table of Tables</a></li>
<li><a href="#_table_of_requirements">Table of Requirements</a></li>
<li><a href="#abstract">Abstract</a></li>
<li><a href="#keywords">Keywords</a></li>
<li><a href="#preface">Preface</a></li>
<li><a href="#changes_v_11">Changes in version 1.1</a></li>
<li><a href="#submittingorganizations">Submitting organizations</a></li>
<li><a href="#submitters">Submitters</a></li>
<li><a href="#scope">1. Scope</a></li>
<li><a href="#conformance">2. Conformance</a></li>
<li><a href="#references">3. References</a></li>
<li><a href="#terms-definitions">4. Terms and Definitions</a>
<ul class="sectlevel2">
<li><a href="#_collection">4.1. Collection</a></li>
<li><a href="#_entity">4.2. Entity</a></li>
<li><a href="#_entity_sets">4.3. Entity sets</a></li>
<li><a href="#_internet_of_thing">4.4. (Internet of) Thing</a></li>
<li><a href="#_measurement">4.5. Measurement</a></li>
<li><a href="#_observation">4.6. Observation</a></li>
<li><a href="#_observation_result">4.7. Observation Result</a></li>
<li><a href="#_resource">4.8. Resource</a></li>
<li><a href="#_rest">4.9. REST</a></li>
<li><a href="#_sensor">4.10. Sensor</a></li>
</ul>
</li>
<li><a href="#conventions">5. Conventions</a>
<ul class="sectlevel2">
<li><a href="#presentation-requirements-recommendations">5.1. Presentation of Requirements and Recommendations</a></li>
<li><a href="#identifiers">5.2. Identifiers</a></li>
</ul>
</li>
<li><a href="#symbols">6. Symbols (and abbreviated terms)</a></li>
<li><a href="#overview1">7. SensorThings API overview</a>
<ul class="sectlevel2">
<li><a href="#who-should-use">7.1. Who should use the OGC SensorThings API</a></li>
<li><a href="#benefits">7.2. Benefits of the OGC SensorThings API</a></li>
<li><a href="#overview2">7.3. SensorThings API Overview</a></li>
<li><a href="#observations-measurements">7.4. SensorThings API and ISO/OGC Observations and Measurements</a></li>
<li><a href="#oasis-odata">7.5. SensorThings API and OASIS OData</a></li>
<li><a href="#key-value-pair-encodings">7.6. SensorThings API and OGC Key-Value Pair (KVP) Encodings</a></li>
<li><a href="#security">7.7. SensorThings API and Security</a></li>
</ul>
</li>
<li><a href="#sensing-entities1">8. The SensorThings API Sensing Entities</a>
<ul class="sectlevel2">
<li><a href="#common-control-information">8.1. Common Control Information</a></li>
<li><a href="#sensing-entities2">8.2. The Sensing Entities</a>
<ul class="sectlevel3">
<li><a href="#thing">8.2.1. Thing</a></li>
<li><a href="#location">8.2.2. Location</a></li>
<li><a href="#historicallocation">8.2.3. HistoricalLocation</a></li>
<li><a href="#datastream">8.2.4. Datastream</a></li>
<li><a href="#sensor">8.2.5. Sensor</a></li>
<li><a href="#observedproperty">8.2.6. ObservedProperty</a></li>
<li><a href="#observation">8.2.7. Observation</a></li>
<li><a href="#featureofinterest">8.2.8. FeatureOfInterest</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sensorthings-serviceinterface">9. SensorThings Service Interface</a>
<ul class="sectlevel2">
<li><a href="#uri-components">9.1. URI Components</a></li>
<li><a href="#resource-path">9.2. Resource Path</a>
<ul class="sectlevel3">
<li><a href="#usage-no-resource-path">9.2.1. Usage 1: no resource path</a></li>
<li><a href="#usage-address-collection-entities">9.2.2. Usage 2: address to a collection of entities</a></li>
<li><a href="#usage-address-entity">9.2.3. Usage 3: address to an entity in a collection</a></li>
<li><a href="#usage-address-property-of-entity">9.2.4. Usage 4: address to a property of an entity</a></li>
<li><a href="#usage-address-value-of-property">9.2.5. Usage 5: address to the value of an entity’s property</a></li>
<li><a href="#usage-address-navigation-property">9.2.6. Usage 6: address to a navigation property (navigationLink)</a></li>
<li><a href="#usage-address-associationlink">9.2.7. Usage 7: address to an associationLink</a></li>
<li><a href="#usage-nested-resource-path">9.2.8. Usage 8: nested resource path</a></li>
</ul>
</li>
<li><a href="#requesting-data">9.3. Requesting Data</a>
<ul class="sectlevel3">
<li><a href="#evaluating-system-query-options">9.3.1. Evaluating System Query Options</a></li>
<li><a href="#select3">9.3.2. Specifying Properties to Return</a>
<ul class="sectlevel4">
<li><a href="#expand">9.3.2.1. $expand</a></li>
<li><a href="#select4">9.3.2.2. $select</a></li>
</ul>
</li>
<li><a href="#query-entity-sets">9.3.3. Query Entity Sets</a>
<ul class="sectlevel4">
<li><a href="#orderby">9.3.3.1. $orderby</a></li>
<li><a href="#top">9.3.3.2. $top</a></li>
<li><a href="#skip">9.3.3.3. $skip</a></li>
<li><a href="#count">9.3.3.4. $count</a></li>
<li><a href="#filter">9.3.3.5. $filter</a>
<ul class="sectlevel5">
<li><a href="#_built_in_filter_operations">9.3.3.5.1. Built-in filter operations</a></li>
<li><a href="#_built_in_query_functions">9.3.3.5.2. Built-in query functions</a></li>
</ul>
</li>
<li><a href="#nextLink">9.3.3.6. Server-Driven Paging (nextLink)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#create-update-delete">10. SensorThings Sensing Create-Update-Delete</a>
<ul class="sectlevel2">
<li><a href="#overview">10.1. Overview</a></li>
<li><a href="#create-entity">10.2. Create an entity</a>
<ul class="sectlevel3">
<li><a href="#_request">10.2.1. Request</a>
<ul class="sectlevel4">
<li><a href="#link-existing-entities-when-creating">10.2.1.1. Link to existing entities when creating an entity</a></li>
<li><a href="#create-related-entities">10.2.1.2. Create related entities when creating an entity</a></li>
</ul>
</li>
<li><a href="#_response">10.2.2. Response</a></li>
</ul>
</li>
<li><a href="#update-entity">10.3. Update an entity</a>
<ul class="sectlevel3">
<li><a href="#_request_2">10.3.1. Request</a></li>
<li><a href="#_response_2">10.3.2. Response</a></li>
</ul>
</li>
<li><a href="#delete-entity">10.4. Delete an entity</a>
<ul class="sectlevel3">
<li><a href="#_request_3">10.4.1. Request</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#batch-requests">11. Batch Requests</a>
<ul class="sectlevel2">
<li><a href="#introduction">11.1. Introduction</a></li>
<li><a href="#batch-processing">11.2. Batch-processing request</a>
<ul class="sectlevel3">
<li><a href="#batch-request-example">11.2.1. Batch request body example</a></li>
<li><a href="#referencing-new-entities-in-change-set">11.2.2. Referencing new entities in a change set example</a></li>
</ul>
</li>
<li><a href="#batch-processing-response">11.3. Batch-processing response</a></li>
<li><a href="#asynchronous-batch-requests">11.4. Asynchronous batch requests</a></li>
</ul>
</li>
<li><a href="#multidatastream-extension">12. SensorThings MultiDatastream extension</a></li>
<li><a href="#data-array-extension">13. SensorThings Data Array Extension</a>
<ul class="sectlevel2">
<li><a href="#retrieve-observation-dataarray">13.1. Retrieve a Datastream’s Observation entities in dataArray</a>
<ul class="sectlevel3">
<li><a href="#_request_4">13.1.1. Request</a></li>
<li><a href="#_response_3">13.1.2. Response</a></li>
</ul>
</li>
<li><a href="#create-observation-dataarray">13.2. Create Observation entities with dataArray</a>
<ul class="sectlevel3">
<li><a href="#_request_5">13.2.1. Request</a></li>
<li><a href="#_response_4">13.2.2. Response</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#mqtt-extension">14. SensorThings Sensing MQTT Extension</a>
<ul class="sectlevel2">
<li><a href="#create-mqtt-publish">14.1. Create a SensorThings Observation with MQTT Publish</a>
<ul class="sectlevel3">
<li><a href="#mqtt-link-existing-entities-creating">14.1.1. Link to existing entities when creating an Observation entity</a></li>
<li><a href="#mqtt-deep-insert">14.1.2. Create related entities when creating an Observation entity (deep insert)</a></li>
</ul>
</li>
<li><a href="#receive-mqtt-subscribe">14.2. Receive updates with MQTT Subscribe</a>
<ul class="sectlevel3">
<li><a href="#mqtt-subscribe-entity-set">14.2.1. Receive updates of a SensorThings entity set with MQTT Subscribe</a></li>
<li><a href="#mqtt-entity-updates">14.2.2. Receive updates of a SensorThings entity with MQTT Subscribe</a></li>
<li><a href="#mqtt-subscribe-entity-property">14.2.3. Receive updates of a SensorThings entity’s property with MQTT Subscribe</a></li>
<li><a href="#mqtt-subscribe-select">14.2.4. Receive updates of the selected properties of the newly created entities or updated entities of a SensorThings entity set with MQTT Subscribe</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_conformance_class_abstract_test_suite_normative">Annex A: Conformance Class Abstract Test Suite (Normative)</a>
<ul class="sectlevel2">
<li><a href="#_sensorthings_read_core_tests">A.1. SensorThings Read (Core) Tests</a></li>
<li><a href="#_sensorthings_api_filtering_extension_tests">A.2. SensorThings API Filtering Extension Tests</a></li>
<li><a href="#_sensorthings_api_create_update_delete_extension_tests">A.3. SensorThings API Create-Update-Delete Extension Tests</a></li>
<li><a href="#_sensorthings_api_batch_request_extension_tests">A.4. SensorThings API Batch Request Extension Tests</a></li>
<li><a href="#_sensorthings_api_multipledatastream_tests">A.5. SensorThings API MultipleDatastream Tests</a></li>
<li><a href="#_sensorthings_api_data_array_extension">A.6. SensorThings API Data Array Extension</a></li>
<li><a href="#_sensorthings_api_observation_creation_via_mqtt_extension_tests">A.7. SensorThings API Observation Creation via MQTT Extension Tests</a></li>
<li><a href="#_sensorthings_api_receiving_updates_via_mqtt_extension_tests">A.8. SensorThings API Receiving Updates via MQTT Extension Tests</a></li>
</ul>
</li>
<li><a href="#_revision_history">Annex B: Revision history</a></li>
<li><a href="#bibliography">Annex C: Bibliography</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_table_of_figures"><a class="anchor" href="#_table_of_figures"></a>Table of Figures</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#fig-IotRefModel">Figure 1</a> - IoT Reference Model (adapted from [ITU-T Y.2060])</p>
</li>
<li>
<p><a href="#fig-sensing-entities">Figure 2</a> - Sensing Entities</p>
</li>
<li>
<p><a href="#fig-sensing-entities-multi">Figure 3</a> - MultiDatastream Extension Entities</p>
</li>
<li>
<p><a href="#fig-mqtt-create">Figure 4</a> - Creating Observations using MQTT publish, and receive notifications for Observations with MQTT</p>
</li>
<li>
<p><a href="#fig-mqtt-update">Figure 5</a> - Sequence diagram for receiving updates using MQTT subscribe</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_table_of_tables"><a class="anchor" href="#_table_of_tables"></a>Table of Tables</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#tab-sensing-entities">Table 1</a> - SensorThings API Sensing entities and equivalent concepts in O&amp;M 2.0</p>
</li>
<li>
<p><a href="#tab-common-control-information">Table 2</a> - Common control information</p>
</li>
<li>
<p><a href="#tab-properties-thing">Table 3</a> - Properties of a Thing entity</p>
</li>
<li>
<p><a href="#tab-relations-thing">Table 4</a> - Direct relation between a Thing entity and other entity types</p>
</li>
<li>
<p><a href="#tab-properties-location">Table 5</a> - Properties of a Location entity</p>
</li>
<li>
<p><a href="#tab-relation-location">Table 6</a> - Direct relation between a Location entity and other entity types</p>
</li>
<li>
<p><a href="#tab-encodingtype-codes">Table 7</a> - List of some code values used for identifying types for the encodingType of the Location and FeatureOfInterest entity</p>
</li>
<li>
<p><a href="#tab-properties-historicallocation">Table 8</a> - Properties of a HistoricalLocation entity</p>
</li>
<li>
<p><a href="#tab-relation-historicallocation">Table 9</a> - Direct relation between an HistoricalLocation entity and other entity types</p>
</li>
<li>
<p><a href="#tab-properties-datastream">Table 10</a> - Properties of a Datastream entity</p>
</li>
<li>
<p><a href="#tab-relation-datastream">Table 11</a> - Direct relation between a Datastream entity and other entity types</p>
</li>
<li>
<p><a href="#tab-value-codes-obstypes">Table 12</a> - List of some code values used for identifying types defined in the O&amp;M conceptual model (OGC 10-004r3 and ISO 19156:2011 Clause 8.2.2)</p>
</li>
<li>
<p><a href="#tab-properties-sensor">Table 13</a> - Properties of a Sensor entity</p>
</li>
<li>
<p><a href="#tab-relation-sensor">Table 14</a> - Direct relation between a Sensor entity and other entity types</p>
</li>
<li>
<p><a href="#tab-encodingtypes-sensor">Table 15</a> - List of some code values used for identifying types for the encodingType of the Sensor entity</p>
</li>
<li>
<p><a href="#tab-properties-observedproperty">Table 16</a> - Properties of an ObservedProperty entity</p>
</li>
<li>
<p><a href="#tab-relation-observedproperty">Table 17</a> - Direct relation between an ObservedProperty entity and other entity types</p>
</li>
<li>
<p><a href="#tab-properties-observation">Table 18</a> - Properties of an Observation entity</p>
</li>
<li>
<p><a href="#tab-relations-observation">Table 19</a> - Direct relation between an Observation entity and other entity types</p>
</li>
<li>
<p><a href="#tab-properties-featureofinterest">Table 20</a> - Properties of a FeatureOfInterest entity</p>
</li>
<li>
<p><a href="#tab-relation-featureofinterest">Table 21</a> - Direct relation between a FeatureOfInterest entity and other entity types</p>
</li>
<li>
<p><a href="#tab-built-in-filter-operators">Table 22</a> - Built-in Filter Operators</p>
</li>
<li>
<p><a href="#tab-built-in-query-functions">Table 23</a> - Built-in Query Functions</p>
</li>
<li>
<p><a href="#tab-integrity-creating-entity">Table 24</a> - Integrity constraints when creating an entity</p>
</li>
<li>
<p><a href="#tab-integrity-deleting">Table 25</a> - Integrity constraints when deleting an entity</p>
</li>
<li>
<p><a href="#tab-properties-multidatastream">Table 26</a> - Properties of a MultiDatastream entity</p>
</li>
<li>
<p><a href="#tab-relation-multidatastream">Table 27</a> - Direct relation between a MultiDatastream entity and other entity types</p>
</li>
<li>
<p><a href="#tab-relation-multidatastream-observation">Table 28</a> - Direct relation between an MultiDatastream’s Observation entity and other entity types</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_table_of_requirements"><a class="anchor" href="#_table_of_requirements"></a>Table of Requirements</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Requirement <a href="#req-entity-control-information-common-control-information">1</a> - <a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</li>
<li>
<p>Requirement <a href="#req-thing-properties">2</a> - <a href="#requirement-thing-properties">datamodel/thing/properties</a></p>
</li>
<li>
<p>Requirement <a href="#req-thing-relations">3</a> - <a href="#requirement-thing-relations">datamodel/thing/relations</a></p>
</li>
<li>
<p>Requirement <a href="#req-location-properties">4</a> - <a href="#requirement-location-properties">datamodel/location/properties</a></p>
</li>
<li>
<p>Requirement <a href="#req-location-relations">5</a> - <a href="#requirement-location-relations">datamodel/location/relations</a></p>
</li>
<li>
<p>Requirement <a href="#req-historical-location-properties">6</a> - <a href="#requirement-historical-location-properties">datamodel/historical-location/properties</a></p>
</li>
<li>
<p>Requirement <a href="#req-historical-location-relations">7</a> - <a href="#requirement-historical-location-relations">datamodel/historical-location/relations</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-update-delete-historical-location-auto-creation">8</a> - <a href="#requirement-create-update-delete-historical-location-auto-creation">create-update-delete/historical-location-auto-creation</a></p>
</li>
<li>
<p>Requirement <a href="#req-datastream-properties">9</a> - <a href="#requirement-datastream-properties">datamodel/datastream/properties</a></p>
</li>
<li>
<p>Requirement <a href="#req-datastream-relations">10</a> - <a href="#requirement-datastream-relations">datamodel/datastream/relations</a></p>
</li>
<li>
<p>Requirement <a href="#req-sensor-properties">11</a> - <a href="#requirement-sensor-properties">datamodel/sensor/properties</a></p>
</li>
<li>
<p>Requirement <a href="#req-sensor-relations">12</a> - <a href="#requirement-sensor-relations">datamodel/sensor/relations</a></p>
</li>
<li>
<p>Requirement <a href="#req-observed-property-properties">13</a> - <a href="#requirement-observed-property-properties">datamodel/observed-property/properties</a></p>
</li>
<li>
<p>Requirement <a href="#req-observed-property-relations">14</a> - <a href="#requirement-observed-property-relations">datamodel/observed-property/relations</a></p>
</li>
<li>
<p>Requirement <a href="#req-observation-properties">15</a> - <a href="#requirement-observation-properties">datamodel/observation/properties</a></p>
</li>
<li>
<p>Requirement <a href="#req-observation-relations">16</a> - <a href="#requirement-observation-relations">datamodel/observation/relations</a></p>
</li>
<li>
<p>Requirement <a href="#req-feature-of-interest-properties">17</a> - <a href="#requirement-feature-of-interest-properties">datamodel/feature-of-interest/properties</a></p>
</li>
<li>
<p>Requirement <a href="#req-feature-of-interest-relations">18</a> - <a href="#requirement-feature-of-interest-relations">datamodel/feature-of-interest/relations</a></p>
</li>
<li>
<p>Requirement <a href="#req-resource-path-resource-path-to-entities">19</a> - <a href="#requirement-resource-path-resource-path-to-entities">resource-path/resource-path-to-entities</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-status-code">20</a> - <a href="#requirement-request-data-status-code">request-data/status-code</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-query-status-code">21</a> - <a href="#requirement-request-data-query-status-code">request-data/query-status-code</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-order">22</a> - <a href="#requirement-request-data-order">request-data/order</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-expand">23</a> - <a href="#requirement-request-data-expand">request-data/expand</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-select">24</a> - <a href="#requirement-request-data-select">request-data/select</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-orderby">25</a> - <a href="#requirement-request-data-orderby">request-data/orderby</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-top">26</a> - <a href="#requirement-request-data-top">request-data/top</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-skip">27</a> - <a href="#requirement-request-data-skip">request-data/skip</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-count">28</a> - <a href="#requirement-request-data-count">request-data/count</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-filter">29</a> - <a href="#requirement-request-data-filter">request-data/filter</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-built-in-filter-operations">30</a> - <a href="#requirement-request-data-built-in-filter-operations">request-data/built-in-filter-operations</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-built-in-query-functions">31</a> - <a href="#requirement-request-data-built-in-query-functions">request-data/built-in-query-functions</a></p>
</li>
<li>
<p>Requirement <a href="#req-request-data-pagination">32</a> - <a href="#requirement-request-data-pagination">request-data/pagination</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-update-delete-create-entity">33</a> - <a href="#requirement-create-update-delete-create-entity">create-update-delete/create-entity</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-update-delete-link-to-existing-entities">34</a> - <a href="#requirement-create-update-delete-link-to-existing-entities">create-update-delete/link-to-existing-entities</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-update-delete-deep-insert">35</a> - <a href="#requirement-create-update-delete-deep-insert">create-update-delete/deep-insert</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-update-delete-deep-insert-status-code">36</a> - <a href="#requirement-create-update-delete-deep-insert-status-code">create-update-delete/deep-insert-status-code</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-update-delete-update-entity">37</a> - <a href="#requirement-create-update-delete-update-entity">create-update-delete/update-entity</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-update-delete-delete-entity">38</a> - <a href="#requirement-create-update-delete-delete-entity">create-update-delete/delete-entity</a></p>
</li>
<li>
<p>Requirement <a href="#req-batch-request-batch-request">39</a> - <a href="#requirement-batch-request-batch-request">batch-request/batch-request</a></p>
</li>
<li>
<p>Requirement <a href="#req-multi-datastream-properties">40</a> - <a href="#requirement-multi-datastream-properties">multi-datastream/properties</a></p>
</li>
<li>
<p>Requirement <a href="#req-multi-datastream-relations">41</a> - <a href="#requirement-multi-datastream-relations">multi-datastream/relations</a></p>
</li>
<li>
<p>Requirement <a href="#req-multi-datastream-constraints">42</a> - <a href="#requirement-multi-datastream-constraints">multi-datastream/constraints</a></p>
</li>
<li>
<p>Requirement <a href="#req-data-array-data-array">43</a> - <a href="#requirement-data-array-data-array">data-array/data-array</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-observations-via-mqtt-observations-creation">44</a> - <a href="#requirement-create-observations-via-mqtt-observations-creation">create-observations-via-mqtt/observations-creation</a></p>
</li>
<li>
<p>Requirement <a href="#req-receive-updates-via-mqtt-receive-updates">45</a> - <a href="#requirement-receive-updates-via-mqtt-receive-updates">receive-updates-via-mqtt/receive-updates</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-update-delete-historical-location-manual-creation">46</a> - <a href="#requirement-create-update-delete-historical-location-manual-creation">create-update-delete/historical-location-manual-creation</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-update-delete-update-entity-put">47</a> - <a href="#requirement-create-update-delete-update-entity-put">create-update-delete/update-entity-put</a></p>
</li>
<li>
<p>Requirement <a href="#req-create-update-delete-update-entity-jsonpatch">48</a> - <a href="#requirement-create-update-delete-update-entity-jsonpatch">create-update-delete/update-entity-jsonpatch</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="abstract"><a class="anchor" href="#abstract"></a>Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The OGC SensorThings API provides an open, geospatial-enabled and unified way to interconnect the internet of things (iot) devices, data, and applications over the web. At a high level the OGC SensorThings API provides two main functionalities and each function is handled by a part. The two parts are the sensing part and the tasking part. The sensing part provides a standard way to manage and retrieve observations and metadata from heterogeneous iot sensor systems. This document is version 1.1 and it is extending the first version of Sensing part.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="keywords"><a class="anchor" href="#keywords"></a>Keywords</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following are keywords to be used by search engines and document catalogues.</p>
</div>
<div class="paragraph">
<p>ogcdoc, ogc document, iot, internet of things, sensor things, sensors, swe, sensor webs, sensor web enablement, sensor networks</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preface"><a class="anchor" href="#preface"></a>Preface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The OGC SensorThings API provides an open, geospatial-enabled and unified way to interconnect the internet of things devices, data, and applications over the web. The OGC SensorThings API is an open standard, and that means it is non-proprietary, platform-independent, and perpetual royalty-free. Although it is a new standard, it builds on a rich set of proven-working and widely-adopted open standards, such as the web protocols and the ogc sensor web enablement (swe) standards, including the iso/ogc observation and measurement data model [ogc 10-004r3 and iso 19156:2011]. That also means the OGC SensorThings API is extensible and can be applied to not only simple but also complex use cases.</p>
</div>
<div class="paragraph">
<p>At a high level the OGC SensorThings API provides two main functionalities and each function is handled by a part. The two parts are the part i - sensing and the part ii - tasking. The sensing part provides a standard way to manage and retrieve observations and metadata from heterogeneous iot sensor systems. The tasking part provides a standard way for parameterizing - also called tasking - of task-able iot devices, such as sensors or actuators. The tasking part is planned as a future work activity and will be defined in a separate document as the part ii of the sensorthings api.</p>
</div>
<div class="paragraph">
<p>The sensing part provides functions similar to the ogc sensor observation service (sos) and the tasking part will provide functions similar to the ogc sensor planning service (sps). The main difference between the sensorthings api and the ogc sos and sps is that the sensorthings api is designed specifically for the resource-constrained iot devices and the web developer community. As a result, the sensorthings api follows the rest principles, the use of an efficient json encoding, the use of mqtt protocol, the use of the flexible oasis odata protocol and url conventions.</p>
</div>
<div class="paragraph">
<p>Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights. The open geospatial consortium shall not be held responsible for identifying any or all such patent rights.</p>
</div>
<div class="paragraph">
<p><em>recipients of this document are requested to submit, with their comments, notification of any relevant patent claims or other intellectual property rights of which they may be aware that might be infringed by any implementation of the standard set forth in this document, and to provide supporting documentation.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changes_v_11"><a class="anchor" href="#changes_v_11"></a>Changes in version 1.1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 1.1 of the SensorThings API is an update to version 1.0 that is (mostly) backwards compatible with version 1.0.
Besides the many small clarifications, the main changes are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All entities (except for HistoricalLocation) now have a field of the type JSON Object.
In version 1.0 such a field already existed for the Thing entity (named <code>properties</code>), and for the Observation entity (named <code>parameters</code>).
These fields proved to be extremely useful for storing additional structured meta data used in many domains, that could also be used in filters.
Now, all entities except for HistoricalLocation have such a very useful property, whereby in the Observation entity it retains the name <code>parameters</code>.</p>
</li>
<li>
<p>The service root page now shows the requirements that the server implements and allows extensions to expose additional settings.
This allows users to easily see exactly which extensions and optional features a server implements.
The MQTT extension can now list the MQTT endpoints on the root page, so that a user can discover those endpoints.</p>
</li>
<li>
<p>MQTT topics now must start with the version number of the specification.
There were differences between server implementations, with some requiring the version number prefix and others not.
This change will fix those incompatibilities from this version on.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first two changes add extra fields to the JSON returned by the server and should not influence clients made for version 1.0, as most client will ignore any fields they do not know.
The second change may cause some minor issues for some clients that are not using the version prefix in MQTT topics, but those clients would already have issues connecting to any server that does use the version prefix in MQTT topics.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="submittingorganizations"><a class="anchor" href="#submittingorganizations"></a>Submitting organizations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following organizations submitted this document to the open geospatial consortium (ogc):</p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>University of Calgary, Canada</p>
</li>
<li>
<p>National Central University, Taiwan</p>
</li>
<li>
<p>Lockheed Martin, USA</p>
</li>
<li>
<p>AIST, Japan</p>
</li>
<li>
<p>FCU.GIS, Taiwan</p>
</li>
<li>
<p>ITRI, Taiwan</p>
</li>
<li>
<p>GeoConnections, Canada</p>
</li>
<li>
<p>Noblis, USA</p>
</li>
<li>
<p>Fraunhofer, Germany</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="submitters"><a class="anchor" href="#submitters"></a>Submitters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All questions regarding this submission should be directed to the editors or the submitters:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">representing</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">ogc member</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Steve Liang</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">University of Calgary, Canada / SensorUp Inc.</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Tania Khalafbeigi</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">University of Calgary, Canada / SensorUp Inc.</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Fraunhofer, Germany</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Kyoungsook Kim</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">AIST, Japan</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Thomas Schwab</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Lockheed Martin</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Jean Brodeur</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">NRCan/Canadian Geospatial Data Infrastructure</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Marcus Alzona</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Noblis</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="scope"><a class="anchor" href="#scope"></a>1. Scope</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The OGC SensorThings API provides an open standard-based and geospatial-enabled framework to interconnect the internet of things devices, data, and applications over the web.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conformance"><a class="anchor" href="#conformance"></a>2. Conformance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Conformance with this standard shall be checked using all the relevant tests specified in annex a (normative)
of this document. The framework, concepts, and methodology for testing, and the criteria to be achieved
to claim conformance are specified in the ogc compliance testing policies and procedures and the ogc
compliance testing web site<a href="#footnote1">1</a>.</p>
</div>
<div class="paragraph">
<p>All requirements-classes and conformance-classes described in this document are owned by the standard(s) identified.</p>
</div>
<div class="paragraph">
<p>The following table list the requirements classes defined by this standard.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The text in the <em>Requirements class id</em> and <em>Requirements</em> columns in the following table is the path fragment that, when appended to the URI: http://www.opengis.net/spec/iot_sensing/1.1/, provides the URI that can be used to unambiguously identify the requirement and the conformance class.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Requirements class id</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Requirements</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/datamodel/thing</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-thing-properties">datamodel/thing/properties</a></p>
</li>
<li>
<p>req/<a href="#requirement-thing-relations">datamodel/thing/relations</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Thing entity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/datamodel/location</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-location-properties">datamodel/location/properties</a></p>
</li>
<li>
<p>req/<a href="#requirement-location-relations">datamodel/location/relations</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Location entity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/datamodel/historical-location</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-historical-location-properties">datamodel/historical-location/properties</a></p>
</li>
<li>
<p>req/<a href="#requirement-historical-location-relations">datamodel/historical-location/relations</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">HistoricalLocation entity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/datamodel/datastream</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-datastream-properties">datamodel/datastream/properties</a></p>
</li>
<li>
<p>req/<a href="#requirement-datastream-relations">datamodel/datastream/relations</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Datastream entity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/datamodel/sensor</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-sensor-properties">datamodel/sensor/properties</a></p>
</li>
<li>
<p>req/<a href="#requirement-sensor-relations">datamodel/sensor/relations</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Sensor Entity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/datamodel/observed-property</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-observed-property-properties">datamodel/observed-property/properties</a></p>
</li>
<li>
<p>req/<a href="#requirement-observed-property-relations">datamodel/observed-property/relations</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">ObservedProperty entity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/datamodel/observation</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-observation-properties">datamodel/observation/properties</a></p>
</li>
<li>
<p>req/<a href="#requirement-observation-relations">datamodel/observation/relations</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Observation entity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/datamodel/feature-of-interest</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-feature-of-interest-properties">datamodel/feature-of-interest/properties</a></p>
</li>
<li>
<p>req/<a href="#requirement-feature-of-interest-relations">datamodel/feature-of-interest/relations</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">FeatureOfInterest entity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/datamodel/entity-control-information</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Entities’ common control information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/resource-path</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-resource-path-resource-path-to-entities">resource-path/resource-path-to-entities</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Addressing to the entities of the SensorThings API service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/request-data</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-request-data-order">request-data/order</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-expand">request-data/expand</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-select">request-data/select</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-status-code">request-data/status-code</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-query-status-code">request-data/query-status-code</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-orderby">request-data/orderby</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-top">request-data/top</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-skip">request-data/skip</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-count">request-data/count</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-filter">request-data/filter</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-built-in-filter-operations">request-data/built-in-filter-operations</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-built-in-query-functions">request-data/built-in-query-functions</a></p>
</li>
<li>
<p>req/<a href="#requirement-request-data-pagination">request-data/pagination</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requesting data with system query options</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/create-update-delete</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-create-update-delete-create-entity">create-update-delete/create-entity</a></p>
</li>
<li>
<p>req/<a href="#requirement-create-update-delete-link-to-existing-entities">create-update-delete/link-to-existing-entities</a></p>
</li>
<li>
<p>req/<a href="#requirement-create-update-delete-deep-insert">create-update-delete/deep-insert</a></p>
</li>
<li>
<p>req/<a href="#requirement-create-update-delete-deep-insert-status-code">create-update-delete/deep-insert-status-code</a></p>
</li>
<li>
<p>req/<a href="#requirement-create-update-delete-update-entity">create-update-delete/update-entity</a></p>
</li>
<li>
<p>req/<a href="#requirement-create-update-delete-delete-entity">create-update-delete/delete-entity</a></p>
</li>
<li>
<p>req/<a href="#requirement-create-update-delete-historical-location-auto-creation">create-update-delete/historical-location-auto-creation</a></p>
</li>
<li>
<p>req/<a href="#requirement-create-update-delete-update-entity-put">create-update-delete/update-entity-put</a></p>
</li>
<li>
<p>req/<a href="#requirement-create-update-delete-update-entity-jsonpatch">create-update-delete/update-entity-jsonpatch</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Creating, updating, and deleting entities</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/batch-request</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-batch-request-batch-request">batch-request/batch-request</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Processing multiple requests with a single request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/multi-datastream</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-multi-datastream-properties">multi-datastream/properties</a></p>
</li>
<li>
<p>req/<a href="#requirement-multi-datastream-relations">multi-datastream/relations</a></p>
</li>
<li>
<p>req/<a href="#requirement-multi-datastream-constraints">multi-datastream/constraints</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Handling complex observations with complex results, especially when the result is an array.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/data-array</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-data-array-data-array">data-array/data-array</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Serving Observations with the efficient data array encoding</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/create-observations-via-mqtt</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-create-observations-via-mqtt-observations-creation">create-observations-via-mqtt/observations-creation</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">creating observations through MQTT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">req/receive-updates-via-mqtt</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="ulist">
<ul>
<li>
<p>req/<a href="#requirement-receive-updates-via-mqtt-receive-updates">receive-updates-via-mqtt/receive-updates</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Receiving updates through MQTT</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>3. References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following normative documents contain provisions that, through reference in this text, constitute provisions of this document. For dated references, subsequent amendments to, or revisions of, any of these publications do not apply. For undated references, the latest edition of the normative document referred to applies.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ISO 8601:2004 Data elements and interchange formats – Information interchange - Representation of dates and times.</p>
</li>
<li>
<p>OGC 10-004r3 and ISO 19156:2011(E), OGC Abstract Specification Topic 20: Geographic information — Observations and Measurements</p>
</li>
<li>
<p>OASIS OData Version 4.0 Part 1: Protocol Plus Errata 02</p>
</li>
<li>
<p>OASIS OData Version 4.0 Part 2: URL Conventions Plus Errata 02</p>
</li>
<li>
<p>OASIS OData JSON Format Version 4.0 Plus Errata 02</p>
</li>
<li>
<p>OASIS OData ABNF Construction Rules Errata 02</p>
</li>
<li>
<p>RFC 2046, Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</p>
</li>
<li>
<p>RFC 2616, Hypertext Transfer Protocol&#8201;&#8212;&#8201;HTTP/1.1</p>
</li>
<li>
<p>RFC 4627, the application/json Media Type for Javascript Object Notation (JSON), July 2006</p>
</li>
<li>
<p>Unified Code for Units of Measure (UCUM) – Version 1.9, April 2015</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="terms-definitions"><a class="anchor" href="#terms-definitions"></a>4. Terms and Definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document uses the terms defined in Sub-clause 5.3 of [OGC 06-121r8], which is based on the ISO/IEC Directives, Part 2, Rules for the structure and drafting of International Standards. In particular, the word “shall” (not “must”) is the verb form used to indicate a requirement to be strictly followed to conform to this standard.</p>
</div>
<div class="paragraph">
<p>For the purposes of this document, the following additional terms and definitions apply.</p>
</div>
<div class="sect2">
<h3 id="_collection"><a class="anchor" href="#_collection"></a>4.1. Collection</h3>
<div class="paragraph">
<p>Sets of Resources, which can be retrieved in whole or in part. [<a href="http://tools.ietf.org/html/rfc5023#section-1">RFC5023</a>]</p>
</div>
</div>
<div class="sect2">
<h3 id="_entity"><a class="anchor" href="#_entity"></a>4.2. Entity</h3>
<div class="paragraph">
<p>Entities are instances of entity types. [OASIS OData Version 4.0 Part 1: Protocol Plus Errata 02]</p>
</div>
<div class="paragraph">
<p><em>Note: Thing, Sensor, Datastream, Observation are some example entity types of the OGC SensorThings API.</em></p>
</div>
</div>
<div class="sect2">
<h3 id="_entity_sets"><a class="anchor" href="#_entity_sets"></a>4.3. Entity sets</h3>
<div class="paragraph">
<p>Entity sets are named collections of entities (e.g. Sensors is an entity set containing Sensor entities). An entity’s key uniquely identifies the entity within an entity set. Entity sets provide entry points into an OGC SensorThings API service. [OASIS OData Version 4.0 Part 1: Protocol Plus Errata 02]</p>
</div>
</div>
<div class="sect2">
<h3 id="_internet_of_thing"><a class="anchor" href="#_internet_of_thing"></a>4.4. (Internet of) Thing</h3>
<div class="paragraph">
<p>A thing is an object of the physical world (physical things) or the information world (virtual things) that is capable of being identified and integrated into communication networks. [ITU-T Y.2060]</p>
</div>
</div>
<div class="sect2">
<h3 id="_measurement"><a class="anchor" href="#_measurement"></a>4.5. Measurement</h3>
<div class="paragraph">
<p>A set of operations having the object of determining the value of a quantity [OGC 10-004r3 / ISO 19156:2011]</p>
</div>
</div>
<div class="sect2">
<h3 id="_observation"><a class="anchor" href="#_observation"></a>4.6. Observation</h3>
<div class="paragraph">
<p>Act of measuring or otherwise determining the value of a property [OGC 10-004r3 /  ISO 19156:2011]</p>
</div>
</div>
<div class="sect2">
<h3 id="_observation_result"><a class="anchor" href="#_observation_result"></a>4.7. Observation Result</h3>
<div class="paragraph">
<p>Estimate of the value of a property determined through a known observation procedure [OGC 10-004r3 / ISO 19156:2011]</p>
</div>
</div>
<div class="sect2">
<h3 id="_resource"><a class="anchor" href="#_resource"></a>4.8. Resource</h3>
<div class="paragraph">
<p>A network-accessible data object or service identified by an URI, as defined in [RFC 2616]</p>
</div>
</div>
<div class="sect2">
<h3 id="_rest"><a class="anchor" href="#_rest"></a>4.9. REST</h3>
<div class="paragraph">
<p>The Representational State Transfer (REST) style is an abstraction of the architectural elements within a distributed hypermedia system. REST focuses on the roles of components, the constraints upon their interaction with other components, and their interpretation of significant data elements. It encompasses the fundamental constraints upon components, connectors, and data that define the basis of the Web architecture, and thus the essence of its behavior as a network-based application. An API that conforms to the REST architectural principles/constraints is called a RESTful API.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sensor"><a class="anchor" href="#_sensor"></a>4.10. Sensor</h3>
<div class="paragraph">
<p>An entity capable of observing a phenomenon and returning an observed value. Type of observation procedure that provides the estimated value of an observed property at its output. [OGC 12-000]</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conventions"><a class="anchor" href="#conventions"></a>5. Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This sections provides details and examples for any conventions used in the document. Examples of conventions are symbols, abbreviations, use of XML schema, or special notes regarding how to read the document.</p>
</div>
<div class="sect2">
<h3 id="presentation-requirements-recommendations"><a class="anchor" href="#presentation-requirements-recommendations"></a>5.1. Presentation of Requirements and Recommendations</h3>
<div class="paragraph">
<p>Requirements are presented using the following style:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Req [number]</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>&lt;requirement text&gt;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><span class="blue">&lt;requirement id&gt;</span></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>&lt;number&gt; is a unique number within the document.</p>
</div>
<div class="paragraph">
<p>&lt;requirement text&gt; is the requirement itself. Normative verbs like SHALL are written in capitals.</p>
</div>
<div class="paragraph">
<p>The text at the bottom of the box &lt;requirement id&gt; is the path and it provides the URI of the requirement which can be used to unambiguously identify the requirement.</p>
</div>
</div>
<div class="sect2">
<h3 id="identifiers"><a class="anchor" href="#identifiers"></a>5.2. Identifiers</h3>
<div class="paragraph">
<p>The normative provisions in this specification are denoted by the URI</p>
</div>
<div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/</a></p>
</div>
<div class="paragraph">
<p>All requirements and conformance tests that appear in this document are denoted by partial URIs which are relative to this base.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="symbols"><a class="anchor" href="#symbols"></a>6. Symbols (and abbreviated terms)</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">API</dt>
<dd>
<p>Application Programming Interface</p>
</dd>
<dt class="hdlist1">CS-W</dt>
<dd>
<p>Catalog Service Web
CRUD::Create, Read, Update, and Delete</p>
</dd>
<dt class="hdlist1">GML</dt>
<dd>
<p>Geography Markup Language</p>
</dd>
<dt class="hdlist1">HTML</dt>
<dd>
<p>HyperText Markup Language</p>
</dd>
<dt class="hdlist1">HTTP</dt>
<dd>
<p>Hypertext Transfer Protocol</p>
</dd>
<dt class="hdlist1">IoT</dt>
<dd>
<p>Internet of Things</p>
</dd>
<dt class="hdlist1">ISO</dt>
<dd>
<p>International Organization for Standardization</p>
</dd>
<dt class="hdlist1">JSON</dt>
<dd>
<p>JavaScript Object Notation</p>
</dd>
<dt class="hdlist1">OData</dt>
<dd>
<p>the Open Data Protocol</p>
</dd>
<dt class="hdlist1">OGC</dt>
<dd>
<p>Open Geospatial Consortium</p>
</dd>
<dt class="hdlist1">OWS</dt>
<dd>
<p>OGC Web Services</p>
</dd>
<dt class="hdlist1">O&amp;M</dt>
<dd>
<p>Observations and Measurements</p>
</dd>
<dt class="hdlist1">REST</dt>
<dd>
<p>REpresentational State Transfer</p>
</dd>
<dt class="hdlist1">SensorML</dt>
<dd>
<p>Sensor Model Language</p>
</dd>
<dt class="hdlist1">SOS</dt>
<dd>
<p>Sensor Observation Service</p>
</dd>
<dt class="hdlist1">SPS</dt>
<dd>
<p>Sensor Planning Service</p>
</dd>
<dt class="hdlist1">SWE</dt>
<dd>
<p>Sensor Web Enablement</p>
</dd>
<dt class="hdlist1">UCUM</dt>
<dd>
<p>Unified Code for Units of Measure</p>
</dd>
<dt class="hdlist1">UML</dt>
<dd>
<p>Unified Modeling Language</p>
</dd>
<dt class="hdlist1">WoT</dt>
<dd>
<p>Web of Things</p>
</dd>
<dt class="hdlist1">XML</dt>
<dd>
<p>eXtensible Markup Language</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview1"><a class="anchor" href="#overview1"></a>7. SensorThings API overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="who-should-use"><a class="anchor" href="#who-should-use"></a>7.1. Who should use the OGC SensorThings API</h3>
<div class="paragraph">
<p>Organizations that need web-based platforms to manage, store, share, analyze IoT-based sensor observation data should use the OGC SensorThings API. The OGC SensorThings API simplifies and accelerates the development of IoT applications. Application developers can use this open standard to connect to various IoT devices and create innovative applications without worrying the daunting heterogeneous protocols of the different IoT devices, gateways and services. IoT device manufacturers can also use OGC SensorThings API as the API can be embedded within various IoT hardware and software platforms, so that the various IoT devices can effortlessly connect with the OGC standard-compliant servers around the world. In summary, the OGC SensorThings API is transforming the numerous disjointed IoT systems into a fully connected platform where complex tasks can be synchronized and performed.</p>
</div>
</div>
<div class="sect2">
<h3 id="benefits"><a class="anchor" href="#benefits"></a>7.2. Benefits of the OGC SensorThings API</h3>
<div class="paragraph">
<p>In today’s world, most IoT devices (e.g., sensors and actuators) have proprietary software interfaces defined by their manufacturers and used selectively. New APIs are often required and developed on an as-needed basis, often in an environment with resource limitations and associated risks. This situation requires significant investment on the part of developers for each new sensor or project involving multiple systems and on the part of the providers of sensors, gateways and portals or services where observations and measurements are required.</p>
</div>
<div class="paragraph">
<p>As a standardized data model and interface for sensors in the WoT and IoT<a href="#footnote2">2</a>, the OGC SensorThings API offers the following benefits: (1) it permits the proliferation of new high value services with lower overhead of development and wider reach, (2) it lowers the risks, time and cost across a full IoT product cycle, and (3) it simplifies the connections between devices-to-devices and devices-to-applications.</p>
</div>
</div>
<div class="sect2">
<h3 id="overview2"><a class="anchor" href="#overview2"></a>7.3. SensorThings API Overview</h3>
<div class="paragraph">
<p>The OGC SensorThings API data model consists of two parts: (1) the Sensing part and (2) the Tasking part. The Sensing part allows IoT devices and applications to CREATE, READ, UPDATE, and DELETE (<em>i.e.</em>, HTTP POST, GET, PATCH, and DELETE) IoT data and metadata in a SensorThings service.</p>
</div>
<div class="paragraph">
<p>The Sensing part is designed based on the ISO/OGC Observation and Measurement (O&amp;M) model [OGC 10-004r3 and ISO 19156:2011]. The key to the model is that an Observation is modeled as an act that produces a result whose value is an estimate of a property of the observation target or FeatureOfInterest. An Observation instance is classified by its event time (e.g., resultTime and phenonmenonTime), FeatureOfInterest, ObservedProperty, and the procedure used (often a Sensor). Moreover, Things are also modeled in the SensorThings API, and its definition follows the ITU-T definition: “<em>an object of the physical world (physical things) or the information world (virtual things) that is capable of being identified and integrated into communication networks</em>” [ITU-T Y.2060].</p>
</div>
<div class="paragraph">
<p>The geographical Locations of Things are useful in almost every application and as a result are included as well. For the Things whose location changed, the HistoricalLocations entities offer the history of the Thing’s locations. A Thing also can have multiple Datastreams. A Datastream is a collection of Observations grouped by the same ObservedProperty and Sensor. An Observation is an event performed by a Sensor that produces a result whose value is an estimate of an ObservedProperty of the FeatureOfInterest. Details of each above described entity are provided in <a href="#sensing-entities1">Chapter 8</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="observations-measurements"><a class="anchor" href="#observations-measurements"></a>7.4. SensorThings API and ISO/OGC Observations and Measurements</h3>
<div class="paragraph">
<p>Managing and retrieving observations and metadata from IoT sensor systems is one of the most common use cases. As a result, SensorThings API’s sensing part is designed based on the ISO/OGC Observation and Measurement (O&amp;M) model [OGC 10-004r3 and ISO 19156:2011]. O&amp;M defines models for the exchange of information describing observation acts, their results as well as the feature involved in sampling when making observations.</p>
</div>
<div class="paragraph">
<p>SensorThings API defines eight entities for the IoT sensing applications. <a href="#sensingentities">base</a> lists each component and its relationship with O&amp;M. Low-cost and simple sensors are key enablers for the vision of IoT. As a result, SensorThings API uses the term of Sensor to describe the procedure that is used in making an Observation, instead of using O&amp;M’s term of procedure.</p>
</div>
<table id="tab-sensing-entities" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. SensorThings API Sensing entities and equivalent concepts in O&amp;M 2.0</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">SensorThings API Entities</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">O&amp;M 2.0 Concepts</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Thing (and Locations, HistoricalLocations)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Datastream</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Sensor</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Procedure</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Observation</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Observation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">ObservedProperty</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Observed Property</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">FeatureOfInterest</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Feature-Of-Interest</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="oasis-odata"><a class="anchor" href="#oasis-odata"></a>7.5. SensorThings API and OASIS OData</h3>
<div class="paragraph">
<p>SensorThings API follows OData’s specification for requesting entities. That means the entity control information, resource path usages, query options, the relevant JSON encodings, and batch-processing request follow OData 4.0. By using OData’s standard ways for requesting entities, developers who are familiar with OData can create SensorThings applications easily. However, SensorThings API does not follow the OData Common Schema Definition Language and as a result does not follow its metadata service entity model. Thus, SensorThings API should not be seen as an OData compliant API. SensorThings API’s future work will explore possible harmonization between SensorThings API and OData.</p>
</div>
</div>
<div class="sect2">
<h3 id="key-value-pair-encodings"><a class="anchor" href="#key-value-pair-encodings"></a>7.6. SensorThings API and OGC Key-Value Pair (KVP) Encodings</h3>
<div class="paragraph">
<p>Please note that SensorThings API’s Key-Value Pair (KVP) encoding is different from many existing OGC service implementation standards, such as SOS or Web Map Service (WMS). The main reason is that OData offers a complete set of KVP encodings (see Clause 9.3.3.6) that is designed specifically for RESTful web services, while OGC baseline currently does not have common KVP encodings for the RESTful binding. As a result, OGC SensorThings API version 1.1 chooses to use OData KVP encodings only. It is our future work to support OGC KVP encodings as an extension once a common OGC RESTful binding is available.</p>
</div>
</div>
<div class="sect2">
<h3 id="security"><a class="anchor" href="#security"></a>7.7. SensorThings API and Security</h3>
<div class="paragraph">
<p>As things in the Internet of Things are connected to the network. Such ubiquitous network connectivity results in significant security threats. In the IoT reference model defined by ITU-T [ITU-T Y.2060] IoT security capabilities are not an independent layer but must be associated with all layers. The following figure show the ITU-T IoT reference model. The reference model has four layers, namely (1) Applications Layer, (2) Service Support and Application Support Layer, (3) Network Layer, and (4) Device Layer. And security capabilities are a cross-layer component that is associated with the four layers.</p>
</div>
<div class="paragraph">
<p>Based on the IoT reference model, SensorThings API falls into the scope of the Service Support and Application Support Layer and the security issues should be addressed by the cross-cutting security capabilities. As a result, SensorThings API does not define specific security capabilities. Instead SensorThings API is designed to leverage the existing and future IoT security capabilities.</p>
</div>
<div id="fig-IotRefModel" class="imageblock text-center">
<div class="content">
<img src="images/IotRefModel.png" alt="IoT Reference Model (adapted from [ITU-T Y.2060])">
</div>
<div class="title">Figure 1. IoT Reference Model (adapted from [ITU-T Y.2060])</div>
</div>
<div class="paragraph">
<p>A service instance that implements security related extensions can notify clients of this by way of the <code>serverSettings</code> section of the document returned at the service root URI, as described in section <a href="#usage-no-resource-path">Section 9.2.1</a>. Security related extensions can also use this section to announce any security requirements to the clients.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sensing-entities1"><a class="anchor" href="#sensing-entities1"></a>8. The SensorThings API Sensing Entities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the SensorThings API data model. All data model requirements classes are grouped in the following requirements class:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/datamodel</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements class</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/datamodel/entity-control-information</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements class</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/datamodel/thing</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements class</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/datamodel/location</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements class</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/datamodel/historical-location</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements class</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/datamodel/datastream</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements class</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/datamodel/sensor</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements class</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/datamodel/observed-property</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements class</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/datamodel/observation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements class</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/datamodel/feature-of-interest</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="common-control-information"><a class="anchor" href="#common-control-information"></a>8.1. Common Control Information</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel/entity-control-information</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-entity-control-information-common-control-information" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-entity-control-information-common-control-information" class="paragraph">
<p>Req <a href="#req-entity-control-information-common-control-information">1</a>: <a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each entity SHALL have the following common control information listed in Table 2.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>In SensorThings control information is represented as annotations whose names start with iot followed by a dot ( . ). Annotations are name/value pairs that have a dot ( . ) as part of the name.</strong></p>
</div>
<div class="paragraph">
<p>When annotating a name/value pair for which the value is represented as a JSON object, each annotation is placed within the object and represented as a single name/value pair. In SensorThings the name always starts with the “at” sign (@), followed by the namespace iot, followed by a dot (.), followed by the name of the term (e.g., <strong>"@iot.id":</strong>1).</p>
</div>
<div class="paragraph">
<p>When annotating a name/value pair for which the value is represented as a JSON array or primitive value, each annotation that applies to this name/value pair is placed next to the annotated name/value pair and represented as a single name/value pair. The name is the same as the name of the name/value pair being annotated, followed by the “at” sign (<strong>@</strong>), followed by the namespace iot, followed by a dot (.), followed by the name of the term.  (e.g., <code>"Locations@iot.navigationLink":"http://example.org/v1.1/Things(1)/Locations"</code>)</p>
</div>
<table id="tab-common-control-information" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Common control information</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 50%;">
<col style="width: 15%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>id is the system-generated identifier of an entity. id is unique among the entities of the same entity type in a SensorThings service.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Any</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>selfLink</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>selfLink is the absolute URL of an entity that is unique among all other entities.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>URL</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>navigationLink</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>navigationLink is the relative or absolute URL that retrieves content of related entities.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>URL</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One-to-many<br>
(mandatory)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="sensing-entities2"><a class="anchor" href="#sensing-entities2"></a>8.2. The Sensing Entities</h3>
<div class="paragraph">
<p>The SensorThings API Sensing part’s Entities are depicted in <a href="#fig-sensing-entities">Figure 2</a>.</p>
</div>
<div id="fig-sensing-entities" class="imageblock text-center">
<div class="content">
<img src="images/SensingEntities.png" alt="Sensing Entities">
</div>
<div class="title">Figure 2. Sensing Entities</div>
</div>
<div class="paragraph">
<p>In this section, we explain the properties in each entity type and the direct relation to the other entity types. In addition, for each entity type, we show an example of the associated JSON encoding.</p>
</div>
<div class="sect3">
<h4 id="thing"><a class="anchor" href="#thing"></a>8.2.1. Thing</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel/thing</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-thing-properties">datamodel/thing/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-thing-relations">datamodel/thing/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The OGC SensorThings API follows the ITU-T definition, <em>i.e.</em>, with regard to the Internet of Things, a thing is an object of the physical world (physical things) or the information world (virtual things) that is capable of being identified and integrated into communication networks [ITU-T Y.2060].</p>
</div>
<table id="req-thing-properties" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-thing-properties" class="paragraph">
<p>Req <a href="#req-thing-properties">2</a>: <a href="#requirement-thing-properties">datamodel/thing/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each Thing entity SHALL have the mandatory properties and MAY have the optional properties listed in <a href="#tab-properties-thing">Table 3</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-thing-properties">datamodel/thing/properties</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-properties-thing" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Properties of a Thing entity</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>name</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A property provides a label for Thing entity, commonly a descriptive name.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>description</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>This is a short description of the corresponding Thing entity.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>properties</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON Object containing user-annotated properties as key-value pairs.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Object</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-thing-relations" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-thing-relations" class="paragraph">
<p>Req <a href="#req-thing-relations">3</a>: <a href="#requirement-thing-relations">datamodel/thing/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each Thing entity SHALL have the direct relation between a Thing entity and other entity types listed in <a href="#tab-relations-thing">Table 4</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-thing-relations">datamodel/thing/relations</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-relations-thing" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Direct relation between a Thing entity and other entity types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Entity type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Relation</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Location</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to many optional</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The Location entity locates the Thing. Multiple Things MAY be located at the same Location. A Thing MAY not have a Location. A Thing SHOULD have only one Location.</p>
</div>
<div class="paragraph">
<p>However, in some complex use cases, a Thing MAY have more than one Location representations. In such case, the Thing MAY have more than one Locations. These Locations SHALL have different encodingTypes and the encodingTypes SHOULD be in different spaces (e.g., one encodingType in Geometrical space and one encodingType in Topological space).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>HistoricalLocation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One mandatory to many optional</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A Thing has zero-to-many HistoricalLocations. A HistoricalLocation has one-and-only-one Thing.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Datastream</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One mandatory to many optional</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A Thing MAY have zero-to-many Datastreams.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example 1 an example of a Thing entity:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "@iot.id": 1,
  "@iot.selfLink": "http://example.org/v1.1/Things(1)",
  "Locations@iot.navigationLink": "Things(1)/Locations",
  "Datastreams@iot.navigationLink": "Things(1)/Datastreams",
  "HistoricalLocations@iot.navigationLink": "Things(1)/HistoricalLocations",

  "name": "Oven",
  "description": "This thing is an oven.",
  "properties": {
    "owner": "Noah Liang",
    "color": "Black"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="location"><a class="anchor" href="#location"></a>8.2.2. Location</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel/location</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-location-properties">datamodel/location/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-location-relations">datamodel/location/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Location entity locates the Thing or the Things it associated with. A Thing’s Location entity is defined as the last known location of the Thing.</p>
</div>
<div class="paragraph">
<p>A Thing’s Location may be identical to the Thing’s Observations’ FeatureOfInterest. In the context of the IoT, the principle location of interest is usually associated with the location of the Thing, especially for <em>in-situ</em> sensing applications. For example, the location of interest of a wifi-connected thermostat should be the building or the room in which the smart thermostat is located. And the FeatureOfInterest of the Observations made by the thermostat (e.g., room temperature readings) should also be the building or the room. In this case, the content of the smart thermostat’s location should be the same as the content of the temperature readings’ feature of interest.</p>
</div>
<div class="paragraph">
<p>However, the ultimate location of interest of a Thing is not always the location of the Thing (e.g., in the case of remote sensing). In those use cases, the content of a Thing’s Location is different from the content of the FeatureOfInterest of the Thing’s Observations. Section 7.1.4 of [OGC 10-004r3 and ISO 19156:2011] provides a detailed explanation of observation location.</p>
</div>
<table id="req-location-properties" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-location-properties" class="paragraph">
<p>Req <a href="#req-location-properties">4</a>: <a href="#requirement-location-properties">datamodel/location/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each Location entity SHALL have the mandatory properties listed in <a href="#tab-properties-location">Table 5</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-location-properties">datamodel/location/properties</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-properties-location" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Properties of a Location entity</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>name</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A property provides a label for Location entity, commonly a descriptive name.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>description</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The description about the Location.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>encodingType</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The encoding type of the Location property. Its value is one of the ValueCode enumeration (see <a href="#tab-encodingtype-codes">Table 7</a>).</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>ValueCode</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>location</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The location type is defined by encodingType.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Any (<em>i.e.</em>, the type is depending on the value of the encodingType)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>properties</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON Object containing user-annotated properties as key-value pairs.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Object</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-location-relations" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-location-relations" class="paragraph">
<p>Req <a href="#req-location-relations">5</a>: <a href="#requirement-location-relations">datamodel/location/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each Location entity SHALL have the direct relation between a Location entity and other entity types listed in <a href="#tab-relation-location">Table 6</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-location-relations">datamodel/location/relations</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-relation-location" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Direct relation between a Location entity and other entity types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Entity type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Relation</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Thing</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to many optional</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Multiple Things MAY locate at the same Location. A Thing MAY not have a Location.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>HistoricalLocation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many mandatory to many optional</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A Location can have zero-to-many HistoricalLocations. One HistoricalLocation SHALL have one or many Locations.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example 2 an example of a Location entity:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "@iot.id": 1,
  "@iot.selfLink": "http://example.org/v1.1/Locations(1)",
  "Things@iot.navigationLink": "Locations(1)/Things",
  "HistoricalLocations@iot.navigationLink": "Locations(1)/HistoricalLocations",

  "name": "CCIT",
  "description": "Calgary Center for Innvative Technologies",
  "encodingType": "application/geo+json",
  "location": {
    "type": "Feature",
    "geometry":{
      "type": "Point",
      "coordinates": [-114.06,51.05]
    }
  }
}</code></pre>
</div>
</div>
<table id="tab-encodingtype-codes" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. List of some code values used for identifying types for the encodingType of the Location and FeatureOfInterest entity</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Location encodingType</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">ValueCode Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">GeoJSON</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">application/geo+json</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A thing can be geo-referenced in different spaces. For example, for some applications it is more suitable to use a topological space model (e.g., IndoorGML) to describe an indoor things’ location rather than using a geographic space model (e.g., GeoJSON). Currently GeoJSON is the only Location encodingType of the SensorThings API. In the future we expect to extend SensorThings API’s capabilities by adding additional encodingType to the code values listed in the above table. For example, one potential new Location encodingType can be a JSON encoding for IndoorGML.</p>
</div>
</div>
<div class="sect3">
<h4 id="historicallocation"><a class="anchor" href="#historicallocation"></a>8.2.3. HistoricalLocation</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel/historical-location</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-historical-location-properties">datamodel/historical-location/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-historical-location-relations">datamodel/historical-location/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-historical-location-auto-creation">create-update-delete/historical-location-auto-creation</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A Thing’s HistoricalLocation entity set provides the times of the current (<em>i.e.</em>, last known) and previous locations of the Thing.</p>
</div>
<table id="req-historical-location-properties" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-historical-location-properties" class="paragraph">
<p>Req <a href="#req-historical-location-properties">6</a>: <a href="#requirement-historical-location-properties">datamodel/historical-location/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each HistoricalLocation entity SHALL have the mandatory properties and MAY have the optional properties listed in <a href="#tab-properties-historicallocation">Table 8</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-historical-location-properties">datamodel/historical-location/properties</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-historical-location-relations" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-historical-location-relations" class="paragraph">
<p>Req <a href="#req-historical-location-relations">7</a>: <a href="#requirement-historical-location-relations">datamodel/historical-location/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each HistoricalLocation entity SHALL have the direct relation between a HistoricalLocation entity and other entity types listed in <a href="#tab-relation-historicallocation">Table 9</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-historical-location-relations">datamodel/historical-location/relations</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-create-update-delete-historical-location-auto-creation" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-update-delete-historical-location-auto-creation" class="paragraph">
<p>Req <a href="#req-create-update-delete-historical-location-auto-creation">8</a>: <a href="#requirement-create-update-delete-historical-location-auto-creation">create-update-delete/historical-location-auto-creation</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>When a Thing has a new Location, a new HistoricalLocation SHALL be created and added to the Thing automatically by the service. The current Location of the Thing SHALL only be added to this autogenerated HistoricalLocation automatically by the service, and SHALL not be created as HistoricalLocation directly by user.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-historical-location-auto-creation">create-update-delete/historical-location-auto-creation</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The HistoricalLocation can also be created, updated and deleted. One use case is to migrate historical observation data from an existing observation data management system to a SensorThings API system.
Another use case is to track the Location of a Thing, when a permanent network connection is not available.
If the Location of a Thing is changed at a later time, when a network connection is available again, then the auto-generated Time of the HistoricalLocation entity would not relect the time when the Thing was actually at the set Location, but only the time at which the change was sent to the server.
To resolve this, the Location of a Thing can also be changed by adding a HistoricalLocation.
If the time of a manually created HistoricalLocation is later than the time of all existing HistoricalLocations, then the Location of the Thing is updated to the Location of this manually created HistoricalLocation.</p>
</div>
<table id="req-create-update-delete-historical-location-manual-creation" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-update-delete-historical-location-manual-creation" class="paragraph">
<p>Req <a href="#req-create-update-delete-historical-location-manual-creation">46</a>: <a href="#requirement-create-update-delete-historical-location-manual-creation">create-update-delete/historical-location-manual-creation</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>When a user directly adds new HistoricalLocation, and the time of this new HistoricalLocation is later than the latest HistoricalLocation for the Thing, then the Locations of the Thing are changed to the Locations of this new HistoricalLocation.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/<a href="#requirement-create-update-delete-historical-location-manual-creation">create-update-delete/historical-location-manual-creation</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-properties-historicallocation" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Properties of a HistoricalLocation entity</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>time</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The time when the Thing is known at the Location.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>TM_Instant (ISO-8601 Time String)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-relation-historicallocation" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Direct relation between an HistoricalLocation entity and other entity types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Entity type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Relation</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Location</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to many mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A Location can have zero-to-many HistoricalLocations. One HistoricalLocation SHALL have one or many Locations.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Thing</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to one mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A HistoricalLocation has one-and-only-one Thing. One Thing MAY have zero-to-many HistoricalLocations.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example 3: An example of a HistoricalLocations entity set (e.g., Things(1)/HistoricalLocations)</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "value": [
    {
      "@iot.id": 1,
      "@iot.selfLink": "http://example.org/v1.1/HistoricalLocations(1)",
      "Locations@iot.navigationLink": "HistoricalLocations(1)/Locations",
      "Thing@iot.navigationLink": "HistoricalLocations(1)/Thing",
      "time": "2015-01-25T12:00:00-07:00"
    },
    {
      "@iot.id": 2,
      "@iot.selfLink": "http://example.org/v1.1/HistoricalLocations(2)",
      "Locations@iot.navigationLink": "HistoricalLocations(2)/Locations",
      "Thing@iot.navigationLink": "HistoricalLocations(2)/Thing",
      "time": "2015-01-25T13:00:00-07:00"
    }
  ],
  "@iot.nextLink":"http://example.org/v1.1/Things(1)/HistoricalLocations?$skip=2&amp;$top=2"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datastream"><a class="anchor" href="#datastream"></a>8.2.4. Datastream</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel/datastream</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-datastream-properties">datamodel/datastream/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-datastream-relations">datamodel/datastream/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>urn:iso:dis:iso:19156:clause:8.2.2</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A Datastream groups a collection of Observations measuring the same ObservedProperty and produced by the same Sensor.</p>
</div>
<table id="req-datastream-properties" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-datastream-properties" class="paragraph">
<p>Req <a href="#req-datastream-properties">9</a>: <a href="#requirement-datastream-properties">datamodel/datastream/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each Datastream entity SHALL have the mandatory properties and MAY have the optional properties listed in <a href="#tab-properties-datastream">Table 10</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-datastream-properties">datamodel/datastream/properties</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-datastream-relations" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-datastream-relations" class="paragraph">
<p>Req <a href="#req-datastream-relations">10</a>: <a href="#requirement-datastream-relations">datamodel/datastream/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each Datastream entity SHALL have the direct relation between a Datastream entity and other entity types listed in <a href="#tab-relation-datastream">Table 11</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-datastream-relations">datamodel/datastream/relations</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-properties-datastream" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Properties of a Datastream entity</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>name</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A property provides a label for Datastream entity, commonly a descriptive name.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>description</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The description of the Datastream entity.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>unitOfMeasurement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON Object containing three key-value pairs. The name property presents the full name of the unitOfMeasurement; the symbol property shows the textual form of the unit symbol; and the definition contains the URI defining the unitOfMeasurement.</p>
</div>
<div class="paragraph">
<p>The values of these properties SHOULD follow the Unified Code for Unit of Measure (UCUM).</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Object</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div>
<div class="paragraph">
<p>Note: When a Datastream does not have a unit of measurement (e.g., a OM_TruthObservation type), the corresponding unitOfMeasurement properties SHALL have null values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>observationType</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The type of Observation (with unique result type), which is used by the service to encode observations.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>ValueCode<br>
see <a href="#tab-value-codes-obstypes">Table 12</a>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>properties</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON Object containing user-annotated properties as key-value pairs.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Object</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>observedArea</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The spatial bounding box of the spatial extent of all FeaturesOfInterest that belong to the Observations associated with this Datastream.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>GM_Envelope (GeoJSON Polygon)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one (optional)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>phenomenonTime</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The temporal interval of the phenomenon times of all observations belonging to this Datastream.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>TM_Period (ISO 8601 Time Interval)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one (optional)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>resultTime</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The temporal interval of the result times of all observations belonging to this Datastream.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>TM_Period (ISO 8601 Time Interval)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one (optional)</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-relation-datastream" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Direct relation between a Datastream entity and other entity types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Entity type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Relation</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Thing</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to one mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A Thing has zero-to-many Datastreams. A Datastream entity SHALL only link to a Thing as a collection of Observations.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Sensor</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to one mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The Observations in a Datastream are performed by one-and-only-one Sensor. One Sensor MAY produce zero-to-many Observations in different Datastreams.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>ObservedProperty</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to one mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The Observations of a Datastream SHALL observe the same ObservedProperty. The Observations of different Datastreams MAY observe the same ObservedProperty.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Observation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One mandatory to many optional</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A Datastream has zero-to-many Observations. One Observation SHALL occur in one-and-only-one Datastream.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example 4: A Datastream entity example</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "@iot.id": 1,
  "@iot.selfLink": "http://example.org/v1.1/Datastreams(1)",
  "Thing@iot.navigationLink": "HistoricalLocations(1)/Thing",
  "Sensor@iot.navigationLink": "Datastreams(1)/Sensor",
  "ObservedProperty@iot.navigationLink": "Datastreams(1)/ObservedProperty",
  "Observations@iot.navigationLink": "Datastreams(1)/Observations",

  "name": "oven temperature",
  "description": "This is a datastream measuring the air temperature in an oven.",
  "unitOfMeasurement": {
    "name": "degree Celsius",
    "symbol": "°C",
    "definition": "http://unitsofmeasure.org/ucum.html#para-30"
  },
  "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement",
  "observedArea": {
    "type": "Polygon",
    "coordinates": [[[100,0],[101,0],[101,1],[100,1],[100,0]]]
  },
  "phenomenonTime": "2014-03-01T13:00:00Z/2015-05-11T15:30:00Z",
  "resultTime": "2014-03-01T13:00:00Z/2015-05-11T15:30:00Z"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The observationType defines the result types for specialized observations [OGC 10-004r3 and ISO 19156:2011 Table 3]. The following table shows some of the valueCodes that maps the UML classes in O&amp;M v2.0 [OGC 10-004r3 and ISO 19156:2011] to observationType names and observation result types.</p>
</div>
<table id="tab-value-codes-obstypes" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. List of some code values used for identifying types defined in the O&amp;M conceptual model (OGC 10-004r3 and ISO 19156:2011 Clause 8.2.2)</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 55%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">O&amp;M 2.0</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Value Code Value (observationType names)</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Content of result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>OM_CategoryObservation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_CategoryObservation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>URI</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>OM_CountObservation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_CountObservation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>OM_Measurement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>double</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>OM_Observation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Observation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Any</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>OM_TruthObservation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_TruthObservation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="sensor"><a class="anchor" href="#sensor"></a>8.2.5. Sensor</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel/sensor</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-sensor-properties">datamodel/sensor/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-sensor-relations">datamodel/sensor/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A Sensor is an instrument that observes a property or phenomenon with the goal of producing an estimate of the value of the property<a href="#footnote3">3</a>.</p>
</div>
<table id="req-sensor-properties" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-sensor-properties" class="paragraph">
<p>Req <a href="#req-sensor-properties">11</a>: <a href="#requirement-sensor-properties">datamodel/sensor/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each Sensor entity SHALL have the mandatory properties and MAY have the optional properties listed in <a href="#tab-properties-sensor">Table 13</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-sensor-properties">datamodel/sensor/properties</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-sensor-relations" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-sensor-relations" class="paragraph">
<p>Req <a href="#req-sensor-relations">12</a>: <a href="#requirement-sensor-relations">datamodel/sensor/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each Sensor entity SHALL have the direct relation between a Sensor entity and other entity types listed in <a href="#tab-relation-sensor">Table 14</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-sensor-relations">datamodel/sensor/relations</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-properties-sensor" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Properties of a Sensor entity</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>name</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A property provides a label for Sensor entity, commonly a descriptive name.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>description</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The description of the Sensor entity.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>encodingType</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The encoding type of the metadata property. Its value is one of the ValueCode enumeration (see <a href="#tab-encodingtypes-sensor">Table 15</a> for the available ValueCode).</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>ValueCode</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>metadata</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The detailed description of the Sensor or system. The metadata type is defined by encodingType.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Any (depending on the value of the encodingType)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>properties</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON Object containing user-annotated properties as key-value pairs.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Object</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-relation-sensor" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Direct relation between a Sensor entity and other entity types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Entity type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Relation</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Datastream</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One mandatory to many optional</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The Observations of a Datastream are measured with the same Sensor. One Sensor MAY produce zero-to-many Observations in different Datastreams.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-encodingtypes-sensor" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. List of some code values used for identifying types for the encodingType of the Sensor entity</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Sensor encodingType</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">ValueCode Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">PDF</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">application/pdf</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">SensorML</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">http://www.opengis.net/doc/IS/SensorML/2.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">HTML</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">text/html</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Sensor encodingType allows clients to know how to interpret metadata’s value. Currently SensorThings API defines three common Sensor metadata encodingTypes. Most sensor manufacturers provide their sensor datasheets in a PDF format. As a result, PDF is a Sensor encodingType supported by SensorThings API. The second Sensor encodingType is SensorML. Lastly, some sensor datasheets are HTML documents rather than PDFs. Other encodingTypes are permitted (e.g. <code>text/plain</code>). Note that the metadata property may contain either a URL to metadata content (e.g. an <code>https://</code>, <code>ftp://</code>, etc. link to a PDF, SensorML, or HTML document) or the metadata content itself (in the case of <code>text/plain</code> or other encodingTypes that can be represented as valid JSON). It is up to clients to perform string parsing necessary to properly handle metadata content.</p>
</div>
<div class="listingblock">
<div class="title">Example 5: An example of a Sensor entity</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "@iot.id": 1,
  "@iot.selfLink": "http://example.org/v1.1/Sensors(1)",
  "Datastreams@iot.navigationLink": "Sensors(1)/Datastreams",

  "name": "TMP36",
  "description": "TMP36 - Analog Temperature sensor",
  "encodingType": "application/pdf",
  "metadata": "http://example.org/TMP35_36_37.pdf"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="observedproperty"><a class="anchor" href="#observedproperty"></a>8.2.6. ObservedProperty</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel/observed-property</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observed-property-properties">datamodel/observed-property/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observed-property-relations">datamodel/observed-property/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An ObservedProperty specifies the phenomenon of an Observation.</p>
</div>
<table id="req-observed-property-properties" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-observed-property-properties" class="paragraph">
<p>Req <a href="#req-observed-property-properties">13</a>: <a href="#requirement-observed-property-properties">datamodel/observed-property/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each ObservedProperty entity SHALL have the mandatory properties and MAY have the optional properties listed in <a href="#tab-properties-observedproperty">Table 16</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observed-property-properties">datamodel/observed-property/properties</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-observed-property-relations" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-observed-property-relations" class="paragraph">
<p>Req <a href="#req-observed-property-relations">14</a>: <a href="#requirement-observed-property-relations">datamodel/observed-property/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each ObservedProperty entity SHALL have the direct relation between a ObservedProperty entity and other entity types listed in <a href="#tab-relation-observedproperty">Table 17</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observed-property-relations">datamodel/observed-property/relations</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-properties-observedproperty" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Properties of an ObservedProperty entity</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>name</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A property provides a label for ObservedProperty entity, commonly a descriptive name.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>definition</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The URI of the ObservedProperty. Dereferencing this URI SHOULD result in a representation of the definition of the ObservedProperty.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>URI</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>description</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A description about the ObservedProperty.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>properties</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON Object containing user-annotated properties as key-value pairs.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Object</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-relation-observedproperty" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Direct relation between an ObservedProperty entity and other entity types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Entity type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Relation</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Datastream</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One mandatory to many optional</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The Observations of a Datastream observe the same ObservedProperty. The Observations of different Datastreams MAY observe the same ObservedProperty.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example 6: an example ObservedProperty entity</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "@iot.id": 1,
  "@iot.selfLink": "http://example.org/v1.1/ObservedProperties(1)",
  "Datastreams@iot.navigationLink": "ObservedProperties(1)/Datastreams",
  "description": "The dewpoint temperature is the temperature to which the
                  air must be cooled, at constant pressure, for dew to form.
                  As the grass and other objects near the ground cool to
                  the dewpoint, some of the water vapor in the atmosphere
                  condenses into liquid water on the objects.",
  "name": "DewPoint Temperature",
  "definition": "http://dbpedia.org/page/Dew_point"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="observation"><a class="anchor" href="#observation"></a>8.2.7. Observation</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel/observation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observation-properties">datamodel/observation/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observation-relations">datamodel/observation/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>urn:iso:dis:iso:19156:clause:7.2.2</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An Observation is the act of measuring or otherwise determining the value of a property [OGC 10-004r3 and ISO 19156:2011]</p>
</div>
<table id="req-observation-properties" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-observation-properties" class="paragraph">
<p>Req <a href="#req-observation-properties">15</a>: <a href="#requirement-observation-properties">datamodel/observation/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each Observation entity SHALL have the mandatory properties and MAY have the optional properties listed in <a href="#tab-properties-observation">Table 18</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observation-properties">datamodel/observation/properties</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-observation-relations" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-observation-relations" class="paragraph">
<p>Req <a href="#req-observation-relations">16</a>: <a href="#requirement-observation-relations">datamodel/observation/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each Observation entity SHALL have the direct relation between an Observation entity and other entity types listed in <a href="#tab-relations-observation">Table 19</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observation-relations">datamodel/observation/relations</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-properties-observation" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Properties of an Observation entity</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>phenomenonTime</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The time instant or period of when the Observation happens.</p>
</div>
<div class="paragraph">
<p>Note: Many resource-constrained sensing devices do not have a clock. As a result, a client may omit phenonmenonTime when POST new Observations, even though phenonmenonTime is a mandatory property. When a SensorThings service receives a POST Observations without phenonmenonTime, the service SHALL assign the current server time to the value of the phenomenonTime.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>TM_Object (ISO 8601 Time string or Time Interval string (e.g., <code>2010-12-23T10:20:00.00-07:00</code> or <code>2010-12-23T10:20:00.00-07:00/2010-12-23T12:20:00.00-07:00</code>))</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>result</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The estimated value of an ObservedProperty from the Observation.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Any (depends on the observationType defined in the associated Datastream)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>resultTime</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The time of the Observation&#8217;s result was generated.</p>
</div>
<div class="paragraph">
<p>Note: Many resource-constrained sensing devices do not have a clock. As a result, a client may omit resultTime when POST new Observations, even though resultTime is a mandatory property. When a SensorThings service receives a POST Observations without resultTime, the service SHALL assign a null value to the resultTime.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>TM_Instant (ISO 8601 Time string)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>resultQuality</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Describes the quality of the result.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>DQ_Element</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-many</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>validTime</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The time period during which the result may be used.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>TM_Period (ISO 8601 Time Interval string)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>parameters</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Key-value pairs showing the environmental conditions during measurement.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Object</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-One</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-relations-observation" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 19. Direct relation between an Observation entity and other entity types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Entity type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Relation</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Datastream</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to one mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A Datastream can have zero-to-many Observations. One Observation SHALL occur in one-and-only-one Datastream.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>FeatureOfInterest</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to one mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>An Observation observes on one-and-only-one FeatureOfInterest. One FeatureOfInterest could be observed by zero-to-many Observations.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example 7  An Observation entity example - The following example shows an Observation whose Datastream has an ObservationType of OM_Measurement. A result’s data type is defined by the observationType.</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "@iot.id": 1,
  "@iot.selfLink": "http://example.org/v1.1/Observations(1)",
  "FeatureOfInterest@iot.navigationLink": "Observations(1)/FeatureOfInterest",
  "Datastream@iot.navigationLink":"Observations(1)/Datastream",

  "phenomenonTime": "2014-12-31T11:59:59.00+08:00",
  "resultTime": "2014-12-31T11:59:59.00+08:00",
  "result": 70.4
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="featureofinterest"><a class="anchor" href="#featureofinterest"></a>8.2.8. FeatureOfInterest</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel/feature-of-interest</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-feature-of-interest-properties">datamodel/feature-of-interest/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-feature-of-interest-relations">datamodel/feature-of-interest/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An Observation results in a value being assigned to a phenomenon. The phenomenon is a property of a feature, the latter being the FeatureOfInterest of the Observation [OGC and ISO 19156:2011]. In the context of the Internet of Things, many Observations’ FeatureOfInterest can be the Location of the Thing. For example, the FeatureOfInterest of a wifi-connect thermostat can be the Location of the thermostat (<em>i.e.</em>, the living room where the thermostat is located in). In the case of remote sensing, the FeatureOfInterest can be the geographical area or volume that is being sensed.</p>
</div>
<table id="req-feature-of-interest-properties" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-feature-of-interest-properties" class="paragraph">
<p>Req <a href="#req-feature-of-interest-properties">17</a>: <a href="#requirement-feature-of-interest-properties">datamodel/feature-of-interest/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each FeatureOfInterest entity SHALL have the mandatory properties listed in <a href="#tab-properties-featureofinterest">Table 20</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-feature-of-interest-properties">datamodel/feature-of-interest/properties</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-feature-of-interest-relations" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-feature-of-interest-relations" class="paragraph">
<p>Req <a href="#req-feature-of-interest-relations">18</a>: <a href="#requirement-feature-of-interest-relations">datamodel/feature-of-interest/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each FeatureOfInterest entity SHALL have the direct relation between a FeatureOfInterest entity and other entity types listed in <a href="#tab-relation-featureofinterest">Table 21</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-feature-of-interest-relations">datamodel/feature-of-interest/relations</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-properties-featureofinterest" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 20. Properties of a FeatureOfInterest entity</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>name</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A property provides a label for FeatureOfInterest entity, commonly a descriptive name.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>description</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The description about the FeatureOfInterest.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>encodingType</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The encoding type of the feature property.</p>
</div>
<div class="paragraph">
<p>Its value is one of the ValueCode enumeration (see <a href="#tab-encodingtype-codes">Table 7</a> for the available ValueCode).</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>ValueCode</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>feature</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The detailed description of the feature. The data type is defined by encodingType.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Any</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>properties</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON Object containing user-annotated properties as key-value pairs.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Object</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-relation-featureofinterest" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 21. Direct relation between a FeatureOfInterest entity and other entity types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Entity type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Relation</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Observation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One mandatory to many optional</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>An Observation observes on one-and-only-one FeatureOfInterest. One FeatureOfInterest could be observed by zero-to-many Observations.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example 8: an example of a FeatureOfInterest entity</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "@iot.id": 1,
  "@iot.selfLink": "http://example.org/v1.1/FeaturesOfInterest(1)",
  "Observations@iot.navigationLink": "FeaturesOfInterest(1)/Observations",

  "name": "Weather Station YYC.",
  "description": "This is a weather station located at the Calgary Airport.",
  "encodingType": "application/geo+json",
  "feature": {
    "type": "Feature",
    "geometry":{
      "type": "Point",
      "coordinates": [-114.06,51.05]
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sensorthings-serviceinterface"><a class="anchor" href="#sensorthings-serviceinterface"></a>9. SensorThings Service Interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An OGC SensorThings API service exposes a service document resources that describe its data model. The service document lists the entity sets that can be CRUD. SensorThings API clients can use the service document to navigate the available entities in a hypermedia-driven fashion.</p>
</div>
<div class="sect2">
<h3 id="uri-components"><a class="anchor" href="#uri-components"></a>9.1. URI Components</h3>
<div class="paragraph">
<p>The OGC SensorThings API service groups the same types of entities into <em>entity sets.</em>Each entity has a unique identifier and one-to-many properties. Also, in the case of an entity holding a relationship with entities in other entity sets, this type of relationship is expressed with navigation properties (<em>i.e.</em>, navigationLink and associationLink).</p>
</div>
<div class="paragraph">
<p>Therefore, in order to perform CRUD actions on the resources, the first step is to address to the target resource(s) through URI. There are three major URI components used here, namely (1) <em>the service root URI</em>, (2) the <em>resource path</em>, and (3) the <em>query options</em>. In addition, the service root URI consists of two parts: (1) the location of the SensorThings service and (2) the version number. The version number follows the format indicated below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>"v"majorversionnumber + "." + minorversionnumber</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 9: complete URI example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>http://example.org/v1.1/Observations?$orderby=ID&amp;$top=10
_______________________/___________/___________________/
          |                 |               |
  service root URI     resource path   query options</code></pre>
</div>
</div>
<div class="paragraph">
<p>By attaching the resource path after the service root URI, clients can address to different types of resources such as an entity set, <em>an entity</em>, <em>a property</em>, or <em>a navigation property</em>. Finally, clients can apply query options after the resource path to further process the addressed resources, such as sorting by properties or filtering with criteria.</p>
</div>
</div>
<div class="sect2">
<h3 id="resource-path"><a class="anchor" href="#resource-path"></a>9.2. Resource Path</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/resource-path</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-resource-path-resource-path-to-entities">resource-path/resource-path-to-entities</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The resource path comes right after the service root URI and can be used to address to different resources. The following lists the usages of the resource path.</p>
</div>
<table id="req-resource-path-resource-path-to-entities" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-resource-path-resource-path-to-entities" class="paragraph">
<p>Req <a href="#req-resource-path-resource-path-to-entities">19</a>: <a href="#requirement-resource-path-resource-path-to-entities">resource-path/resource-path-to-entities</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>An OGC SensorThings API service SHALL support all the resource path usages listed in <a href="#resource-path">Section 9.2</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-resource-path-resource-path-to-entities">resource-path/resource-path-to-entities</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="usage-no-resource-path"><a class="anchor" href="#usage-no-resource-path"></a>9.2.1. Usage 1: no resource path</h4>
<div class="paragraph">
<p><strong>URI Pattern:</strong> SERVICE_ROOT_URI</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong> A JSON object with a property named <code>value</code> and a property named <code>serverSettings</code>.
The value of the property named <code>value</code> SHALL be a JSON Array containing one element for each entity set of the SensorThings Service.
The value of the property named <code>serverSettings</code> SHALL be a JSON Object describing the features the server supports that can not easily be detected by querying the service.</p>
</div>
<div class="paragraph">
<p>Each element of the <code>value</code> array SHALL be a JSON object with at least two name/value pairs, one with name name containing the name of the entity set (e.g., Things, Locations, Datastreams, Observations, ObservedProperties and Sensors) and one with name url containing the URL of the entity set, which may be an absolute or a relative URL.<br>
 [Adapted from OData 4.0-JSON-Format section 5]</p>
</div>
<div class="paragraph">
<p>The <code>serverSettings</code> object SHALL contain the property <code>conformance</code> of the type Array, containing the URIs of all requirements from this specification and any extensions that the service implements.
If a service implements all requirements from a requirements class, it only needs to list the requirements class id.</p>
</div>
<div class="paragraph">
<p>Security extensions can modify the list of requirements to only show those requirements that the user is allowed to use.
For example, if a user is not allowed to delete entities, the security extension can hide the <a href="#requirement-create-update-delete-delete-entity">create-update-delete/delete-entity</a> requirement.
In the most extreme case, a security extension would hide all requirements for a user that is not authenticated, except its own requirement and the instructions on how to authenticate.</p>
</div>
<div class="paragraph">
<p>Extensions that need to expose additional server settings may do so in a property of the <code>serverSettings</code> object that is named after the conformance class URI of the requirement that defines this setting.</p>
</div>
<div class="paragraph">
<p><strong>Example 10: a SensorThings request with no resource path</strong></p>
</div>
<div class="literalblock">
<div class="title">Example Request:</div>
<div class="content">
<pre>http://example.org/v1.1/</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Response:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
 "serverSettings": {
    "conformance": [
        "http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/resource-path/resource-path-to-entities",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/request-data",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/create-entity",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/link-to-existing-entities",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/deep-insert",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/deep-insert-status-code",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/update-entity",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/delete-entity",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/historical-location-auto-creation",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/create-observations-via-mqtt/observations-creation",
        "http://www.opengis.net/spec/iot_sensing/1.1/req/receive-updates-via-mqtt/receive-updates"
    ],
    "http://www.opengis.net/spec/iot_sensing/1.1/req/receive-updates-via-mqtt/receive-updates": {
      "endpoints": [
        "mqtt://server.example.com:1833",
        "ws://server.example.com/sensorThings",
      ]
    },
    "http://www.opengis.net/spec/iot_sensing/1.1/req/create-observations-via-mqtt/observations-creation": {
      "endpoints": [
        "mqtts://server.example.com:8883",
        "wss://server.example.com:443/sensorThings"
      ]
    }
  },
  "value": [
    {
      "name": "Things",
      "url": "http://example.org/v1.1/Things"
    },
    {
      "name": "Locations",
      "url": "http://example.org/v1.1/Locations"
    },
    {
      "name": "Datastreams",
      "url": "http://example.org/v1.1/Datastreams"
    },
    {
      "name": "Sensors",
      "url": "http://example.org/v1.1/Sensors"
    },
    {
      "name": "Observations",
      "url": "http://example.org/v1.1/Observations"
    },
    {
      "name": "ObservedProperties",
      "url": "http://example.org/v1.1/ObservedProperties"
    },
    {
      "name": "FeaturesOfInterest",
      "url": "http://example.org/v1.1/FeaturesOfInterest"
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="usage-address-collection-entities"><a class="anchor" href="#usage-address-collection-entities"></a>9.2.2. Usage 2: address to a collection of entities</h4>
<div class="paragraph">
<p>To address to an entity set, users can simply put the entity set name after the service root URI. The service returns a JSON object with a property of value. The value of the property SHALL be a list of the entities in the specified entity set.</p>
</div>
<div class="paragraph">
<p><strong>URI Pattern:</strong> SERVICE_ROOT_URI/ENTITY_SET_NAME</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong> A list of all entities (with all the properties) in the specified entity set when there is no service-driven pagination imposed. The response is represented as a JSON object containing a name/value pair named value. The value of the value name/value pair is a JSON array where each element is representation of an entity or a representation of an entity reference. An empty collection is represented as an empty JSON array.</p>
</div>
<div class="paragraph">
<p>The count annotation represents the number of entities in the collection. If present, it comes before the value name/value pair.</p>
</div>
<div class="paragraph">
<p>When there is service-driven pagination imposed, the nextLink annotation is included in a response that represents a partial result.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from OData 4.0-JSON-Format section 12]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 11 an example to address an entity set</strong></p>
</div>
<div class="literalblock">
<div class="title">Example Request:</div>
<div class="content">
<pre>http://example.org/v1.1/ObservedProperties</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Response:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "@iot.count":84,
  "value": [
    {
      "@iot.id": 1,
      "@iot.selfLink": "http://example.org/v1.1/ObservedProperties(1)",
      "Datastreams@iot.navigationLink": "ObservedProperties(1)/Datastreams",
      "description": "The dew point is the temperature at which the water
                      vapor in air at constant barometric pressure condenses
                      into liquid water at the same rate at which it evaporates.",
      "name": "DewPoint Temperature",
      "definition": "http://dbpedia.org/page/Dew_point"
    },
    {
      "@iot.id ": 2,
      "@iot.selfLink": "http://example.org/v1.1/ObservedProperties(2)",
      "Datastreams@iot.navigationLink": "ObservedProperties(2)/Datastreams",
      "description": "Relative humidity is the ratio of the partial pressure
                      of water vapor in an air-water mixture to the saturated
                      vapor pressure of water at a prescribed temperature.",
      "name": "Relative Humidity",
      "definition": "http://dbpedia.org/page/Relative_humidity"
    },{…},{…},{…}
  ],
  "@iot.nextLink":"http://example.org/v1.1/ObservedProperties?$top=5&amp;$skip=5"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="usage-address-entity"><a class="anchor" href="#usage-address-entity"></a>9.2.3. Usage 3: address to an entity in a collection</h4>
<div class="paragraph">
<p>Users can address to a specific entity in an entity set by place the unique identifier of the entity between brace symbol “()” and put after the entity set name. The service then returns the entity with all its properties.</p>
</div>
<div class="paragraph">
<p><strong>URI Pattern:</strong> SERVICE_ROOT_URI/ENTITY_SET_NAME(ID_OF_THE_ENTITY)</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong> A JSON object of the entity (with all its properties) that holds the specified id in the entity set.</p>
</div>
<div class="paragraph">
<p><strong>Example 12: an example request that addresses to an entity in a collection</strong></p>
</div>
<div class="literalblock">
<div class="title">Example Request:</div>
<div class="content">
<pre>http://example.org/v1.1/Things(1)</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="usage-address-property-of-entity"><a class="anchor" href="#usage-address-property-of-entity"></a>9.2.4. Usage 4: address to a property of an entity</h4>
<div class="paragraph">
<p>Users can address to a property of an entity by specifying the property name after the URI addressing to the entity. The service then returns the value of the specified property. If the property has a complex type value, properties of that value can be addressed by further property name composition.</p>
</div>
<div class="paragraph">
<p>If the property is single-valued and has the null value, the service SHALL respond with 204 No Content. If the property is not available, for example due to permissions, the service SHALL respond with 404 Not Found.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from OData 4.0-Protocol 11.2.3]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>URI Pattern:</strong> SERVICE_ROOT_URI/RESOURCE_PATH_TO_AN_ENTITY/PROPERTY_NAME</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong> The specified property of an entity that holds the id in the entity set.</p>
</div>
<div class="paragraph">
<p><strong>Example 13: an example to address to a property of an entity</strong></p>
</div>
<div class="literalblock">
<div class="title">Example Request:</div>
<div class="content">
<pre>http://example.org/v1.1/Observations(1)/resultTime</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Response:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "resultTime": "2010-12-23T10:20:00-07:00"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="usage-address-value-of-property"><a class="anchor" href="#usage-address-value-of-property"></a>9.2.5. Usage 5: address to the value of an entity’s property</h4>
<div class="paragraph">
<p>To address the raw value of a primitive property, clients append a path segment containing the string <code>$value</code> to the property URL.</p>
</div>
<div class="paragraph">
<p>The default format for TM_Object types is text/plain using the ISO8601 format, such as <code>2014-03-01T13:00:00Z/2015-05-11T15:30:00Z</code> for TM_Period and <code>2014-03-01T13:00:00Z</code> for TM_Instant.</p>
</div>
<div class="paragraph">
<p><strong>URI Pattern:</strong> SERVICE_ROOT_URI/ENTITY_SET_NAME(ID_OF_THE_ENTITY)/PROPERTY_NAME/$value</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong> The raw value of the specified property of an entity that holds the id in the entity set.</p>
</div>
<div class="paragraph">
<p><strong>Example 14: an example of addressing to the value of an entity’s property</strong></p>
</div>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Observations(1)/resultTime/$value</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Response:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">  2015-01-12T23:00:13-07:00</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="usage-address-navigation-property"><a class="anchor" href="#usage-address-navigation-property"></a>9.2.6. Usage 6: address to a navigation property (navigationLink)</h4>
<div class="paragraph">
<p>As the entities in different entity sets may hold some relationships, users can request the linked entities by addressing to a navigation property of an entity. The service then returns one or many entities that hold a certain relationship with the specified entity.</p>
</div>
<div class="paragraph">
<p><strong>URI Pattern:</strong> SERVICE_ROOT_URI/ENTITY_SET_NAME(ID_OF_THE_ENTITY)/LINK_NAME</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong> A JSON object of one entity or a JSON array of many entities that holds a certain relationship with the specified entity.</p>
</div>
<div class="paragraph">
<p><strong>Example 15: an example request addressing to a navigational property</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Datastreams(1)/Observations</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>returns all the Observations in the Datastream that holds the id 1.</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="usage-address-associationlink"><a class="anchor" href="#usage-address-associationlink"></a>9.2.7. Usage 7: address to an associationLink</h4>
<div class="paragraph">
<p>As the entities in different entity sets may hold some relationships, users can request the linked entities’ selfLinks by addressing to an association link of an entity. An associationLink can be used to retrieve a reference to an entity or an entity set related to the current entity. Only the selfLinks of related entities are returned when resolving associationLinks.</p>
</div>
<div class="paragraph">
<p><strong>URI Pattern:</strong> SERVICE_ROOT_URI/ENTITY_SET_NAME(KEY_OF_THE_ENTITY)/LINK_NAME/$ref</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong> A JSON object with a value property. The value of the value property is a JSON array containing one element for each associationLink. Each element is a JSON object with a name/value pairs. The name is @iot.selfLink and the value is the selfLink of the related entity.</p>
</div>
<div class="paragraph">
<p><strong>Example 16: an example of addressing to an association link</strong></p>
</div>
<div class="literalblock">
<div class="title">Example Request:</div>
<div class="content">
<pre>http://example.org/v1.1/Datastreams(1)/Observations/$ref</pre>
</div>
</div>
<div class="paragraph">
<p>returns all the selfLinks of the Observations of Datastream(1).</p>
</div>
<div class="listingblock">
<div class="title">Example Response:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "value": [
    {
      "@iot.selfLink": "http://example.org/v1.1/Observations(1)"
    },
    {
      "@iot.selfLink": "http://example.org/v1.1/Observations(2)"
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="usage-nested-resource-path"><a class="anchor" href="#usage-nested-resource-path"></a>9.2.8. Usage 8: nested resource path</h4>
<div class="paragraph">
<p>As users can use navigation properties to link from one entity set to another, users can further extend the resource path with unique identifiers, properties, or links (<em>i.e.</em>, Usage 3, 4 and 6).</p>
</div>
<div class="paragraph">
<p><strong>Example 17: examples of nested resource path</strong></p>
</div>
<div class="paragraph">
<p><strong>Example Request 1:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Datastreams(1)/Observations(1)</pre>
</div>
</div>
<div class="paragraph">
<p>returns a specific Observation entity in the Datastream.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 2:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Datastreams(1)/Observations(1)/resultTime</pre>
</div>
</div>
<div class="paragraph">
<p>turns the resultTime property of the specified Observation in the Datastream.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 3:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Datastreams(1)/Observations(1)/FeatureOfInterest</pre>
</div>
</div>
<div class="paragraph">
<p>returns the FeatureOfInterest entity of the specified Observation in the Datastream.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="requesting-data"><a class="anchor" href="#requesting-data"></a>9.3. Requesting Data</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/request-data</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-order">request-data/order</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-expand">request-data/expand</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-select">request-data/select</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-status-code">request-data/status-code</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-query-status-code">request-data/query-status-code</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-orderby">request-data/orderby</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-top">request-data/top</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-skip">request-data/skip</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-count">request-data/count</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-filter">request-data/filter</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#_Toc406398292</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#_Toc406398297</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#_Toc406398299</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#_Toc406398300</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Clients issue HTTP GET requests to OGC SensorThings API services for data. The resource path of the URL specifies the target of the request. Additional query operators can be specified through query options that are presented as follows. The query operators are prefixed with a dollar ($) character and specified as key-value pairs after the question symbol (?) in the request URI. Many of the OGC SensorThings API’s query options are adapted from OData’s query options. OData developers should be able to pick up SensorThings API query options very quickly.</p>
</div>
<table id="req-request-data-status-code" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-status-code" class="paragraph">
<p>Req <a href="#req-request-data-status-code">20</a>: <a href="#requirement-request-data-status-code">request-data/status-code</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>OGC SensorThings API services are hypermedia driven services that return URLs to the client. If a client subsequently requests the advertised resource and the URL has expired, then the service SHALL respond with 410 Gone. If this is not feasible, the service SHALL respond with 404 Not Found.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-status-code">request-data/status-code</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-request-data-query-status-code" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-query-status-code" class="paragraph">
<p>Req <a href="#req-request-data-query-status-code">21</a>: <a href="#requirement-request-data-query-status-code">request-data/query-status-code</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>If a service does not support a system query option, it SHALL fail any request that contains the unsupported option and SHALL return 501 Not Implemented.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-query-status-code">request-data/query-status-code</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="evaluating-system-query-options"><a class="anchor" href="#evaluating-system-query-options"></a>9.3.1. Evaluating System Query Options</h4>
<table id="req-request-data-order" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-order" class="paragraph">
<p>Req <a href="#req-request-data-order">22</a>: <a href="#requirement-request-data-order">request-data/order</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>An OGC SensorThings API service SHALL evaluate the system query options following the order specified in <a href="#evaluating-system-query-options">Section 9.3.1</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-order">request-data/order</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The OGC SensorThings API adapts many of OData’s system query options and their usage. These query options allow refining the request.</p>
</div>
<div class="paragraph">
<p>The result of the service request is as if the system query options were evaluated in the following order.</p>
</div>
<div class="paragraph">
<p>Prior to applying any server-driven pagination:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>$filter</p>
</li>
<li>
<p>$count</p>
</li>
<li>
<p>$orderby</p>
</li>
<li>
<p>$skip</p>
</li>
<li>
<p>$top</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After applying any server-driven pagination:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>$expand</p>
</li>
<li>
<p>$select</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="select3"><a class="anchor" href="#select3"></a>9.3.2. Specifying Properties to Return</h4>
<div class="paragraph">
<p>The $select and $expand system query options enable the client to specify the set of properties to be included in a response.</p>
</div>
<div class="sect4">
<h5 id="expand"><a class="anchor" href="#expand"></a>9.3.2.1. $expand</h5>
<table id="req-request-data-expand" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-expand" class="paragraph">
<p>Req <a href="#req-request-data-expand">23</a>: <a href="#requirement-request-data-expand">request-data/expand</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The $expand system query option indicates the related entities to be represented inline. The value of the $expand query option SHALL be a comma separated list of navigation property names. Additionally, each navigation property can be followed by a forward slash and another navigation property to enable identifying a multi-level relationship.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-expand">request-data/expand</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 18: examples of $expand query option</strong></p>
</div>
<div class="paragraph">
<p><strong>Example Request 1:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Things?$expand=Datastreams</pre>
</div>
</div>
<div class="paragraph">
<p>returns the entity set of Things as well as each of the Datastreams associated with each Thing entity.</p>
</div>
<div class="paragraph">
<p>Example Request 1 Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "values": [
    {
      "@iot.id": 1,
      "@iot.selfLink": "http://example.org/v1.1/Things(1)",
      "Locations@iot.navigationLink": "Things(1)/Locations",
      "Datastreams@iot.count":1,
      "Datastreams": [
        {
          "@iot.id": 1,
          "@iot.selfLink": "http://example.org/v1.1/Datastreams(1)",
          "name": "oven temperature",
          "description": "This is a datastream measuring the air temperature in an oven.",
          "unitOfMeasurement": {
            "name": "degree Celsius",
            "symbol": "°C",
            "definition": "http://unitsofmeasure.org/ucum.html#para-30"
          },
          "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement",
          "observedArea": {
            "type": "Polygon",
            "coordinates": [[[100,0],[101,0],[101,1],[100,1],[100,0]]]
          },
          "phenomenonTime": "2014-03-01T13:00:00Z/2015-05-11T15:30:00Z",
          "resultTime": "2014-03-01T13:00:00Z/2015-05-11T15:30:00Z"
        }
      ],
      "HistoricalLocations@iot.navigationLink": "Things(1)/HistoricalLocations",
      "description": "This thing is a convection oven.",
      "name": "Oven",
      "properties": {
        "owner": "John Doe",
        "color": "Silver"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example Request 2:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Things?$expand=Datastreams/ObservedProperty</pre>
</div>
</div>
<div class="paragraph">
<p>returns the collection of Things, the Datastreams associated with each Thing, and the ObservedProperty associated with each Datastream.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 3:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Datastreams(1)?$expand=Observations,ObservedProperty</pre>
</div>
</div>
<div class="paragraph">
<p>returns the Datastream whose id is 1 as well as the Observations and ObservedProperty associated with this Datastream.</p>
</div>
<div class="paragraph">
<p>Query options can be applied to the expanded navigation property by appending a semicolon-separated list of query options, enclosed in parentheses, to the navigation property name. Allowed system query options are $filter, $select, $orderby, $skip, $top, $count, and $expand.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from OData 4.0- URL 5.1.2]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example Request 4:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Datastreams(1)?$expand=Observations($filter=result eq 1)</pre>
</div>
</div>
<div class="paragraph">
<p>returns the Datastream whose id is 1 as well as its Observations with a result equal to 1.</p>
</div>
</div>
<div class="sect4">
<h5 id="select4"><a class="anchor" href="#select4"></a>9.3.2.2. $select</h5>
<table id="req-request-data-select" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-select" class="paragraph">
<p>Req <a href="#req-request-data-select">24</a>: <a href="#requirement-request-data-select">request-data/select</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The $select system query option requests the service to return only the properties explicitly requested by the client. The value of a $select query option SHALL be a comma-separated list of selection clauses. Each selection clause SHALL be a property name (including navigation property names). In the response, the service SHALL return the specified content, if available, along with any available expanded navigation properties.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from OData 4.0-Protocol 11.2.4.1]</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-select">request-data/select</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 19: examples of $select query option</strong></p>
</div>
<div class="paragraph">
<p><strong>Example Request 1:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Observations?$select=result,resultTime</pre>
</div>
</div>
<div class="paragraph">
<p>returns only the result and resultTime properties for each Observation entity.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 2:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Datastreams(1)?$select=id,Observations&amp;$expand=Observations/FeatureOfInterest</pre>
</div>
</div>
<div class="paragraph">
<p>returns the id property of the Datastream entity, and all the properties of the entity identified by the Observations and FeatureOfInterest navigation properties.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 3:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Datastreams(1)?$expand=Observations($select=result)</pre>
</div>
</div>
<div class="paragraph">
<p>returns the Datastream whose id is 1 as well as the result property of the entity identified by the Observations navigation property.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="query-entity-sets"><a class="anchor" href="#query-entity-sets"></a>9.3.3. Query Entity Sets</h4>
<div class="sect4">
<h5 id="orderby"><a class="anchor" href="#orderby"></a>9.3.3.1. $orderby</h5>
<table id="req-request-data-orderby" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-orderby" class="paragraph">
<p>Req <a href="#req-request-data-orderby">25</a>: <a href="#requirement-request-data-orderby">request-data/orderby</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The $orderby system query option specifies the order in which items are returned from the service. The value of the $orderby system query option SHALL contain a comma-separated list of expressions whose primitive result values are used to sort the items. A special case of such an expression is a property path terminating on a primitive property.</p>
</div>
<div class="paragraph">
<p>The expression MAY include the suffix asc for ascending or desc for descending, separated from the property name by one or more spaces. If asc or desc is not specified, the service SHALL order by the specified property in ascending order.</p>
</div>
<div class="paragraph">
<p>Null values SHALL come before non-null values when sorting in ascending order and after non-null values when sorting in descending order.</p>
</div>
<div class="paragraph">
<p>Items SHALL be sorted by the result values of the first expression, and then items with the same value for the first expression SHALL be sorted by the result value of the second expression, and so on.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Note: Adapted from OData 4.0-Protocol 11.2.5.2]</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-orderby">request-data/orderby</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 20: examples of $orderby query option</strong></p>
</div>
<div class="paragraph">
<p><strong>Example Request 1:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Observations?$orderby=result</pre>
</div>
</div>
<div class="paragraph">
<p>returns all Observations ordered by the result property in ascending order.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 2:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Observations?$expand=Datastream&amp;$orderby=Datastreams/id desc, phenomenonTime</pre>
</div>
</div>
<div class="paragraph">
<p>returns all Observations ordered by the id property of the linked Datastream entry in descending order, then by the phenomenonTime property of Observations in ascending order.</p>
</div>
</div>
<div class="sect4">
<h5 id="top"><a class="anchor" href="#top"></a>9.3.3.2. $top</h5>
<table id="req-request-data-top" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-top" class="paragraph">
<p>Req <a href="#req-request-data-top">26</a>: <a href="#requirement-request-data-top">request-data/top</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The $top system query option specifies the limit on the number of items returned from a collection of entities. The value of the $top system query option SHALL be a non-negative integer n. The service SHALL return the number of available items up to but not greater than the specified value n.</p>
</div>
<div class="paragraph">
<p>If no unique ordering is imposed through an $orderby query option, the service SHALL impose a stable ordering across requests that include $top.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Note: Adapted from OData 4.0-Protocol 11.2.5.3]</pre>
</div>
</div>
<div class="paragraph">
<p>In addition, if the $top value exceeds the service-driven pagination limitation (<em>i.e.</em>, the largest number of entities the service can return in a single response), the $top query option SHALL be discarded and the server-side pagination limitation SHALL be imposed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-top">request-data/top</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 21: examples of $top query option</strong></p>
</div>
<div class="paragraph">
<p><strong>Example Request 1:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Things?$top=5</pre>
</div>
</div>
<div class="paragraph">
<p>returns only the first five entities in the Things collection.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 2:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Observations?$top=5&amp;$orderby=phenomenonTime%20desc</pre>
</div>
</div>
<div class="paragraph">
<p>returns the first five Observation entries after sorted by the phenomenonTime property in descending order.</p>
</div>
</div>
<div class="sect4">
<h5 id="skip"><a class="anchor" href="#skip"></a>9.3.3.3. $skip</h5>
<table id="req-request-data-skip" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-skip" class="paragraph">
<p>Req <a href="#req-request-data-skip">27</a>: <a href="#requirement-request-data-skip">request-data/skip</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The $skip system query option specifies the number for the items of the queried collection that SHALL be excluded from the result. The value of $skip system query option SHALL be a non-negative integer n. The service SHALL return items starting at position n+1.</p>
</div>
<div class="paragraph">
<p>Where $top and $skip are used together, $skip SHALL be applied before $top, regardless of the order in which they appear in the request.</p>
</div>
<div class="paragraph">
<p>If no unique ordering is imposed through an $orderby query option, the service SHALL impose a stable ordering across requests that include $skip.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Note: Adapted from OData 4.0-Protocol 11.2.5.4]</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-skip">request-data/skip</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 22: examples of $skip query option</strong></p>
</div>
<div class="paragraph">
<p><strong>Example Request 1:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Things?$skip=5</pre>
</div>
</div>
<div class="paragraph">
<p>returns Thing entities starting with the sixth Thing entity in the Things collection.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 2:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Observations?$skip=2&amp;$top=2&amp;$orderby=resultTime</pre>
</div>
</div>
<div class="paragraph">
<p>returns the third and fourth Observation entities from the collection of all Observation entities when the collection is sorted by the resultTime property in ascending order.</p>
</div>
</div>
<div class="sect4">
<h5 id="count"><a class="anchor" href="#count"></a>9.3.3.4. $count</h5>
<table id="req-request-data-count" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-count" class="paragraph">
<p>Req <a href="#req-request-data-count">28</a>: <a href="#requirement-request-data-count">request-data/count</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The $count system query option with a value of true specifies that the total count of items within a collection matching the request SHALL be returned along with the result. A $count query option with a value of false (or not specified) hints that the service SHALL not return a count.</p>
</div>
<div class="paragraph">
<p>The service SHALL return an HTTP Status code of 400 Bad Request if a value other than true or false is specified.</p>
</div>
<div class="paragraph">
<p>The $count system query option SHALL ignore any $top, $skip, or $expand query options, and SHALL return the total count of results across all pages including only those results matching any specified $filter. Clients should be aware that the count returned inline may not exactly equal the actual number of items returned, due to latency between calculating the count and enumerating the last value or due to inexact calculations on the service.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from OData 4.0-Protocol 11.2.5.5]</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-count">request-data/count</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 23: examples of $count query option</strong></p>
</div>
<div class="paragraph">
<p><strong>Example Request 1:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Things?$count=true</pre>
</div>
</div>
<div class="paragraph">
<p>returns, along with the results, the total number of Things in the collection.</p>
</div>
<div class="listingblock">
<div class="title">Example Response:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "@iot.count": 2,
  "value": [
    {…},
    {…}
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="filter"><a class="anchor" href="#filter"></a>9.3.3.5. $filter</h5>
<table id="req-request-data-filter" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-filter" class="paragraph">
<p>Req <a href="#req-request-data-filter">29</a>: <a href="#requirement-request-data-filter">request-data/filter</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The $filter system query option allows clients to filter a collection of entities that are addressed by a request URL. The expression specified with $filter is evaluated for each entity in the collection, and only items where the expression evaluates to true SHALL be included in the response. Entities for which the expression evaluates to false or to null, or which reference properties that are unavailable due to permissions, SHALL be omitted from the response.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from Data 4.0-URL Conventions 5.1.1]</pre>
</div>
</div>
<div class="paragraph">
<p>The expression language that is used in $filter operators SHALL support references to properties and literals. The literal values SHALL be strings enclosed in single quotes, numbers and boolean values (true or false) or datetime values represented as ISO 8601 time string.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-filter">request-data/filter</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 24: examples of $filter query option</strong></p>
</div>
<div class="paragraph">
<p><strong>Example Request 1:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Observations?$filter=result lt 10.00</pre>
</div>
</div>
<div class="paragraph">
<p>returns all Observations whose result is less than 10.00.</p>
</div>
<div class="paragraph">
<p>In addition, clients can choose to use the properties of linked entities in the $filter predicate. The following are examples of the possible uses of the $filter in the data model of the SensorThings service.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 2:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Observations?$filter=Datastream/id eq ‘1’</pre>
</div>
</div>
<div class="paragraph">
<p>returns all Observations whose Datastream’s id is 1.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 3:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Things?$filter=geo.distance(Locations/location, geography’POINT(-122, 43)’) gt 1</pre>
</div>
</div>
<div class="paragraph">
<p>returns Things that the distance between their last known locations and POINT(-122 43) is greater than 1.</p>
</div>
<div class="paragraph">
<p><strong>Example Request 4:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Things?$expand=Datastreams/Observations/FeatureOfInterest&amp;$filter=Datastreams/Observations/FeatureOfInterest/id eq ‘FOI_1’ and Datastreams/Observations/resultTime ge 2010-06-01T00:00:00Z and Datastreams/Observations/resultTime le 2010-07-01T00:00:00Z</pre>
</div>
</div>
<div class="paragraph">
<p>returns Things that have any observations of a feature of interest with a unique identifier equals to ’FOI_1’ in June 2010.</p>
</div>
<div class="sect5">
<h6 id="_built_in_filter_operations"><a class="anchor" href="#_built_in_filter_operations"></a>9.3.3.5.1. Built-in filter operations</h6>
<div class="paragraph">
<p>The OGC SensorThings API supports a set of built-in filter operations, as described in the following table. These built-in filter operator usages and definitions follow the [<a href="http://docs.oasis-open.org/odata/odata/v4.0/errata01/os/complete/part1-protocol/odata-v4.0-errata01-os-part1-protocol-complete.html#_Toc399426798">OData Specification Section 11.2.5.1.1</a>] and [<a href="http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/abnf/odata-abnf-construction-rules.txt">OData Version 4.0 ABNF</a>].
The operator precedence is described in [<a href="http://docs.oasis-open.org/odata/odata/v4.0/csprd01/part2-url-conventions/odata-v4.0-csprd01-part2-url-conventions.html#_Toc355091904">OData Version 4.0 Part 2: URL Conventions Section 5.1.1.8</a>].</p>
</div>
<table id="req-request-data-built-in-filter-operations" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-built-in-filter-operations" class="paragraph">
<p>Req <a href="#req-request-data-built-in-filter-operations">30</a>: <a href="#requirement-request-data-built-in-filter-operations">request-data/built-in-filter-operations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The built-in filter operators SHALL be as defined in Table 22.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-built-in-filter-operations">request-data/built-in-filter-operations</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-built-in-filter-operators" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 22. Built-in Filter Operators</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 25%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Operator</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="3" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Comparison Operators</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">eq</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Equal</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/ObservedProperties?$filter=unitOfMeasurement/name eq 'degree Celsius'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">ne</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Not equal</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/ObservedProperties?$filter=unitOfMeasurement/name ne 'degree Celsius'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">gt</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Greater than</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result gt 20.0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">ge</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Greater than or equal</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result ge 20.0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">lt</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Less than</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result lt 100</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">le</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Less than or equal</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result le 100</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Logical Operators</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">and</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Logical and</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result le 3.5 and FeatureOfInterest/id eq 1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">or</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Logical or</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result gt 20 or result le 3.5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">not</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Logical negation</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Things?$filter=not startswith(description,'test')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Arithmetic Operators</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">add</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Addition</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result add 5 gt 10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">sub</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Subtraction</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result sub 5 gt 10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">mul</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Multiplication</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result mul 2 gt 2000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">div</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Division</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result div 2 gt 4</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">mod</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Modulo</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=result mod 2 eq 0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Grouping Operators</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">( )</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Precedence grouping</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>/Observations?$filter=(result sub 5) gt 10</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_built_in_query_functions"><a class="anchor" href="#_built_in_query_functions"></a>9.3.3.5.2. Built-in query functions</h6>
<div class="paragraph">
<p>The OGC SensorThings API supports a set of functions that can be used with the $filter or $orderby query operations. The following table lists the available functions and they follows the OData Canonical function definitions listed in <a href="http://docs.oasis-open.org/odata/odata/v4.0/errata01/os/complete/part2-url-conventions/odata-v4.0-errata01-os-part2-url-conventions-complete.html#_Toc395267133">Section 5.1.1.4</a> of the [OData Version 4.0 Part 2: URL Conventions] and the syntax rules for these functions are defined in [<a href="http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/abnf/odata-abnf-construction-rules.txt">OData Version 4.0 ABNF</a>].</p>
</div>
<div class="paragraph">
<p>In order to support spatial relationship functions, SensorThings API defines nine additional geospatial functions based on the spatial relationship between two geometry objects. The spatial relationship functions are defined in the OGC Simple Feature Access specification [OGC 06-104r4 part 1, clause 6.1.2.3]. The names of these nine functions start with a prefix <code>st_</code> following the OGC Simple Feature Access specification [OGC 06-104r4]. In addition, the Well-Known Text (WKT) format is the default input geometry for these nine functions.</p>
</div>
<table id="req-request-data-built-in-query-functions" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-built-in-query-functions" class="paragraph">
<p>Req <a href="#req-request-data-built-in-query-functions">31</a>: <a href="#requirement-request-data-built-in-query-functions">request-data/built-in-query-functions</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The built-in query functions SHALL be as defined in Table 23.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-built-in-query-functions">request-data/built-in-query-functions</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-built-in-query-functions" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 23. Built-in Query Functions</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Function</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><strong>String Functions</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool substringof(string p0, string p1)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>substringof('Sensor Things',description)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool endswith(string p0, string p1)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>endswith(description,'Things')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool startswith(string p0, string p1)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>startswith(description,'Sensor')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int length(string p0)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>length(description) eq 13</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int indexof(string p0, string p1)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>indexof(description,'Sensor') eq 1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">string substring(string p0, int p1)<br>
string substring(string p0, int p1, int p2)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>substring(description,1) eq 'ensor Things'</code><br>
<code>substring(description,2,4) eq 'nsor'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">string tolower(string p0)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>tolower(description) eq 'sensor things'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">string toupper(string p0)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>toupper(description) eq 'SENSOR THINGS'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">string trim(string p0)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>trim(description) eq 'Sensor Things'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">string concat(string p0, string p1)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>concat(concat(unitOfMeasurement/symbol,', '), unitOfMeasurement/name) eq 'degree, Celsius'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Date Functions</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int year</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>year(resultTime) eq 2015</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int month</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>month(resultTime) eq 12</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int day</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>day(resultTime) eq 8</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int hour</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>hour(resultTime) eq 1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int minute</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>minute(resultTime) eq 0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int second</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>second(resultTime) eq 0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int fractionalseconds</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>second(resultTime) eq 0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int date</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>date(resultTime) ne date(validTime)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">time</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>time(resultTime) le validTime</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">int totaloffsetminutes</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>totaloffsetminutes(resultTime) eq 60</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">now</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>resultTime ge now()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">mindatetime</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>resultTime eq mindatetime()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">maxdatetime</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>resultTime eq maxdatetime()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Math Functions</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">round</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>round(result) eq 32</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">floor</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>floor(result) eq 32</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">ceiling</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>ceiling(result) eq 33</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Geospatial Functions</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">double geo.distance(Point p0, Point p1)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>geo.distance(location, geography'POINT (30 10)')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">double geo.length(LineString p0)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>geo.length(geography'LINESTRING (30 10, 10 30, 40 40)')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool geo.intersects(Point p0, Polygon p1)</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>geo.intersects(location, geography'POLYGON ((30 10, 10 20, 20 40, 40 40, 30 10))')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Spatial Relationship Functions</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool st_equals</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>st_equals(location, geography'POINT (30 10)')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool st_disjoint</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>st_disjoint(location, geography'POLYGON ((30 10, 10 20, 20 40, 40 40, 30 10))')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool st_touches</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>st_touches(location, geography'LINESTRING (30 10, 10 30, 40 40)')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool st_within</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>st_within(location, geography'POLYGON ((30 10, 10 20, 20 40, 40 40, 30 10))')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool st_overlaps</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>st_overlaps(location, geography'POLYGON ((30 10, 10 20, 20 40, 40 40, 30 10))')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool st_crosses</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>st_crosses(location, geography'LINESTRING (30 10, 10 30, 40 40)')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool st_intersects</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>st_intersects(location, geography'LINESTRING (30 10, 10 30, 40 40)')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool st_contains</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>st_contains(location, geography'POINT (30 10)')</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">bool st_relate</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>st_relate(location, geography'POLYGON ((30 10, 10 20, 20 40, 40 40, 30 10))', 'T********')</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="nextLink"><a class="anchor" href="#nextLink"></a>9.3.3.6. Server-Driven Paging (nextLink)</h5>
<table id="req-request-data-pagination" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-request-data-pagination" class="paragraph">
<p>Req <a href="#req-request-data-pagination">32</a>: <a href="#requirement-request-data-pagination">request-data/pagination</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Responses that include only a partial set of the items identified by the request URL SHALL contain a link that allows retrieving the next partial set of items. This link is called a nextLink;
its representation is format-specific. The final partial set of items SHALL NOT contain a nextLink.</p>
</div>
<div class="paragraph">
<p>The nextLink annotation indicates that a response is only a subset of the requested collection of entities or collection of entity references. It contains a URL that allows retrieving the next subset of the requested collection.</p>
</div>
<div class="paragraph">
<p>SensorThings clients SHALL treat the URL of the nextLink as opaque, and SHALL NOT append system query options to the URL of a next link. Services may not allow a change of format on requests for subsequent pages using the next link.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from OData 4.0-Protocol 11.2.5.7]</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-pagination">request-data/pagination</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 25:</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://example.org/v1.1/Things</pre>
</div>
</div>
<div class="paragraph">
<p>returns a subset of the Thing entities of requested collection of Things. The nextLink contains a link allowing retrieving the next partial set of items.</p>
</div>
<div class="listingblock">
<div class="title">Example Response:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "value": [
    {…},
    {…}
  ],
  "@iot.nextLink": "http://examples.org/v1.1/Things?$top=100&amp;$skip=100"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-update-delete"><a class="anchor" href="#create-update-delete"></a>10. SensorThings Sensing Create-Update-Delete</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-create-entity">create-update-delete/create-entity</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-link-to-existing-entities">create-update-delete/link-to-existing-entities</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-deep-insert">create-update-delete/deep-insert</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-deep-insert-status-code">create-update-delete/deep-insert-status-code</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-update-entity">create-update-delete/update-entity</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-update-entity-put">create-update-delete/update-entity-put</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-update-entity-jsonpatch">create-update-delete/update-entity-jsonpatch</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-delete-entity">create-update-delete/delete-entity</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-historical-location-auto-creation">create-update-delete/historical-location-auto-creation</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#_Toc406398328</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#_Toc406398329</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="overview"><a class="anchor" href="#overview"></a>10.1. Overview</h3>
<div class="paragraph">
<p>As many IoT devices are resource-constrained, the SensorThings API adopts the efficient REST web service style. That means the Create, Update, Delete actions can be performed on the SensorThings entity types. The following subsection explains the Create, Update, and Delete protocol.</p>
</div>
</div>
<div class="sect2">
<h3 id="create-entity"><a class="anchor" href="#create-entity"></a>10.2. Create an entity</h3>
<table id="req-create-update-delete-create-entity" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-update-delete-create-entity" class="paragraph">
<p>Req <a href="#req-create-update-delete-create-entity">33</a>: <a href="#requirement-create-update-delete-create-entity">create-update-delete/create-entity</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>To create an entity in a collection, the client SHALL send a HTTP POST request to that collection&#8217;s URL. The POST body SHALL contain a single valid entity representation.</p>
</div>
<div class="paragraph">
<p>If the target URL for the collection is a navigationLink, the new entity is automatically linked to the entity containing the navigationLink.</p>
</div>
<div class="paragraph">
<p>Upon successful completion, the response SHALL contain a HTTP location header that contains the selfLink of the created entity.</p>
</div>
<div class="paragraph">
<p>Upon successful completion the service SHALL respond with either 201 Created, or 204 No Content.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from Data 4.0-Protocol, 11.4.2 Create an Entity]</pre>
</div>
</div>
<div class="paragraph">
<p>In addition, the link between entities SHALL be established upon creating an entity. Two use cases SHALL be considered: (1) link to existing entities when creating an entity, and (2) create related entities when creating an entity. The requests for these two use cases are described in the following subsection.</p>
</div>
<div class="paragraph">
<p>When clients create resources in a SensorThings service, they SHALL follow the integrity constraints listed in Table 24. For example, a Datastream entity SHALL link to a Thing entity. When a client wants to create a Datastream entity, the client needs to either (1) create a linked Thing entity in the same request or (2) link to an already created Thing entity. The complete integrity constraints for creating resources are shown in the following table.</p>
</div>
<div class="paragraph">
<p>Special case #1 - When creating an Observation entity that links to a FeatureOfInterest entity: Sometimes the FeatureOfInterest of an Observation is the Location of the Thing. For example, a wifi-connected thermostat’s temperature observation’s feature-of-interest can be the location of the smart thermostat, that is the room where the smart thermostat is located in.</p>
</div>
<div class="paragraph">
<p>In this case, when a client creates an Observation entity, the client SHOULD omit the link to a FeatureOfInterest entity in the POST body message and SHOULD not create a related FeatureOfInterest entity with deep insert. And if the service detects that there is no link to a FeatureOfInterest entity in the POST body message that creates an Observation entity, the service SHALL either (1) create a FeatureOfInterest entity by using the location property from the Location of the Thing entity when there is no FeatureOfInterest whose location property is from the Location of the Thing entity or (2) link to the FeatureOfInterest whose location property is from the Location of the Thing entity.</p>
</div>
<div class="paragraph">
<p>Special case #2: In the context of IoT, many Observations’ resultTime and phenomenonTime cannot be distinguished or the resultTime is not available. In this case, when a client creates an Observation entity, the client MAY omit the resultTime and the service SHOULD assign a null value to the resultTime.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-create-entity">create-update-delete/create-entity</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-integrity-creating-entity" class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 24. Integrity constraints when creating an entity</caption>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Scenario</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Integrity Constraints</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Create a</strong> Thing <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Create a</strong> Location <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="3" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Create a</strong> Datastream <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>SHALL link to a Thing entity.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>SHALL link to a Sensor entity</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>SHALL link to an ObservedProperty entity.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Create a</strong> Sensor <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Create an</strong> ObservedProperty <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Create an</strong> Observation <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>SHALL link to a Datastream entity.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>SHALL link to a FeatureOfInterest entity. If no link specified, the service SHALL create a FeatureOfInterest entity from the content of the Location entities.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Create a </strong>FeatureOfInterest<strong> entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_request"><a class="anchor" href="#_request"></a>10.2.1. Request</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">HTTP Method</dt>
<dd>
<p>POST</p>
</dd>
<dt class="hdlist1">URI Pattern</dt>
<dd>
<p>SERVICE_ROOT_URI/COLLECTION_NAME</p>
</dd>
<dt class="hdlist1">Header</dt>
<dd>
<p>Content-Type: application/json</p>
</dd>
<dt class="hdlist1">Message Body</dt>
<dd>
<p>A single valid entity representation for the specified collection.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Example 26: create a Thing entity</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>POST /v1.1/Things HTTP/1.1

Host: example.org/
Content-Type: application/json

{
  "name": "thermostat",
  "description":"This is a smart thermostat with WiFi communication capabilities."
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="link-existing-entities-when-creating"><a class="anchor" href="#link-existing-entities-when-creating"></a>10.2.1.1. Link to existing entities when creating an entity</h5>
<table id="req-create-update-delete-link-to-existing-entities" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-update-delete-link-to-existing-entities" class="paragraph">
<p>Req <a href="#req-create-update-delete-link-to-existing-entities">34</a>: <a href="#requirement-create-update-delete-link-to-existing-entities">create-update-delete/link-to-existing-entities</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A SensorThings API service, that supports entity creation, SHALL support linking new entities to existing entities upon creation. To create a new entity with links to existing entities in a single request, the client SHALL include the unique identifiers of the related entities associated with the corresponding navigation properties in the request body.</p>
</div>
<div class="paragraph">
<p>In the case of creating an Observation whose FeatureOfInterest is the Thing’s Location (that means the Thing entity has a related Location entity), the request of creating the Observation SHOULD NOT include a link to a FeatureOfInterest entity. The service will first automatically create a FeatureOfInterest entity from the Location of the Thing and then link to the Observation.</p>
</div>
<div class="paragraph">
<p>In the complex use case of a Thing has multiple Location representations, the service SHOULD decide the default Location encoding when an Observation’s FeatureOfInterest is the Thing’s Location.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-link-to-existing-entities">create-update-delete/link-to-existing-entities</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 27: create an Observation entity, which links to an existing Sensor entity (whose id is 1), an existing FeatureOfInterest entity (whose id is 2).</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">POST /v1.1/Observations HTTP/1.1
Host: example.org
Content-Type: application/json

{
  "Datastream": {
    "@iot.id": 1
  },
  "phenomenonTime": "2013-04-18T16:15:00-07:00",
  "result": 124,
  "FeatureOfInterest": {
    "@iot.id": 2
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="create-related-entities"><a class="anchor" href="#create-related-entities"></a>10.2.1.2. Create related entities when creating an entity</h5>
<table id="req-create-update-delete-deep-insert" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-update-delete-deep-insert" class="paragraph">
<p>Req <a href="#req-create-update-delete-deep-insert">35</a>: <a href="#requirement-create-update-delete-deep-insert">create-update-delete/deep-insert</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A request to create an entity that includes related entities, represented using the appropriate inline representation, is referred to as a "deep insert". A SensorThings service that supports entity creation SHALL support deep insert.</p>
</div>
<div class="paragraph">
<p>If the inline representation contains a value for a computed property (<em>i.e.</em>, id), the service SHALL ignore that value when creating the related entity.</p>
</div>
<div class="paragraph">
<p>On success, the service SHALL create all entities and relate them. On failure, the service SHALL NOT create any of the entities.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from Data 4.0-Protocol 11.4.2.2]</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-deep-insert">create-update-delete/deep-insert</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 28: create a Thing while creating two related Sensors and one related Observation (which links to an existing FeatureOfInterest entity and an existing ObservedProperty entity).</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">POST /v1.1/Things HTTP1.1
Host: example.org
Content-Type: application/json

{
  "description": "This an oven with a temperature datastream.",
  "name": "oven",
  "Locations": [
    {
      "name": "CCIT",
      "description": "Calgary Centre for Innovative Technologies",
      "encodingType": "application/geo+json",
      "location": {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [10,10]
        }
      }
    }
  ],
  "Datastreams": [
    {
      "name": "oven temperature",
      "description": "This is a datastream for an oven’s internal temperature.",
      "unitOfMeasurement": {
        "name": "degree Celsius",
        "symbol": "°C",
        "definition": "http://unitsofmeasure.org/ucum.html#para-30"
      },
      "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement",
      "observedArea": {
        "type": "Polygon",
        "coordinates": [[[100,0], [101,0], [101,1], [100,1], [100,0]]]
      },
      "phenomenonTime": "2009-01-11T16:22:25.00Z/2011-08-21T08:32:10.00Z",
      "Observations": [
        {
          "phenomenonTime": "2012-06-26T03:42:02-0600",
          "result": 70.4,
          "FeatureOfInterest": {
            "name": "CCIT #361",
            "description": "This is CCIT #361, Noah’s dad’s office",
            "encodingType": "application/geo+json",
            "feature": {
              "type": "Feature",
              "geometry": {
                "type": "Polygon",
                "coordinates": [
                  [[100,50], [10,9], [23,4], [100,50]], [[30,20], [10,4], [4,22], [30,20]]
                ]
              }
            }
          }
        }
      ],
      "ObservedProperty": {
        "name": "DewPoint Temperature",
        "definition": "http://sweet.jpl.nasa.gov/ontology/property.owl#DewPointTemperature",
        "description": "The dewpoint temperature is the temperature to which the air
                        must be cooled, at constant pressure, for dew to form. As
                        the grass and other objects near the ground cool to the
                        dewpoint, some of the water vapor in the atmosphere
                        condenses into liquid water on the objects."
      },
      "Sensor": {
        "name": "DS18B20",
        "description": "DS18B20 is an air temperature sensor…",
        "encodingType": "application/pdf",
        "metadata": "http://datasheets.maxim-ic.com/en/ds/DS18B20.pdf"
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response"><a class="anchor" href="#_response"></a>10.2.2. Response</h4>
<table id="req-create-update-delete-deep-insert-status-code" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-update-delete-deep-insert-status-code" class="paragraph">
<p>Req <a href="#req-create-update-delete-deep-insert-status-code">36</a>: <a href="#requirement-create-update-delete-deep-insert-status-code">create-update-delete/deep-insert-status-code</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Upon successfully creating an entity, the service response SHALL contain a Location header that contains the URL of the created entity. Upon successful completion the service SHALL respond with 201 Created. Regarding all the HTTP status code, please refer to the HTTP Status Code section.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-deep-insert-status-code">create-update-delete/deep-insert-status-code</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="update-entity"><a class="anchor" href="#update-entity"></a>10.3. Update an entity</h3>
<table id="req-create-update-delete-update-entity" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-update-delete-update-entity" class="paragraph">
<p>Req <a href="#req-create-update-delete-update-entity">37</a>: <a href="#requirement-create-update-delete-update-entity">create-update-delete/update-entity</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>To update an entity in a collection a SensorThings service SHALL follow the requirements as defined in <a href="#update-entity">Section 10.3</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-update-entity">create-update-delete/update-entity</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-create-update-delete-update-entity-put" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-update-delete-update-entity-put" class="paragraph">
<p>Req <a href="#req-create-update-delete-update-entity-put">47</a>: <a href="#requirement-create-update-delete-update-entity-put">create-update-delete/update-entity-put</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A SensorThings service that supports updates with PUT SHALL follow the requirements as defined in <a href="#update-entity">Section 10.3</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/<a href="#requirement-create-update-delete-update-entity-put">create-update-delete/update-entity-put</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-create-update-delete-update-entity-jsonpatch" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-update-delete-update-entity-jsonpatch" class="paragraph">
<p>Req <a href="#req-create-update-delete-update-entity-jsonpatch">48</a>: <a href="#requirement-create-update-delete-update-entity-jsonpatch">create-update-delete/update-entity-jsonpatch</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A SensorThings service that supports updates with the JSON PATCH format SHALL follow the requirements as defined in <a href="#update-entity">Section 10.3</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.0/req/<a href="#requirement-create-update-delete-update-entity-jsonpatch">create-update-delete/update-entity-jsonpatch</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_request_2"><a class="anchor" href="#_request_2"></a>10.3.1. Request</h4>
<div class="paragraph">
<p>In SensorThings PATCH is the preferred means of updating an entity. PATCH provides more resiliency between clients and services by directly modifying only those values specified by the client.</p>
</div>
<div class="paragraph">
<p>The semantics of PATCH, as defined in [<a href="http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#RFC5789">RFC5789</a>], are to merge the content in the request payload with the entity’s current state, applying the update only to those components specified in the request body. The properties provided in the payload corresponding to updatable properties SHALL replace the value of the corresponding property in the entity. Missing properties of the containing entity or complex property SHALL NOT be directly altered.</p>
</div>
<div class="paragraph">
<p>Services MAY additionally support PUT, but should be aware of the potential for data-loss in round-tripping properties that the client may not know about in advance, such as open or added properties, or properties not specified in metadata. Services that do not support PUT SHALL respond with an HTTP code 501 Not Implemented.</p>
</div>
<div class="paragraph">
<p>Services that support PUT SHALL replace all values of structural properties with those specified in the request body. Omitting a non-nullable property with no service-generated or default value from a PUT request results in a 400 Bad Request error.</p>
</div>
<div class="paragraph">
<p>Key and other non-updatable properties that are not tied to key properties of the principal entity, can be omitted from the request. If the request contains a value for one of these properties, the service SHALL ignore that value when applying the update.</p>
</div>
<div class="paragraph">
<p>The service ignores the entity id in the payload when applying the update.</p>
</div>
<div class="paragraph">
<p>The entity SHALL NOT contain related entities as inline content. It MAY contain binding information for navigation properties. For single-valued navigation properties this replaces the relationship. For collection-valued navigation properties this adds to the relationship.</p>
</div>
<div class="paragraph">
<p>On success, the response SHALL be a valid success response.</p>
</div>
<div class="paragraph">
<p>Services MAY additionally support JSON PATCH format [RFC6902] to express a sequence of operations to apply to a SensorThings entity.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from OData 4.0-Protocol 11.4.3]</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">HTTP Method</dt>
<dd>
<p>PATCH or PUT</p>
</dd>
<dt class="hdlist1">URI Pattern</dt>
<dd>
<p>An URI addressing to a single entity.</p>
</dd>
<dt class="hdlist1">Header</dt>
<dd>
<p>Content-Type: application/json</p>
</dd>
<dt class="hdlist1">Message Body</dt>
<dd>
<p>A single entity representation including a subset of properties for the specified collection.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Example 29: update the Thing whose id is 1.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>PATCH /v1.1/Things(1) HTTP1.1
Host: example.org
Content-Type: application/json

{
  "description":"This thing is an oven."
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_2"><a class="anchor" href="#_response_2"></a>10.3.2. Response</h4>
<div class="paragraph">
<p>On success, the response SHALL be a valid success response. In addition, when the client sends an update request to a valid URL where an entity does not exist, the service SHALL fail the request.</p>
</div>
<div class="paragraph">
<p>Upon successful completion, the service must respond with 200 OK or 204 No Content. Regarding all the HTTP status code, please refer to the HTTP Status Code section.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="delete-entity"><a class="anchor" href="#delete-entity"></a>10.4. Delete an entity</h3>
<table id="req-create-update-delete-delete-entity" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-update-delete-delete-entity" class="paragraph">
<p>Req <a href="#req-create-update-delete-delete-entity">38</a>: <a href="#requirement-create-update-delete-delete-entity">create-update-delete/delete-entity</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>To delete an entity in a collection a SensorThings service SHALL follow the requirements as defined in <a href="#delete-entity">Section 10.4</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-delete-entity">create-update-delete/delete-entity</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_request_3"><a class="anchor" href="#_request_3"></a>10.4.1. Request</h4>
<div class="paragraph">
<p>A successful DELETE request to an entity’s edit URL deletes the entity. The request body SHOULD be empty.</p>
</div>
<div class="paragraph">
<p>Services SHALL implicitly remove relations to and from an entity when deleting it; clients need not delete the relations explicitly.</p>
</div>
<div class="paragraph">
<p>Services MAY implicitly delete or modify related entities if required by integrity constraints. <a href="#tab-integrity-deleting">Table 25</a> lists SensorThings API’s integrity constraints when deleting an entity.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">HTTP Method</dt>
<dd>
<p>DELETE</p>
</dd>
<dt class="hdlist1">URI Pattern</dt>
<dd>
<p>An URI addressing to a single entity.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Example 30: delete the Thing with unique identifier equals to 1</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>DELETE http://example.org/v1.1/Things(1)</code></pre>
</div>
</div>
<table id="tab-integrity-deleting" class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 25. Integrity constraints when deleting an entity</caption>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Scenario</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Integrity Constraints</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Delete a</strong> Thing <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Delete all the Datastream and HistoricalLocation entities linked to the Thing entity.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Delete a</strong> Location <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Delete all the HistoricalLocation entities linked to the Location entity</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Delete a</strong> Datastream <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Delete all the Observation entities linked to the Datastream entity.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Delete a</strong> Sensor <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Delete all the Datastream entities linked to the Sensor entity.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Delete an</strong> ObservedProperty <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Delete all the Datastream entities linked to the ObservedProperty entity.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Delete an</strong> Observation <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Delete a</strong> FeatureOfInterest <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Delete all the Observation entities linked to the FeatureOfInterest entity.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Delete a</strong> HistoricalLocation entity <strong>entity</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="batch-requests"><a class="anchor" href="#batch-requests"></a>11. Batch Requests</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/batch-request</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-batch-request-batch-request">batch-request/batch-request</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#_Toc406398359</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-batch-request-batch-request" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-batch-request-batch-request" class="paragraph">
<p>Req <a href="#req-batch-request-batch-request">39</a>: <a href="#requirement-batch-request-batch-request">batch-request/batch-request</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The batch-processing of the SensorThings service SHALL be as defined in <a href="#batch-requests">Chapter 11</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-batch-request-batch-request">batch-request/batch-request</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="introduction"><a class="anchor" href="#introduction"></a>11.1. Introduction</h3>
<div class="paragraph">
<p>The SensorThings service interface provides interfaces for users to perform CRUD actions on resources through different HTTP methods. However, as many IoT devices are resource-constrained, handling a large number of communications may not be practical. This section describes how a SensorThings service can support executing multiple operations sent in a single HTTP request through the use of batch processing. This section covers both how batch operations are represented and processed. SensorThings batch request extension is adapted from [OData 4.0 Protocol 11.7]
and all subsections. The only difference is that the OData-Version header SHOULD be omitted in SensorThings. Readers are encouraged to read the OData specification section 11.7 before reading the examples below.</p>
</div>
</div>
<div class="sect2">
<h3 id="batch-processing"><a class="anchor" href="#batch-processing"></a>11.2. Batch-processing request</h3>
<div class="paragraph">
<p>A batch request is represented as a Multipart MIME v1.0 message [RFC2046], a standard format allowing the representation of multiple parts, each of which may have a different content type, within a single request.</p>
</div>
<div class="paragraph">
<p>The example below shows a GUID as a boundary and example.org/v1.1/ for the URI of the service.</p>
</div>
<div class="paragraph">
<p>Batch requests are submitted as a single HTTP POST request to the batch endpoint of a service, located at the URL $batch relative to the service root (e.g., example.org/v1.1/$batch).</p>
</div>
<div class="paragraph">
<p>Note: In the example, request bodies are excluded in favor of English descriptions inside <code>&lt;&gt;</code> brackets to simplify the example.</p>
</div>
<div class="paragraph">
<p><strong>Example 31-1:</strong> A Batch Request header example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>POST /v1.1/$batch HTTP/1.1
Host: example.org
Content-Type: multipart/mixed;boundary=batch_36522ad7-fc75-4b56-8c71-56071383e77b

&lt;BATCH_REQUEST_BODY&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: The batch request boundary must be quoted if it contains any of the following special characters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>  ( ) &lt; &gt; @
  , ; :  / " [ ] ? =</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="batch-request-example"><a class="anchor" href="#batch-request-example"></a>11.2.1. Batch request body example</h4>
<div class="paragraph">
<p>The following example shows a Batch Request that contains the following operations in the order listed</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A query request</p>
</li>
<li>
<p>Change Set that contains the following requests:</p>
</li>
<li>
<p>Insert entity (with Content-ID = 1)</p>
</li>
<li>
<p>Update request (with Content-ID = 2)</p>
</li>
<li>
<p>A second query request</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note: For brevity, in the example, request bodies are excluded in favor of English descriptions inside &lt;&gt; brackets.</p>
</div>
<div class="paragraph">
<p>Note also that the two empty lines after the Host header of the GET request are necessary: the first is part of the GET request header; the second is the empty body of the GET request, followed by a CRLF according to [RFC2046].</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Adapted from OData 4.0 Protocol 11.7.2]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 31-2:</strong> a Batch Request body example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>POST /v1.1/$batch HTTP/1.1
Host: host
Content-Type: multipart/mixed;boundary=batch_36522ad7-fc75-4b56-8c71-56071383e77b
Content-Length: ###

--batch_36522ad7-fc75-4b56-8c71-56071383e77b
Content-Type: application/http

GET /v1.1/Things(1)
Host: host


--batch_36522ad7-fc75-4b56-8c71-56071383e77b
Content-Type: multipart/mixed;boundary=changeset_77162fcd-b8da-41ac-a9f8-9357efbbd

--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd

Content-Type: application/http

Content-ID: 1

POST /v1.1/Things HTTP/1.1
Host: host
Content-Type: application/json

Content-Length: ###

&lt;JSON representation of a new Thing&gt;
--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd

Content-Type: application/http

Content-ID: 2

PATCH /v1.1/Things(1) HTTP/1.1

Host: host
Content-Type: application/json

Content-Length: ###

&lt;JSON representation of Things(1)&gt;
--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd--
--batch_36522ad7-fc75-4b56-8c71-56071383e77b

Content-Type: application/http

GET /v1.1/Things(3) HTTP/1.1
Host: host


--batch_36522ad7-fc75-4b56-8c71-56071383e77b--</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="referencing-new-entities-in-change-set"><a class="anchor" href="#referencing-new-entities-in-change-set"></a>11.2.2. Referencing new entities in a change set example</h4>
<div class="paragraph">
<p>Create and update actions inside a change set can reference entities previously created inside the same change set.
To make a created entity referenceable, the POST that creates the entity must have a Content-ID header, the content of which can be any string.
Subsequent requests in the same change set can now use the value of this header, prefixed with a <code>$</code>, in places where the ID of the created entity is required.
To ensure valid JSON, the resulting value will have to be encoded as a string.</p>
</div>
<div class="paragraph">
<p><strong>Example 31-3:</strong> A Batch Request that contains the following operations in the order listed:</p>
</div>
<div class="paragraph">
<p>A batch request, containing a single change set that contains the following requests:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Insert a new Sensor entity (with <code>Content-ID = sensor1</code>)</p>
</li>
<li>
<p>Insert a new Datastream entity, referencing the previously created Sensor entity as <code>"$sensor1"</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>POST /v1.1/$batch HTTP/1.1
Host: host
Content-Type: multipart/mixed;boundary=batch_36522ad7-fc75-4b56-8c71-56071383e77b

--batch_36522ad7-fc75-4b56-8c71-56071383e77b
Content-Type: multipart/mixed;boundary=changeset_77162fcd-b8da-41ac-a9f8-9357efbbd

--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd
Content-Type: application/http
Content-ID: sensor1

POST /v1.1/Sensors HTTP/1.1
Host: host
Content-Type: application/json
Content-Length: ###

{
  "name": "DS18B20",
  "description": "DS18B20 is an air temperature sensor",
  "encodingType": "application/pdf",
  "metadata": "http://datasheets.maxim-ic.com/en/ds/DS18B20.pdf"
}
--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd
Content-Type: application/http

POST /v1.1/Things(5)/Datastreams HTTP/1.1
Host: host
Content-Type: application/json
Content-Length: ###

{
  "name": "Temperature Thing 5",
  "description": "The temperature of thing 5",
  "ObservedProperty: {"@iot.id": 12},
  "Sensor": {"@iot.id": "$sensor1"}
}
--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd--
--batch_36522ad7-fc75-4b56-8c71-56071383e77b--</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="batch-processing-response"><a class="anchor" href="#batch-processing-response"></a>11.3. Batch-processing response</h3>
<div class="paragraph">
<p><strong>Example 31-4:</strong> referencing the batch request Example 31-2 above, assume all the requests except the final query request succeed. In this case the response would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">HTTP/1.1
200 Ok
Content-Length: ####
Content-Type: multipart/mixed;boundary=b_243234_25424_ef_892u748

--b_243234_25424_ef_892u748
Content-Type: application/http

HTTP/1.1 200 Ok
Content-Type: application/json
Content-Length: ###

&lt;JSON representation of the Thing entity with id = 1&gt;
--b_243234_25424_ef_892u748
Content-Type: multipart/mixed;boundary=cs_12u7hdkin252452345eknd_383673037

--cs_12u7hdkin252452345eknd_383673037
Content-Type: application/http
Content-ID: 1

HTTP/1.1 201 Created
Content-Type: application/json
Location: http://host/v1.1/Things(99)
Content-Length: ###

&lt;JSON representation of a new Thing entity&gt;

--cs_12u7hdkin252452345eknd_383673037
Content-Type: application/http
Content-ID: 2

HTTP/1.1 204 No Content
Host: host


--cs_12u7hdkin252452345eknd_383673037--
--b_243234_25424_ef_892u748
Content-Type: application/http

HTTP/1.1 404 Not Found
Content-Type: application/json
Content-Length: ###

&lt;Error message&gt;
--b_243234_25424_ef_892u748--</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="asynchronous-batch-requests"><a class="anchor" href="#asynchronous-batch-requests"></a>11.4. Asynchronous batch requests</h3>
<div class="paragraph">
<p><strong>Example 31-5:</strong> referencing the Example 31-2 above again, assume that when interrogating the monitor URL for the first time only the first request in the batch finished processing and all the remaining requests except the final query request succeed. In this case the response would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">HTTP/1.1 200 Ok
Content-Length: ####
Content-Type: multipart/mixed;boundary=b_243234_25424_ef_892u748

--b_243234_25424_ef_892u748
Content-Type: application/http

HTTP/1.1 200 Ok
Content-Type: application/json
Content-Length: ###

&lt;JSON representation of the Thing entity with id = 1&gt;
--b_243234_25424_ef_892u748
Content-Type: application/http

HTTP/1.1 202 Accepted
Location: http://service-root/async-monitor
Retry-After: ###


--b_243234_25424_ef_892u748--</code></pre>
</div>
</div>
<div class="paragraph">
<p>Client makes a second request using the returned monitor URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">HTTP/1.1 200 Ok
Content-Length: ####
Content-Type: multipart/mixed;boundary=b_243234_25424_ef_892u748

--b_243234_25424_ef_892u748
Content-Type: multipart/mixed;boundary=cs_12u7hdkin252452345eknd_383673037

--cs_12u7hdkin252452345eknd_383673037
Content-Type: application/http
Content-ID: 1

HTTP/1.1 201 Created
Content-Type: application/json
Location: http://host/v1.1/Things(99)
Content-Length: ###

&lt;JSON representation of a new Thing entity&gt;
--cs_12u7hdkin252452345eknd_383673037
Content-Type: application/http
Content-ID: 2

HTTP/1.1 204 No Content
Host: host


--cs_12u7hdkin252452345eknd_383673037--
--b_243234_25424_ef_892u748
Content-Type: application/http

HTTP/1.1 404 Not Found
Content-Type: application/json
Content-Length: ###

&lt;Error message&gt;
--b_243234_25424_ef_892u748—</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multidatastream-extension"><a class="anchor" href="#multidatastream-extension"></a>12. SensorThings MultiDatastream extension</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/multi-datastream</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-multi-datastream-properties">multi-datastream/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-multi-datastream-relations">multi-datastream/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-multi-datastream-constraints">multi-datastream/constraints</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Observation results may have many data types, including primitive types like category or measure, but also more complex types such as time, location and geometry [OGC 10-004r3 and ISO 19156:2011]. SensorThings’ MultiDatastream entity is an extension to handle complex observations when the result is an array.</p>
</div>
<div class="paragraph">
<p>A MultiDatastream groups a collection of Observations and the Observations in a MultiDatastream have a complex result type.</p>
</div>
<div class="paragraph">
<p>The MultiDatastream extension entities are depicted in <a href="#fig-sensing-entities-multi">Figure 3</a>.</p>
</div>
<div id="fig-sensing-entities-multi" class="imageblock text-center">
<div class="content">
<img src="images/SensingEntitiesMultiDatastream.png" alt="MultiDatastream Extension Entities">
</div>
<div class="title">Figure 3. MultiDatastream Extension Entities</div>
</div>
<table id="req-multi-datastream-properties" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-multi-datastream-properties" class="paragraph">
<p>Req <a href="#req-multi-datastream-properties">40</a>: <a href="#requirement-multi-datastream-properties">multi-datastream/properties</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each MultiDatastream entity SHALL have the mandatory properties and MAY have the optional properties listed in <a href="#tab-properties-multidatastream">Table 26</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-multi-datastream-properties">multi-datastream/properties</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-multi-datastream-relations" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-multi-datastream-relations" class="paragraph">
<p>Req <a href="#req-multi-datastream-relations">41</a>: <a href="#requirement-multi-datastream-relations">multi-datastream/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Each MultiDatastream entity SHALL have the direct relation between a MultiDatastream entity and other entity types listed in <a href="#tab-relation-multidatastream">Table 27</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-multi-datastream-relations">multi-datastream/relations</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-properties-multidatastream" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 26. Properties of a MultiDatastream entity</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>name</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A property provides a label for Datastream entity, commonly a descriptive name.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>description</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The description of the Datastream entity.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>CharacterString</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>unitOfMeasurements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON array of JSON objects that containing three key-value pairs. The name property presents the full name of the unitOfMeasurement; the symbol property shows the textual form of the unit symbol; and the definition contains the URI defining the unitOfMeasurement. (see Req 42 for the constraints between unitOfMeasurement, multiObservationDataType and result)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON array</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div>
<div class="paragraph">
<p>Note: It is possible an observation does not have a unit of measurement. For example, a count observation does not have a unit of measurement.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>observationType</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The type of Observation (with unique result type), which is used by the service to encode observations.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>ValueCode and its value SHALL be OM_ComplexObservation.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>multiObservationDataTypes</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>This property defines the observationType of each element of the result of a complex Observation.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON array of ValueCode. See Table 12 for the available ValueCodes.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One<br>
(mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>properties</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON Object containing user-annotated properties as key-value pairs.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Object</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>observedArea</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The spatial bounding box of the spatial extent of all FeatureOfInterests that belong to the Observations associated with this MultiDatastream.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>GM_Envelope (GeoJSON Polygon)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>phenomenonTime</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The temporal interval of the phenomenon times of all observations belonging to this MultiDatastream.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>TM_Period (ISO 8601 Time Interval)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>resultTime</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The temporal interval of the result times of all observations belonging to this MultiDatastream.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>TM_Period (ISO 8601 Time Interval)</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Zero-to-one</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-relation-multidatastream" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 27. Direct relation between a MultiDatastream entity and other entity types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Entity type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Relation</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Thing</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to one mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A Thing has zero-to-many MultiDatastream. A MultiDatastream entity SHALL only link to a Thing as a collection of Observations.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Sensor</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to one mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The Observations in a MultiDatastream are performed by one-and-only-one Sensor. One Sensor MAY produce zero-to-many Observations in different MultiDatastreams.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>ObservedProperty</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to many mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The Observations of a MultiDatastream SHALL observe the same ObservedProperties entity set.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Observation</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One mandatory to many optional</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A MultiDatastream has zero-to-many Observations. One Observation SHALL occur in one-and-only-one MultiDatastream.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="tab-relation-multidatastream-observation" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 28. Direct relation between an MultiDatastream’s Observation entity and other entity types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Entity type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Relation</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>MultiDatastream</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to one mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A MultiDatastream can have zero-to-many Observations. One Observation SHALL occur in one-and-only-one MultiDatastream.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>FeatureOfInterest</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Many optional to one mandatory</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>An Observation observes on one-and-only-one FeatureOfInterst. One FeatureOfInterest could be observed by one-to-many Observations.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-multi-datastream-constraints" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-multi-datastream-constraints" class="paragraph">
<p>Req <a href="#req-multi-datastream-constraints">42</a>: <a href="#requirement-multi-datastream-constraints">multi-datastream/constraints</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The size and the order of each element of a MultiDatastream’s unitOfMeasurements array (<em>i.e.</em>, MultiDatastream(id)/unitOfMeasurements) SHALL match the size and the order of each element of the related ObservedProperties collection (<em>i.e.</em>, MultiDatastreams(id)/ObservedProperties).</p>
</div>
<div class="paragraph">
<p>The size and the order of each element of a MultiDatastream’s unitOfMeasurements array (<em>i.e.</em>, MultiDatastreams(id)/unitOfMeasurements) SHALL match the size and the order of each element of all related Observations’ result (<em>i.e.</em>, MultiDatastreams(id)/Observations?$select=result).</p>
</div>
<div class="paragraph">
<p>The size and the order of each element of a MultiDatastream’s unitOfMeasurements array (<em>i.e.</em>, MultiDatastreams(id)/unitOfMeasurements) SHALL match the size and the order of each element of the MultiDatastream’s multiObservationDataTypes array (<em>i.e.</em>, MultiDatastreams(id)/multiObservationDataTypes).</p>
</div>
<div class="paragraph">
<p>When a complex result’s element does not have a unit of measurement (e.g., a OM_TruthObservation type), the corresponding unitOfMeasurement element SHALL have null values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-multi-datastream-constraints">multi-datastream/constraints</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 32: MultiDatastream entity example 1</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json"> {
  "@iot.id": 1,
  "@iot.selfLink": "http://example.org/v1.1/MultiDatastreams(1)",
  "Thing@iot.navigationLink": "MultiDatastreams(1)/Thing",
  "Sensor@iot.navigationLink": "MultiDatastreams(1)/Sensor",
  "ObservedProperty@iot.navigationLink": "MultiDatastreams(1)/ObservedProperties",
  "Observations@iot.navigationLink": "MultiDatastreams/Observations",
  "name": "temperature, RH, visibility",
  "description": "This is a MultiDatastream from a simple weather station measuring air temperature, relative humidity and visibility",
  "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_ComplexObservation",
  "multiObservationDataTypes": [
    "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement",
    "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement",
    "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_CategoryObservation"
  ],
  "unitOfMeasurements": [
    {
      "name": "degree Celsius",
      "symbol": "°C",
      "definition": "http://unitsofmeasure.org/ucum.html#para-30"
    },
    {
      "name": "percent",
      "symbol": "%",
      "definition": "http://unitsofmeasure.org/ucum.html#para-29"
    },
    {
      "name": "null",
      "symbol": "null",
      "definition": "null"
    }
  ],
  "observedArea": {
    "type": "Polygon",
    "coordinates": [
      [
        [100, 0], [101, 0], [101, 1], [100, 1], [100, 0]
      ]
    ]
  },
  "phenomenonTime": "2014-03-01T13:00:00Z/2015-05-11T15:30:00Z",
  "resultTime": "2014-03-01T13:00:00Z/2015-05-11T15:30:00Z"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 33: an example ObservedProperties collection of the above MultiDatastream: Please note that the order of the elements in the value array match the order of the related Observations/result array as well as the order of the related unitOfMeasurements array.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "value": [
    {
      "@iot.id": 1,
      "@iot.selfLink": "http://example.org/v1.1/ObservedProperties(1)",
      "Datastreams@iot.navigationLink": "ObservedProperties(1)/Datastreams",
      "MultiDatastreams@iot.navigationLink": "ObservedProperties(1)/ MultiDatastreams",
      "description": "The dew point is the temperature at which the water vapor in a sample
                      of air at constant barometric pressure condenses into liquid water at the
                      same rate at which it evaporates. At temperatures below the dew point, water
                      will leave the air.",
      "name": "Dew point temperature"
    },
    {
      "@iot.id ": 2,
      "@iot.selfLink": "http://example.org/v1.1/ObservedProperties(2)",
      "Datastreams@iot.navigationLink": "ObservedProperties(2)/Datastreams",
      "MultiDatastreams@iot.navigationLink": "ObservedProperties(2)/ MultiDatastreams",
      "description": "Relative humidity (abbreviated RH) is the ratio of the partial pressure
                      of water vapor to the equilibrium vapor pressure of water at the same
                      temperature.",
      "name": "Relative Humidity"
    },
    {
      "@iot.id": 3,
      "@iot.selfLink": "http://example.org/v1.1/ObservedProperties(3)",
      "Datastreams@iot.navigationLink": "ObservedProperties(3)/Datastreams",
      "MultiDatastreams@iot.navigationLink": "ObservedProperties(3)/MultiDatastreams",
      "description": "Visibility is a measure of the distance at which an object or light can
                      be clearly discerned. ",
      "name": "Visibility (Weather)"
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 34: an example Observation of the above MultiDatastream: Please note that the order of the elements in the result array match (1) the order of the related ObservedProperties (<em>i.e.</em>, Observation(id)/MultiDatastreams(id)/ObservedProperties ), (2) the order of the related unitOfMeasurements array (<em>i.e.</em>, Observation(id)/ MultiDatastream(id)/unitOfMeasurements ) and (3) the order of the related multiObservationDataTypes (<em>i.e.</em>, Observation(id)/MultiDatastream(id)/multiObservationDataTypes).</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "@iot.id": 1,
  "@iot.selfLink": "http://example.org/v1.1/Observations(1)",
  "FeatureOfInterest@iot.navigationLink": "Observations(1)/FeatureOfInterest",
  "MultiDatastream@iot.navigationLink": "Observations(1)/MultiDatastream",
  "phenomenonTime": "2014-12-31T11:59:59.00+08:00",
  "resultTime": "2014-12-31T11:59:59.00+08:00",
  "result": [
    25,
    65,
    "clear"
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-array-extension"><a class="anchor" href="#data-array-extension"></a>13. SensorThings Data Array Extension</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/data-array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-data-array-data-array">data-array/data-array</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-data-array-data-array" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-data-array-data-array" class="paragraph">
<p>Req <a href="#req-data-array-data-array">43</a>: <a href="#requirement-data-array-data-array">data-array/data-array</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>To support the SensorThings data array extension, a service SHALL support the retrieval and creation of observations as defined in <a href="#data-array-extension">Chapter 13</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-data-array-data-array">data-array/data-array</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Similar to the SWE DataArray in the OGC SOS, SensorThings API also provides the support of dataArray (in addition to formatting every observation entity as a JSON object) to aggregate multiple Observation entities and reduce the request (e.g., POST) and response (e.g., GET) size. SensorThings mainly use dataArray in two scenarios: (1) get Observation entities in dataArray, and (2) create Observation entities with dataArray.</p>
</div>
<div class="sect2">
<h3 id="retrieve-observation-dataarray"><a class="anchor" href="#retrieve-observation-dataarray"></a>13.1. Retrieve a Datastream’s Observation entities in dataArray</h3>
<div class="paragraph">
<p>In SensorThings services, users are able to request for multiple Observation entities and format the entities in the dataArray format. When a SensorThings service returns a dataArray response, the service groups Observation entities by Datastream or MultiDatastream, which means the Observation entities that link to the same Datastream or the same MultiDatastream are aggregated in one dataArray.</p>
</div>
<div class="sect3">
<h4 id="_request_4"><a class="anchor" href="#_request_4"></a>13.1.1. Request</h4>
<div class="paragraph">
<p>In order to request for dataArray, users must include the query option <code>$resultFormat=dataArray</code> when requesting Observation entities.
For example, <code>http://example.org/v1.1/Observations?$resultFormat=dataArray</code>.
The query options <code>$select</code>, <code>$top</code>, <code>$skip</code>, <code>$count</code> and <code>$orderby</code> work the same as they would with a non-dataArray request, only the formatting of the result is different, as the Observations are grouped by (Multi)Datastream.
The result can contain <code>@iot.count</code> and <code>@iot.nextLink</code> fields just like with normal requests for Observations.
The <code>$expand</code> query parameter is not allowed for dataArray requests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_response_3"><a class="anchor" href="#_response_3"></a>13.1.2. Response</h4>
<div class="paragraph">
<p>The response Observations in dataArray format contains the following properties.</p>
</div>
<table id="properties-getting-observation-dataarray" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 29. Properties of getting Observation entities in dataArray</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Datastream or MultiDatastream</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The navigationLink of the Datastream or the MultiDatastream entity used to group Observation entities in the dataArray.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>navigationLink</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>components</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>An ordered array of Observation property names whose matched values are included in the dataArray.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>An ordered array of Observation property names</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>dataArray</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON Array containing Observation entities. Each Observation entity is represented by the ordered property values, which match with the ordered property names in components.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Array</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 35: an example of getting Observation entities from a Datastream in dataArray result format:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">GET /v1.1/Datastreams(1)/Observations?$resultFormat=dataArray
HTTP/1.1 200 OK
Host: www.example.org
Content-Type: application/json

{
  "@iot.nextLink": "http://example.org/v1.1/Datastreams(1)/Observations?$resultFormat=dataArray&amp;$skip=3",
  "@iot.count": 42,
  "value": [
    {
      "Datastream@iot.navigationLink": "http://example.org/v1.1/Datastreams(1)",
      "components": [
        "id",
        "phenomenonTime",
        "resultTime",
        "result"
      ],
      "dataArray": [
        [
          1,
          "2005-08-05T12:21:13Z",
          "2005-08-05T12:21:13Z",
          20
        ],
        [
          2,
          "2005-08-05T12:22:08Z",
          "2005-08-05T12:21:13Z",
          30
        ],
        [
          3,
          "2005-08-05T12:22:54Z",
          "2005-08-05T12:21:13Z",
          0
        ]
      ]
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 36: an example of getting Observation entities from a MultiDatastream in dataArray result format</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">GET /v1.1/MultiDatastreams(1)/Observations?$resultFormat=dataArray
HTTP/1.1 200 OK
Host: www.example.org
Content-Type: **application/json

{
  "@iot.nextLink": "http://example.org/v1.1/MultiDatastreams(1)/Observations?$resultFormat=dataArray&amp;$skip=3",
  "@iot.count": 42,
  "value": [
    {
      "MultiDatastream@iot.navigationLink": "http://example.org/v1.1/MultiDatastreams(1)",
      "components": [
        "id",
        "phenomenonTime",
        "resultTime",
        "result"
      ],
      "dataArray": [
        [
          1,
          "2010-12-23T11:20:00-0700",
          "2010-12-23T11:20:00-0700",
          [
            10.2,
            65,
            "clear"
          ]
        ],
        [
          2,
          "2010-12-23T11:22:08-0700",
          "2010-12-23T11:20:00-0700",
          [
            11.3,
            63,
            "clear"
          ]
        ],
        [
          3,
          "2010-12-23T11:22:54-0700",
          "2010-12-23T11:20:00-0700",
          [
            9.8,
            67,
            "clear"
          ]
        ]
      ]
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-observation-dataarray"><a class="anchor" href="#create-observation-dataarray"></a>13.2. Create Observation entities with dataArray</h3>
<div class="paragraph">
<p>Besides creating Observation entities one by one with multiple HTTP POST requests, there is a need to create multiple Observation entities with a lighter message body in a single HTTP request. In this case, a sensing system can buffer multiple Observations and send them to a SensorThings service in one HTTP request. Here we propose an Action operation CreateObservations.</p>
</div>
<div class="sect3">
<h4 id="_request_5"><a class="anchor" href="#_request_5"></a>13.2.1. Request</h4>
<div class="paragraph">
<p>Users can invoke the CreateObservations action by sending a HTTP POST request to the SERVICE_ROOT_URL/CreateObservations.</p>
</div>
<div class="paragraph">
<p>For example, <a href="http://example.org/v1.1/CreateObservations" class="bare">http://example.org/v1.1/CreateObservations</a>.</p>
</div>
<div class="paragraph">
<p>The message body aggregates Observations by Datastreams, which means all the Observations linked to one Datastream SHALL be aggregated in one JSON object. The parameters of each JSON object are shown in the following table.</p>
</div>
<div class="paragraph">
<p>As an Observation links to one FeatureOfInterest, to establish the link between an Observation and a FeatureOfInterest, users should include the FeatureOfInterest ids in the dataArray. If no FeatureOfInterest id presented, the FeatureOfInterest will be created based on the Location entities of the linked Thing entity by default.</p>
</div>
<table id="properties-creating-observation-dataarray" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 30. Properties of creating Observation entities with dataArray</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 45%;">
<col style="width: 20%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Data type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Multiplicity and use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Datastream</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The unique identifier of the Datasteam linking to the group of Observation entities in the dataArray.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>The unique identifier of a Datastream</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>components</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>An ordered array of Observation property names whose matched values are included in the dataArray. At least the phenomenonTime and result properties SHALL be included. To establish the link between an Observation and a FeatureOfInterest, the component name is "FeatureOfInterest/id" and the FeatureOfInterest ids should be included in the dataArray array. If no FeatureOfInterest id is presented, the FeatureOfInterest will be created based on the Location entities of the linked Thing entity by default.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>An ordered array of Observation property names</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>dataArray</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A JSON Array containing Observations. Each Observation is represented by the ordered property values. The ordered property values match with the ordered property names in components.</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>JSON Array</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>One (mandatory)</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example 37: example of a request for creating Observation entities in dataArray</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>POST /v1.1/CreateObservations HTTP/1.1
Host: example.org/
Content-Type: application/json

[
  {
    "Datastream": {
      "@iot.id": 1
    },
    "components": [
      "phenomenonTime",
      "result",
      "FeatureOfInterest/id"
    ],
    "dataArray": [
      [
        "2010-12-23T10:20:00-0700",
        20,
        1
      ],
      [
        "2010-12-23T10:21:00-0700",
        30,
        1
      ]
    ]
  },
  {
    "Datastream": {
      "@iot.id": 2
    },
    "components": [
      "phenomenonTime",
      "result",
      "FeatureOfInterest/id"
    ],
    "dataArray": [
      [
        "2010-12-23T10:20:00-0700",
        65,
        1
      ],
      [
        "2010-12-23T10:21:00-0700",
        60,
        1
      ]
    ]
  }
]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_4"><a class="anchor" href="#_response_4"></a>13.2.2. Response</h4>
<div class="paragraph">
<p>Upon successful completion the service SHALL respond with 201 Created. The response message body SHALL contain the URLs of the created Observation entities, where the order of URLs must match with the order of Observations in the dataArray from the request. In the case of the service having exceptions when creating individual observation entities, instead of responding with URLs, the service must specify "error" in the corresponding array element.</p>
</div>
<div class="paragraph">
<p><strong>Example 38: an example of a response of creating Observation entities with dataArray</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">POST /v1.1/CreateObservations HTTP/1.1
201 Created
Host: example.org
Content-Type: application/json

[
  "http://examples.org/v1.1/Observations(1)",
  "error",
  "http://examples.org/v1.1/Observations(2)"
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mqtt-extension"><a class="anchor" href="#mqtt-extension"></a>14. SensorThings Sensing MQTT Extension</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to support HTTP protocol, a SensorThings service MAY support MQTT protocol to enhance the SensorThings service publish and subscribe capabilities.
This section describes the SensorThings MQTT extension.
To help a client find the MQTT endpoints of a SensorThings service, the endpoints of the service are documented in the <code>serverSettings</code> object of the landing page described in <a href="#usage-no-resource-path">Section 9.2.1</a>.
If the service supports the MQTT extension, then the <code>serverSettings</code> object SHALL contain properties of type Object, with the names</p>
</div>
<div class="listingblock">
<div class="content">
<pre>http://www.opengis.net/spec/iot_sensing/1.0/req/receive-updates-via-mqtt/receive-updates
http://www.opengis.net/spec/iot_sensing/1.0/req/create-observations-via-mqtt/observations-creation</pre>
</div>
</div>
<div class="paragraph">
<p>These Objects SHALL contain a property named <code>endpoints</code> of type Array.
The JSON Array <code>endpoints</code> SHALL hold a list of URL Schemes that can be used to connect to the MQTT service, as seen in example 10 in <a href="#usage-no-resource-path">Section 9.2.1</a>.
If the service supports both update-notification and observation-creation over MQTT, it may use different endpoints for the two services.</p>
</div>
<div class="sect2">
<h3 id="create-mqtt-publish"><a class="anchor" href="#create-mqtt-publish"></a>14.1. Create a SensorThings Observation with MQTT Publish</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/create-observations-via-mqtt</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-observations-via-mqtt-observations-creation">create-observations-via-mqtt/observations-creation</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-create-observations-via-mqtt-observations-creation" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-create-observations-via-mqtt-observations-creation" class="paragraph">
<p>Req <a href="#req-create-observations-via-mqtt-observations-creation">44</a>: <a href="#requirement-create-observations-via-mqtt-observations-creation">create-observations-via-mqtt/observations-creation</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>To allow clients to create observations with MQTT Publish, a service SHALL support the creation of observations with MQTT as defined in <a href="#create-mqtt-publish">Section 14.1</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-observations-via-mqtt-observations-creation">create-observations-via-mqtt/observations-creation</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>SensorThings MQTT extension provides the capability of creating Observation entity using MQTT protocol. To create an Observation entity in MQTT, the client sends a MQTT Publish request to the SensorThings service and the MQTT topic is the Observations resource path prefixed with the service version number (for example, <code>v1.1/Observations</code>). The MQTT application message contains a single valid Observation entity representation. <a href="#fig-mqtt-create">Figure 4</a> contains the sequence diagram for creating Observation using MQTT publish as well as MQTT sending notifications for Observation creation.</p>
</div>
<div id="fig-mqtt-create" class="imageblock text-center">
<div class="content">
<img src="images/mqtt-create.png" alt="Creating Observations using MQTT publish" width="and receive notifications for Observations with MQTT">
</div>
<div class="title">Figure 4. Creating Observations using MQTT publish, and receive notifications for Observations with MQTT</div>
</div>
<div class="paragraph">
<p>If the MQTT topic for the Observation is a navigationLink from Datastream or FeatureOfInterest, the new Observation entity is automatically linked to that Datastream or FeatureOfInterest respectively.</p>
</div>
<div class="paragraph">
<p>Similar to creating Observations with HTTP POST, creating Observations with MQTT Publish follow the integrity constraints for creating Observation listed in <a href="#tab-integrity-creating-entity">Table 24</a>. The two special cases defined in Req 33 are also applied in the case of creating Observations with MQTT Publish.</p>
</div>
<div class="sect3">
<h4 id="mqtt-link-existing-entities-creating"><a class="anchor" href="#mqtt-link-existing-entities-creating"></a>14.1.1. Link to existing entities when creating an Observation entity</h4>
<div class="paragraph">
<p>To link to existing entities when creating an Observation entity with MQTT, the conditions in Req 34 is applied.</p>
</div>
</div>
<div class="sect3">
<h4 id="mqtt-deep-insert"><a class="anchor" href="#mqtt-deep-insert"></a>14.1.2. Create related entities when creating an Observation entity (deep insert)</h4>
<div class="paragraph">
<p>To create related entities when creating an entity with MQTT, the condition in Req 35 is applied.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="receive-mqtt-subscribe"><a class="anchor" href="#receive-mqtt-subscribe"></a>14.2. Receive updates with MQTT Subscribe</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">Requirements Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/receive-updates-via-mqtt</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Target Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Web Service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirement</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-receive-updates-via-mqtt-receive-updates">receive-updates-via-mqtt/receive-updates</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Dependency</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req-receive-updates-via-mqtt-receive-updates" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div id="requirement-receive-updates-via-mqtt-receive-updates" class="paragraph">
<p>Req <a href="#req-receive-updates-via-mqtt-receive-updates">45</a>: <a href="#requirement-receive-updates-via-mqtt-receive-updates">receive-updates-via-mqtt/receive-updates</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>To allow clients to receive notifications for the updates of SensorThings entities with MQTT, a service SHALL support the receiving updates with MQTT Subscribe as defined in <a href="#receive-mqtt-subscribe">Section 14.2</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-receive-updates-via-mqtt-receive-updates">receive-updates-via-mqtt/receive-updates</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To receive notifications from a SensorThings service when some entities updated, a client can send a MQTT Subscribe request to the SensorThings service. SensorThings API defined the following four MQTT subscription use cases. <a href="#fig-mqtt-update">Figure 5</a> contains the sequence diagram of receiving updates using MQTT Subscribe.</p>
</div>
<div id="fig-mqtt-update" class="imageblock text-center">
<div class="content">
<img src="images/mqtt-update.png" alt="Sequence diagram for receiving updates using MQTT subscribe">
</div>
<div class="title">Figure 5. Sequence diagram for receiving updates using MQTT subscribe</div>
</div>
<div class="sect3">
<h4 id="mqtt-subscribe-entity-set"><a class="anchor" href="#mqtt-subscribe-entity-set"></a>14.2.1. Receive updates of a SensorThings entity set with MQTT Subscribe</h4>
<div class="paragraph">
<p><strong>MQTT Control Packet:</strong> Subscribe</p>
</div>
<div class="paragraph">
<p><strong>Topic Pattern:</strong> SERVICE_VERSION/RESOURCE_PATH/COLLECTION_NAME</p>
</div>
<div class="paragraph">
<p><strong>Example Topic:</strong> v1.1/Datastreams(1)/Observations</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong> When a new entity is added to the entity set (e.g., a new Observation created) or an existing entity of the entity set is updated, the service returns a complete JSON representation of the newly created or updated entity.</p>
</div>
</div>
<div class="sect3">
<h4 id="mqtt-entity-updates"><a class="anchor" href="#mqtt-entity-updates"></a>14.2.2. Receive updates of a SensorThings entity with MQTT Subscribe</h4>
<div class="paragraph">
<p><strong>MQTT Control Packet:</strong> Subscribe</p>
</div>
<div class="paragraph">
<p><strong>Topic Pattern:</strong> SERVICE_VERSION/RESOURCE_PATH_TO_AN_ENTITY</p>
</div>
<div class="paragraph">
<p><strong>Example Topic:</strong> v1.1/Datastreams(1)</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong>When a property of the subscribed entity is updated, the service returns a complete JSON representation of the updated entity.</p>
</div>
</div>
<div class="sect3">
<h4 id="mqtt-subscribe-entity-property"><a class="anchor" href="#mqtt-subscribe-entity-property"></a>14.2.3. Receive updates of a SensorThings entity’s property with MQTT Subscribe</h4>
<div class="paragraph">
<p><strong>MQTT Control Packet:</strong> Subscribe</p>
</div>
<div class="paragraph">
<p><strong>Topic Pattern:</strong> SERVICE_VERSION/RESOURCE_PATH_TO_AN_ENTITY/PROPERTY_NAME</p>
</div>
<div class="paragraph">
<p><strong>Example Topic:</strong> v1.1/Datastreams(1)/observedArea</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong> When the value of the subscribed property is changed, the service returns a JSON object. The returned JSON object follows as defined in <a href="#usage-address-property-of-entity">Section 9.2.4</a>.</p>
</div>
<div class="paragraph">
<p><strong>Example 39: an example response of receiving updates of an entity’s property with MQTT Subscribe.</strong> The example shows a sample response of the following MQTT topic subscription: v1.1/Datastreams(1)/description</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "description": "This is an updated description of a thing"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="mqtt-subscribe-select"><a class="anchor" href="#mqtt-subscribe-select"></a>14.2.4. Receive updates of the selected properties of the newly created entities or updated entities of a SensorThings entity set with MQTT Subscribe</h4>
<div class="paragraph">
<p><strong>MQTT Control Packet:</strong> Subscribe</p>
</div>
<div class="paragraph">
<p><strong>Topic Pattern:</strong> SERVICE_VERSION/RESOURCE_PATH/COLLECTION_NAME?$select=PROPERTY_1,PROPERTY_2,…</p>
</div>
<div class="paragraph">
<p><strong>Response:</strong> When a new entity is added to an entity set or an existing entity is updated (e.g., a new Observation created or an existing Observation is updated), the service returns a JSON representation of the selected properties of the newly created or updated entity.</p>
</div>
<div class="paragraph">
<p>Note: In the case of an entity’s property is updated, it is possible that the selected properties are not the updated property, so that the returned JSON does not reflect the update.</p>
</div>
<div class="paragraph">
<p><strong>Example 40: an example response of receiving updates of the selected property of an entity set with MQTT Subscribe.</strong>
The example shows a sample response of the following MQTT topic subscription: v1.1/Datastreams(1)/Observations?$select=phenomenonTime,result</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "result": 45,
  "phenonmenonTime": "2015-02-05T17:00:00Z"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conformance_class_abstract_test_suite_normative"><a class="anchor" href="#_conformance_class_abstract_test_suite_normative"></a>Annex A: Conformance Class Abstract Test Suite (Normative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sensorthings_read_core_tests"><a class="anchor" href="#_sensorthings_read_core_tests"></a>A.1. SensorThings Read (Core) Tests</h3>
<div class="paragraph">
<p>This section contains the conformance classes for the SensorThings API Read (Core). The SensorThings API service needs to pass all the conformance tests defined in this section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.1.1 Conformance class: SensorThings API Entity Control Information</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Test: Common Control Information</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information/common-control-information</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-entity-control-information-common-control-information">1</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if each entity has the common control information as defined in the requirement http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-entity-control-information-common-control-information">datamodel/entity-control-information/common-control-information</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the full JSON object of the entity sets (<em>i.e.</em>, without $select) to identify, if each entity has the common control information defined in the above requirement and the service sends appropriate responses as defined in this specification.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.1.2 Conformance class: SensorThings API Thing Entity</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Test: Thing Entity</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing/thing-valid</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-thing-properties">2</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-thing-properties">datamodel/thing/properties</a><br>
<a href="#req-thing-relations">3</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-thing-relations">datamodel/thing/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if each Thing entity has the mandatory properties and mandatory relations as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the full JSON object of the Thing entity sets (<em>i.e.</em>, without $select) to identify, if each entity has the mandatory properties defined in the corresponding requirement.</p>
</div>
<div class="paragraph">
<p>Inspect the full JSON object of each Thing entity set (<em>i.e.</em>, without using the $select query option) to identify, if each entity has the mandatory relations (<em>i.e.</em>, @iot.navigationLink) defined in the corresponding requirement.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.1.3 Conformance class: SensorThings API Location Entity</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Test: Location Entity</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location/location-valid</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-location-properties">4</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-location-properties">datamodel/location/properties</a><br>
<a href="#req-location-relations">5</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-location-relations">datamodel/location/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if each Location entity has the mandatory properties and mandatory relations as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the full JSON object of the Location entity sets (<em>i.e.</em>, without $select) to identify, if each entity has the mandatory properties defined in the corresponding requirement.</p>
</div>
<div class="paragraph">
<p>Inspect the full JSON object of each Location entity set (<em>i.e.</em>, without using the $select query option) to identify, if each entity has the mandatory relations (<em>i.e.</em>, @iot.navigationLink) defined in the corresponding requirement.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.1.4 Conformance class: SensorThings API HistoricalLocation Entity</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Test: Historicalocation Entity</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location/historical-location-valid</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-historical-location-properties">6</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-historical-location-properties">datamodel/historical-location/properties</a><br>
<a href="#req-historical-location-relations">7</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-historical-location-relations">datamodel/historical-location/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if each Historicalocation entity has the mandatory properties and mandatory relations as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the full JSON object of the Historicalocation entity sets (<em>i.e.</em>, without $select) to identify, if each entity has the mandatory properties defined in the corresponding requirement.</p>
</div>
<div class="paragraph">
<p>Inspect the full JSON object of each Historicalocation entity set (<em>i.e.</em>, without using the $select query option) to identify, if each entity has the mandatory relations (<em>i.e.</em>, @iot.navigationLink) defined in the corresponding requirement.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.1.5 Conformance class: SensorThings API Datastream Entity</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Test: Datastream Entity</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream/datastream-valid</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-datastream-properties">9</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-datastream-properties">datamodel/datastream/properties</a><br>
<a href="#req-datastream-relations">10</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-datastream-relations">datamodel/datastream/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if each Datastream entity has the mandatory properties and mandatory relations as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the full JSON object of the Datastream entity sets (<em>i.e.</em>, without $select) to identify, if each entity has the mandatory properties defined in the corresponding requirement.</p>
</div>
<div class="paragraph">
<p>Inspect the full JSON object of each Datastream entity set (<em>i.e.</em>, without using the $select query option) to identify, if each entity has the mandatory relations (<em>i.e.</em>, @iot.navigationLink) defined in the corresponding requirement.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.1.6 Conformance class: SensorThings API Sensor Entity</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Test: Sensor Entity</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor/sensor-valid</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-sensor-properties">11</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-sensor-properties">datamodel/sensor/properties</a><br>
<a href="#req-sensor-relations">12</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-sensor-relations">datamodel/sensor/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if each Sensor entity has the mandatory properties and mandatory relations as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the full JSON object of the Sensor entity sets (<em>i.e.</em>, without $select) to identify, if each entity has the mandatory properties defined in the corresponding requirement.</p>
</div>
<div class="paragraph">
<p>Inspect the full JSON object of each Sensor entity set (<em>i.e.</em>, without using the $select query option) to identify, if each entity has the mandatory relations (<em>i.e.</em>, @iot.navigationLink) defined in the corresponding requirement.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.1.7 Conformance class: SensorThings API ObservedProperty Entity</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Test: ObservedProperty Entity</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property/observed-property-valid</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-observed-property-properties">13</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observed-property-properties">datamodel/observed-property/properties</a><br>
<a href="#req-observed-property-relations">14</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observed-property-relations">datamodel/observed-property/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if each ObservedProperty entity has the mandatory properties and mandatory relations as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the full JSON object of the ObservedProperty entity sets (<em>i.e.</em>, without $select) to identify, if each entity has the mandatory properties defined in the corresponding requirement.</p>
</div>
<div class="paragraph">
<p>Inspect the full JSON object of each ObservedProperty entity set (<em>i.e.</em>, without using the $select query option) to identify, if each entity has the mandatory relations (<em>i.e.</em>, @iot.navigationLink) defined in the corresponding requirement.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.1.8 Conformance class: SensorThings API Observation Entity</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Test: Observation Entity</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation/observation-valid</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-observation-properties">15</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observation-properties">datamodel/observation/properties</a><br>
<a href="#req-observation-relations">16</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-observation-relations">datamodel/observation/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if each Observation entity has the mandatory properties and mandatory relations as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the full JSON object of the Observation entity sets (<em>i.e.</em>, without $select) to identify, if each entity has the mandatory properties defined in the corresponding requirement.</p>
</div>
<div class="paragraph">
<p>Inspect the full JSON object of each Observation entity set (<em>i.e.</em>, without using the $select query option) to identify, if each entity has the mandatory relations (<em>i.e.</em>, @iot.navigationLink) defined in the corresponding requirement.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.1.9 Conformance class: SensorThings API FeatureOfInterest Entity</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Test: FeatureOfInterest Entity</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest/feature-of-interest-valid</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-feature-of-interest-properties">17</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-feature-of-interest-properties">datamodel/feature-of-interest/properties</a><br>
<a href="#req-feature-of-interest-relations">18</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-feature-of-interest-relations">datamodel/feature-of-interest/relations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if each FeatureOfInterest entity has the mandatory properties and mandatory relations as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the full JSON object of the FeatureOfInterest entity sets (<em>i.e.</em>, without $select) to identify, if each entity has the mandatory properties defined in the corresponding requirement.</p>
</div>
<div class="paragraph">
<p>Inspect the full JSON object of each FeatureOfInterest entity set (<em>i.e.</em>, without using the $select query option) to identify, if each entity has the mandatory relations (<em>i.e.</em>, @iot.navigationLink) defined in the corresponding requirement.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.1.10   Conformance class: SensorThings API Resource Path</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Test: Resource Path</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path/resource-path-to-entities</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-resource-path-resource-path-to-entities">19</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-resource-path-resource-path-to-entities">resource-path/resource-path-to-entities</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports all the resource path usages as defined in the requirement http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-resource-path-resource-path-to-entities">resource-path/resource-path-to-entities</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the service to identify, if each resource path usage has been implemented property.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_sensorthings_api_filtering_extension_tests"><a class="anchor" href="#_sensorthings_api_filtering_extension_tests"></a>A.2. SensorThings API Filtering Extension Tests</h3>
<div class="paragraph">
<p>This section contains the conformance classes for the SensorThings API filtering extension. That means a SensorThings API service that allows clients to further filter data with query options needs to pass the conformance tests defined in this section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.2.1  Conformance class: SensorThings API Request Data with Filters</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Dependencies:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information</p>
</li>
<li>
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing</p>
</li>
<li>
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location</p>
</li>
<li>
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location</p>
</li>
<li>
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream</p>
</li>
<li>
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor</p>
</li>
<li>
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property</p>
</li>
<li>
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation</p>
</li>
<li>
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest</p>
</li>
<li>
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.2.1.1 Test: Query Option Order</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/order" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/order</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-request-data-order">22</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-order">request-data/order</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the results of the service requests are as if the system query options were evaluated in the order as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Send a query includes the query options listed in requirement http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-order">request-data/order</a>, and check if the results are evaluated according to the order defined in this specification.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.2.1.2 Test: Request Data with $expand and $select</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/expand-and-select" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/expand-and-select</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-request-data-expand">23</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-expand">request-data/expand</a><br>
<a href="#req-request-data-select">24</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-select">request-data/select</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports $expand and $select as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Send requests with $expand following the different usages as defined in the requirement http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-expand">request-data/expand</a>, check if the server returns appropriate result as defined in this specification.</p>
</div>
<div class="paragraph">
<p>Send requests with the $select option following the different usages as defined in the requirement http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-select">request-data/select</a>, check if the server returns appropriate result as defined in this specification.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.2.1.3 Test: Query Option Response Code</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/status-codes" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/status-codes</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-request-data-status-code">20</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-status-code">request-data/status-code</a><br>
<a href="#req-request-data-query-status-code">21</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-query-status-code">request-data/query-status-code</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check when a client requests an entity that is not available in the service, if the service responds with 404 Not Found or 410 Gone as defined in the requirement http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-status-code">request-data/status-code</a></p>
</div>
<div class="paragraph">
<p>Check when a client use a query option that doesn&#8217;t support by the service, if the service fails the request and responds with 501 NOT Implemented as defined in the requirement http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-query-status-code">request-data/query-status-code</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Send a HTTP request for an entity that is not available in the service, check if the server returns 404 Not Found or 410 Gone.</p>
</div>
<div class="paragraph">
<p>(If applicable) Send a query with a query option that is not supported by the service, check if the server returns 501 Not Implemented.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.2.1.4 Test: Sorting Query Option</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/sorting" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/sorting</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-request-data-orderby">25</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-orderby">request-data/orderby</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports the $orderby query option as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Send a query with the $orderby query option, check if the server returns appropriate result as defined in this specification.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.2.1.5 Test: Client-driven Pagination Query Option</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/client-driven-pagination" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/client-driven-pagination</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-request-data-top">26</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-top">request-data/top</a>
<a href="#req-request-data-skip">27</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-skip">request-data/skip</a>
<a href="#req-request-data-count">28</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-count">request-data/count</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports the $top, $skip and $count query option as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Send a query with the $top query option, check if the server returns appropriate result as defined in this specification.</p>
</div>
<div class="paragraph">
<p>Send a query with the $skip query option, check if the server returns appropriate result as defined in this specification.</p>
</div>
<div class="paragraph">
<p>Send a query with the $count query option, check if the server returns appropriate result as defined in this specification.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.2.1.6 Test: Filter Query Option</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/filter-query-options" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/filter-query-options</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-request-data-filter">29</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-filter">request-data/filter</a>
<a href="#req-request-data-built-in-filter-operations">30</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-built-in-filter-operations">request-data/built-in-filter-operations</a>
<a href="#req-request-data-built-in-query-functions">31</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-built-in-query-functions">request-data/built-in-query-functions</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports the $filter query option, the built-in filter operators, the built-in filter functions and implements the correct operator precedence as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Send a query with the $filter query option, check if the server returns appropriate result as defined in this specification.</p>
</div>
<div class="paragraph">
<p>Send a query with the $filter query option for each built-in filter operator, check if the server returns appropriate result as defined in this specification.</p>
</div>
<div class="paragraph">
<p>Send a query with the $filter query option for each combination of two built-in filter operators with adjacent operator precedence, check if the server returns appropriate result as defined in this specification.</p>
</div>
<div class="paragraph">
<p>Send a query with the $filter query option for each built-in filter function, check if the server returns appropriate result as defined in this specification.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.2.1.7 Test: Server-driven Pagination</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/server-driven-pagination" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/request-data/server-driven-pagination</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-request-data-pagination">32</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-pagination">request-data/pagination</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports the server-driven pagination as defined in the requirement http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-request-data-pagination">request-data/pagination</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Send a query to list all entities of an entity set, check if the server returns a subset of the requested entities as defined in this specification.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_sensorthings_api_create_update_delete_extension_tests"><a class="anchor" href="#_sensorthings_api_create_update_delete_extension_tests"></a>A.3. SensorThings API Create-Update-Delete Extension Tests</h3>
<div class="paragraph">
<p>This section contains the conformance classes for the SensorThings API create-update-delete extension. That means a SensorThings API service that allows clients to create/update/delete entities needs to pass the conformance tests defined in this section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.3.1  Conformance class: SensorThings API Create-Update-Delete</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Dependencies:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path</a></p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.3.1.1 Test: Sensing Entity Creation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete/sensing-entity-creation" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete/sensing-entity-creation</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-create-update-delete-create-entity">33</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-create-entity">create-update-delete/create-entity</a></p>
</div>
<div class="paragraph">
<p><a href="#req-create-update-delete-link-to-existing-entities">34</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-link-to-existing-entities">create-update-delete/link-to-existing-entities</a></p>
</div>
<div class="paragraph">
<p><a href="#req-create-update-delete-deep-insert">35</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-deep-insert">create-update-delete/deep-insert</a></p>
</div>
<div class="paragraph">
<p><a href="#req-create-update-delete-deep-insert-status-code">36</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-deep-insert-status-code">create-update-delete/deep-insert-status-code</a></p>
</div>
<div class="paragraph">
<p><a href="#req-create-update-delete-historical-location-auto-creation">8</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-historical-location-auto-creation">create-update-delete/historical-location-auto-creation</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports the creation of entities as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>For each SensorThings entity type creates an entity instance by following the integrity constraints of Table 24 and creating the related entities with a single request (<em>i.e.</em>, deep insert), check if the entity instance is successfully created and the server responds as defined in this specification.</p>
</div>
<div class="paragraph">
<p>Create an entity instance and its related entities with a deep insert request that does not conform to the specification (e.g., missing a mandatory property), check if the service fails the request without creating any entity within the deep insert request and responds the appropriate HTTP status code.</p>
</div>
<div class="paragraph">
<p>For each SensorThings entity type issue an entity creation request that does not follow the integrity constraints of Table 24 with deep insert, check if the service fails the request without creating any entity within the deep insert request and responds the appropriate HTTP status code.</p>
</div>
<div class="paragraph">
<p>For each SensorThings entity type creates an entity instance by linking to existing entities with a single request, check if the server responds as defined in this specification.</p>
</div>
<div class="paragraph">
<p>For each SensorThings entity type creates an entity instance that does not follow the integrity constraints of Table 24 by linking to existing entities with a single request, check if the server responds as defined in this specification.</p>
</div>
<div class="paragraph">
<p>Create an Observation entity for a Datastream without any Observations and the Observation creation request does not create a new or linking to an existing FeatureOfInterest, check if the service creates a new FeatureOfInterest for the created Observation with the location property of the Thing’s Location entity.</p>
</div>
<div class="paragraph">
<p>Create an Observation entity for a Datastream that already has Observations and the Observation creation request does not create a new or linking to an existing FeatureOfInterest, check if the service automatically links the newly created Observation with an existing FeatureOfInterest whose location property is from the Thing’s Location entity.</p>
</div>
<div class="paragraph">
<p>Create an Observation entity and the Observation creation request does not include resultTime, check if the resultTime property is created with a null value.</p>
</div>
<div class="paragraph">
<p>Create a Location for a Thing entity, check if the Thing has a HistoricalLocation created by the service according to the Location entity.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.3.1.2 Test: Sensing Entity Update</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete/update-entity" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete/update-entity</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-create-update-delete-update-entity">37</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-update-entity">create-update-delete/update-entity</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports the update of entities as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>For each SensorThings entity type send an update request with PATCH, check (1) if the properties provided in the payload corresponding to updatable properties replace the value of the corresponding property in the entity and (2) if the missing properties of the containing entity or complex property are not directly altered.</p>
</div>
<div class="paragraph">
<p>(Where applicable) For each SensorThings entity type send an update request with PUT, check if the service responds as defined in <a href="#update-entity">Section 10.3</a>.</p>
</div>
<div class="paragraph">
<p>For each SensorThings entity type send an update request with PATCH that contains related entities as inline content, check if the service fails the request and returns appropriate HTTP status code.</p>
</div>
<div class="paragraph">
<p>For each SensorThings entity type send an update request with PATCH that contains binding information for navigation properties, check if the service updates the navigationLink accordingly.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.3.1.3 Test: Sensing Entity Deletion</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete/sensing-entity-deletion" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete/sensing-entity-deletion</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-create-update-delete-delete-entity">38</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-update-delete-delete-entity">create-update-delete/delete-entity</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports the deletion of entities as defined in <a href="#delete-entity">Section 10.4</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Delete an entity instance, and check if the service responds as defined in <a href="#delete-entity">Section 10.4</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_sensorthings_api_batch_request_extension_tests"><a class="anchor" href="#_sensorthings_api_batch_request_extension_tests"></a>A.4. SensorThings API Batch Request Extension Tests</h3>
<div class="paragraph">
<p>This section contains the conformance classes for the SensorThings API batch request extension. That means a SensorThings API service that allows clients to send a single HTTP request that groups multiple requests needs to pass the conformance tests defined in this section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.4.1 Conformance class: SensorThings API Batch Request</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/batch-request</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Dependencies:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path</a></p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.4.1.1 Test: Batch Request</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/batch-request/batch-request" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/batch-request/batch-request</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-batch-request-batch-request">39</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-batch-request-batch-request">batch-request/batch-request</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports the batch request as defined in <a href="#batch-requests">Chapter 11</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Submit batch requests according to the examples listed in <a href="#batch-requests">Chapter 11</a>, check if the service responds as defined in this specification.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_sensorthings_api_multipledatastream_tests"><a class="anchor" href="#_sensorthings_api_multipledatastream_tests"></a>A.5. SensorThings API MultipleDatastream Tests</h3>
<div class="paragraph">
<p>This section contains the conformance classes for the SensorThings API MultiDatastream extension. That means a SensorThings API service that allows clients to group a collection of observations’ results into an array (<em>i.e.</em>, a complex result type) needs to pass the conformance tests defined in this section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.5.1   Conformance class: SensorThings API MultiDatastream</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/multi-datastream</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Dependencies:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path</a></p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.5.1.1 Test: SensorThings API MultiDatastream</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/multi-datastream/multi-datastream-valid" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/multi-datastream/multi-datastream-valid</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-multi-datastream-properties">40</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-multi-datastream-properties">multi-datastream/properties</a></p>
</div>
<div class="paragraph">
<p><a href="#req-multi-datastream-relations">41</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-multi-datastream-relations">multi-datastream/relations</a></p>
</div>
<div class="paragraph">
<p><a href="#req-multi-datastream-constraints">42</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-multi-datastream-constraints">multi-datastream/constraints</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service&#8217;s MultiDatastream entity has the mandatory properties and relations as defined in this specification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Inspect the full JSON object of a MultiDatastream entity (<em>i.e.</em>, without $select)
to identify, if each entity has the mandatory properties and relations, and fulfill the constraints defined in the corresponding requirements.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_sensorthings_api_data_array_extension"><a class="anchor" href="#_sensorthings_api_data_array_extension"></a>A.6. SensorThings API Data Array Extension</h3>
<div class="paragraph">
<p>This section contains the conformance classe for the SensorThings API data array extension. That means a SensorThings API service that allows clients to request the compact data array encoding defined in this specification needs to pass the conformance tests defined in this section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.6.1  Conformance class: SensorThings API Data Array</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/data-array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Dependencies:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path</a></p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.6.1.1 Test: SensorThings API Sensing Data Array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/data-array/data-array-valid" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/data-array/data-array-valid</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-data-array-data-array">43</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-data-array-data-array">data-array/data-array</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports the data array extension as defined in <a href="#data-array-extension">Chapter 13</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Issue a GET request for Datastreams (and MultiDatastreams if applicable) that includes the query option "$resultFormat=dataArray", and then inspect the returned JSON to identify if it fulfills the data array format as defined in <a href="#data-array-extension">Chapter 13</a>.</p>
</div>
<div class="paragraph">
<p>Create Observations for at least two Datastreams by using the data array format as defined in <a href="#data-array-extension">Chapter 13</a>. Inspect the response code and returned JSON to identify if it fulfills the response as defined in <a href="#data-array-extension">Chapter 13</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_sensorthings_api_observation_creation_via_mqtt_extension_tests"><a class="anchor" href="#_sensorthings_api_observation_creation_via_mqtt_extension_tests"></a>A.7. SensorThings API Observation Creation via MQTT Extension Tests</h3>
<div class="paragraph">
<p>This section contains the conformance class for the SensorThings API Observation creation extension. That means a SensorThings API service that allows clients to create Observations via MQTT needs to pass the conformance tests defined in this section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.7.1  Conformance class: SensorThings API Observation Creation via MQTT</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/create-observations-via-mqtt</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Dependencies:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete</a></p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.7.1.1 Test: SensorThings API Observation Creation via MQTT</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/create-observations-via-mqtt/observation-creation" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/create-observations-via-mqtt/observation-creation</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-create-observations-via-mqtt-observations-creation">44</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-create-observations-via-mqtt-observations-creation">create-observations-via-mqtt/observations-creation</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if the service supports the creation and update of entities via MQTT as defined in <a href="#create-mqtt-publish">Section 14.1</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Create an Observation entity instance containing binding information for navigation properties using MQTT Publish, check if the server responds as defined in <a href="#create-mqtt-publish">Section 14.1</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_sensorthings_api_receiving_updates_via_mqtt_extension_tests"><a class="anchor" href="#_sensorthings_api_receiving_updates_via_mqtt_extension_tests"></a>A.8. SensorThings API Receiving Updates via MQTT Extension Tests</h3>
<div class="paragraph">
<p>This section contains the conformance class for the SensorThings API receiving updates extension. That means a SensorThings API service that allows clients to receive notifications regarding updates of entities via MQTT needs to pass the conformance tests defined in this section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;">A.8.1   Conformance class: SensorThings API Receiving Updates via MQTT</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Conformance class id:</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>http://www.opengis.net/spec/iot_sensing/1.1/conf/receive-updates-via-mqtt</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><strong>Dependencies:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/entity-control-information</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/thing</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/historical-location</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/datastream</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/sensor</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observed-property</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/observation</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/datamodel/feature-of-interest</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/resource-path</a></p>
</li>
<li>
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/create-update-delete</a></p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>A.8.1.1 Test: SensorThings API Receiving Updates via MQTT</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test id</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="http://www.opengis.net/spec/iot_sensing/1.1/conf/receive-updates-via-mqtt/receive-updates" class="bare">http://www.opengis.net/spec/iot_sensing/1.1/conf/receive-updates-via-mqtt/receive-updates</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Requirements</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p><a href="#req-receive-updates-via-mqtt-receive-updates">45</a>. http://www.opengis.net/spec/iot_sensing/1.1/req/<a href="#requirement-receive-updates-via-mqtt-receive-updates">receive-updates-via-mqtt/receive-updates</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test purpose</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Check if a client can receive notifications for the updates of a SensorThings entity set or an individual entity with MQTT.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Test method</p>
</div></div></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><div class="content"><div class="paragraph">
<p>Subscribe to an entity set with MQTT Subscribe. Then create a new entity of the subscribed entity set. Check if a complete JSON representation of the newly created entity through MQTT is received.</p>
</div>
<div class="paragraph">
<p>Subscribe to an entity set with MQTT Subscribe. Then update an existing entity of the subscribed entity set. Check if a complete JSON representation of the updated entity through MQTT is received.</p>
</div>
<div class="paragraph">
<p>Subscribe to an entity’s property with MQTT Subscribe. Then update the property with PATCH. Check if the JSON object of the updated property is received.</p>
</div>
<div class="paragraph">
<p>Subscribe to multiple properties of an entity set with MQTT Subscribe. Then create a new entity of the entity set.  Check if a JSON object of the subscribed properties is received.</p>
</div>
<div class="paragraph">
<p>Subscribe to multiple properties of an entity set with MQTT Subscribe. Then update an existing entity of the entity set with PATCH. Check if a JSON object of the subscribed properties is received.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history"><a class="anchor" href="#_revision_history"></a>Annex B: Revision history</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Date</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Release</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Author</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Paragraph modified</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2018-10-12</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Steve Liang</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Many</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Properties field is added to all the entities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2018-10-15</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">9.3.3.5.2 Built-in query functions</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Added three-parameter substring function.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2018-10-16</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">9.3.3.5.1. Built-in filter operations; A.2.1.6 Test: Filter Query Option</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Specify operator precedence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2018-12-07</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">9.3.3.1 $orderby</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Removed reference to ordering by a "type cast".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-04-11</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">9.2.1 Usage 1: no resource path</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Add <code>serverSettings</code> property in response of SERVICE_ROOT_URI requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-04-29</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Brian Miles</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">10.4. Delete an entity</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Add integrity contraint between Things and HistoricalLocations removal.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-04-29</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Brian Miles</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">9.2.7. Usage 7: address to an associationLink</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Fix inconsistencies in definition of @iot.selfLink property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-05-02</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">8.2.3. HistoricalLocation</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Location of a Thing can not be updated 'in the past'.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-08-01</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Brian Miles</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">8.2.2. Location; 8.2.8 FeatureOfInterest</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Update GeoJSON MIME type to application/geo+json.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-08-01</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Brian Miles</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">8.2.2. Location</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Correct the description of GeoJSON as using a 'geographic space model' rather then the more generic 'geometric space model'.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-08-01</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Chapter 14. SensorThings Sensing MQTT Extension</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Add version prefix to MQTT topics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-08-22</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Many</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Update version number in text and URIs from 1.0 to 1.1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-08-22</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Chapter 13. SensorThings Data Array Extension</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Explain query parameters when used with dataArray extension; Changed examples to use absolute navigation links; Add @iot.nextLink and @iot.count to the examples; Fixed wording of test method; Fixed incorrect relative navigation link; Removed unexplained <a href="mailto:dataArray@iot.count">dataArray@iot.count</a> elements from examples.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-08-22</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Chapter 2. Conformance</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Grouped data model related requirements and conformance classes into a datamodel class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-09-09</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Brian Miles</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">8.2.5. Sensor</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Expand the Sensor encodingType with a ValueCode for webpages/URLs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-10-22</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Chapter 11. Batch Requests</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Clarified batch-processing referencing mechanisms; Remove example request headers: If-Match, Content-Transfer-Encoding</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2019-12-04</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Hylke van der Schaaf</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">7.7. SensorThings API and Security</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Added implications of conformance class list for security extensions</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="bibliography"><a class="anchor" href="#bibliography"></a>Annex C: Bibliography</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="bib-geojson"></a>[1]The GeoJSON Format Specification, January 15, 2015. Available Online: <a href="https://datatracker.ietf.org/doc/draft-butler-geojson/" class="bare">https://datatracker.ietf.org/doc/draft-butler-geojson/</a></p>
</div>
<div class="paragraph">
<p><a id="bib-itu-iot"></a>[2]ITU-T Y.2060 Overview of the Internet of Things, 2012. Available Online:https://www.itu.int/rec/T-REC-Y.2060-201206-I</p>
</div>
<div class="paragraph">
<p><a id="bib-ogc-oandm"></a>[3]OGC and ISO 19156:2001, OGC 10-004r3 and ISO 19156:2011(E), OGC Abstract Specification: Geographic information — Observations and Measurements. Available Online: <a href="http://portal.opengeospatial.org/files/?artifact_id=41579" class="bare">http://portal.opengeospatial.org/files/?artifact_id=41579</a></p>
</div>
<div class="paragraph">
<p><a id="bib-sensorml"></a>[4]OGC 12-000, OGC® SensorML: Model and XML Encoding Standard. Available Online: <a href="http://www.opengeospatial.org/standards/sensorml" class="bare">http://www.opengeospatial.org/standards/sensorml</a></p>
</div>
<div class="paragraph">
<p><a id="bib-atom"></a>[5]RFC 5023, The Atom Publishing Protocol. Available Online: <a href="https://www.ietf.org/rfc/rfc5023.txt" class="bare">https://www.ietf.org/rfc/rfc5023.txt</a></p>
</div>
<div class="paragraph">
<p><a id="bib-json"></a>[6]RFC 6902, JavaScript Object Notation (JSON) Patch. Available Online:https://www.ietf.org/rfc/rfc6902.txt</p>
</div>
<hr>
<div class="paragraph">
<p><a id="footnote1"></a>[1]<a href="http://www.opengeospatial.org/cite">www.opengeospatial.org/cite</a></p>
</div>
<div class="paragraph">
<p><a id="footnote2"></a>[2]The two terms of IoT and WoT are frequently used interchangeably.</p>
</div>
<div class="paragraph">
<p><a id="footnote3"></a>[3]In some cases, the Sensor in this data model can also be seen as the Procedure (method, algorithm, or instrument) defined in [OGC 10-004r3 and ISO 19156:2011].</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-09-03 08:22:06 UTC
</div>
</div>
</body>
</html>